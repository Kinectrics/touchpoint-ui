{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/touchpoint-ui/SystemComponents/SystemPopupHandler.js","../src/touchpoint-ui/Contexts/ModuleContext.js","../src/touchpoint-ui/SystemComponents/SystemModuleContainer.js","../src/touchpoint-ui/Contexts/SystemContext.js","../src/touchpoint-ui/Contexts/LockedContext.js","../src/touchpoint-ui/SystemComponents/ThemeEngine.js","../src/touchpoint-ui/Components/Core/TouchPointApp.js","../src/touchpoint-ui/Hooks/UseSystem.js","../src/touchpoint-ui/Hooks/UsePresence.js","../src/touchpoint-ui/Components/Core/AppToolbar.js","../src/touchpoint-ui/Components/Core/AppFooter.js","../src/touchpoint-ui/Components/Inputs/CoreButton.js","../src/touchpoint-ui/Components/Inputs/CloseButton.js","../src/touchpoint-ui/Components/Core/AppDrawer.js","../src/touchpoint-ui/Components/Inputs/FreeButton.js","../src/touchpoint-ui/Components/Inputs/ConfirmButton.js","../src/touchpoint-ui/Components/Inputs/Tile.js","../src/touchpoint-ui/Components/Inputs/TextBox.js","../src/touchpoint-ui/Hooks/UseModuleData.js","../src/touchpoint-ui/Components/Inputs/SearchBar.js","../src/touchpoint-ui/Contexts/RadioContext.js","../src/touchpoint-ui/Components/Inputs/RadioGroup.js","../src/touchpoint-ui/Components/Inputs/RadioButton.js","../src/touchpoint-ui/Components/Inputs/ControlBar.js","../src/touchpoint-ui/Components/Inputs/CommentBox.js","../src/touchpoint-ui/Components/Inputs/ComboBox.js","../src/touchpoint-ui/Components/Inputs/CheckBox.js","../src/touchpoint-ui/Contexts/MenuContext.js","../src/touchpoint-ui/Components/Display/MenuButton.js","../src/touchpoint-ui/Components/Inputs/DockIcon.js","../src/touchpoint-ui/Components/Containers/InfoCard.js","../src/touchpoint-ui/Components/Display/PopupCard.js","../src/touchpoint-ui/Components/Display/DisplaySupport/InputCell.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MainTableRow.js","../src/touchpoint-ui/Components/Display/DisplaySupport/FilterMenu.js","../src/touchpoint-ui/DataObjects/DataFilter.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButtonActive.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilters.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SortMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/CheckButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/ColumnSettings.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SaveTableLayout.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TableControls.js","../src/touchpoint-ui/Hooks/UseSettings.js","../src/touchpoint-ui/Components/Display/DisplaySupport/PageContols.js","../src/touchpoint-ui/Components/Display/DisplaySupport/CoreTable.js","../src/touchpoint-ui/Hooks/UseDataset.js","../src/touchpoint-ui/DataObjects/DataType.js","../src/touchpoint-ui/DataObjects/DataHeader.js","../src/touchpoint-ui/Hooks/UseHeaders.js","../src/touchpoint-ui/Components/Display/MainTable.js","../src/touchpoint-ui/Components/Containers/InfoTab.js","../src/touchpoint-ui/Components/Containers/InfoTabContainer.js","../src/touchpoint-ui/Components/Containers/Module.js","../src/touchpoint-ui/Components/Containers/SplitScreen.js","../src/touchpoint-ui/Components/Containers/ControlledTabContainer.js","../src/touchpoint-ui/Components/Containers/Dock.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react'\nimport './SystemPopupHandler.css'\n\nexport default function SystemPopupHandler(props) {\n\t\n\tconst num = props.activePopups.length\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e){\n\t\tif (e.target.classList.contains('systemPopupBackdrop')){\n\t\t\tprops.system.Popup.closeAll()\n\t\t}\n\t}\n\t\n\t//If the active popup isn't null, render it\n\tif(num === 0){return null}\n\t\n\treturn(\n\t\tprops.activePopups.map((Pop, idx)=>{\n\t\t\treturn <div \n\t\t\t\tclassName={\"systemPopupBackdrop \" + props.popupEffect}\n\t\t\t\tonClick={clickBackdrop}\n\t\t\t\tkey = {idx}\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: idx === num - 1 ? null :  'none',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{typeof (Pop) == 'function' ? <Pop /> : Pop}\n\t\t\t</div> \n\t\t})\n\t)\t\n}\n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by a module to talk to it's children (eg. tying a searchbar to a maintable)\nconst moduleContext = createContext({})\nexport default moduleContext ","import React, {useState} from 'react'\nimport {Route, Switch} from 'react-router'\nimport moduleContext from '../Contexts/ModuleContext'\n\t\nexport default function SystemModuleContainer(props){\n\t\n\t//Adjusts the module container to fit between the system toolbars\n\tconst styleSettings = {\n\t\theight: props.system.Layout.get().heightCSS,\n\t\twidth: props.system.Layout.get().widthCSS,\n\t\tright: '0'\n\t}\n\n\tconst moduleList = props.system.Modules.list();\n\tconst moduleDataState = useState({})\n\n\t//Render the chosen module\n\treturn(\n\t\t\t<moduleContext.Provider value={moduleDataState}>\n\t\t\t\t\n\t\t\t\t<div className={\"moduleContainer\"} style={styleSettings}>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{/*<ActiveModule.component /> */}\n\n\t\t\t\t\t\t{Object.keys(moduleList).map(m => {\n\t\t\t\t\t\t\treturn <Route path={'/' + m} key={'routeFor' + m} component={moduleList[m].component} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<Route path='/' component={moduleList[props.system.Modules.getHomeName()].component} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</moduleContext.Provider>\n\t)\n\t\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//System wide variables (eg. activeUser, theming functions etc.) to be defined in the App component. \nconst systemContext = createContext({})\nexport default systemContext \n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Locking context. If a compnent is locked, then all child components will be locked as well \n//Only certain components support locking (see docs for more information)\nconst lockedContext = createContext(false)\nexport default lockedContext ","export default class ThemeEngine{\n\t\n\tconstructor(){\n\t\t//The list of available themes.\n\t\tthis.themes = {\n\t\t\torange: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(221, 70, 0)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(211, 67, 0)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'rgb(0, 138, 230)',\n\t\t\t\tfreeButtonNegativeBG: 'rgb(211, 67, 0)',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(238, 238, 238)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tblue: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(2, 187, 219)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(0, 138, 230)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(245, 245, 245)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tdark: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: '#63A1FF',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tlabelColor: '#63A1FF',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: '#35363A',\n\t\t\t\tnavTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: '#222229',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: '#313440',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.158)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: '#202124',\n\t\t\t\tinputInvalidColor: 'rgb(134, 67, 67)',\n\t\t\t\tinputValidColor: 'rgb(45, 104, 45)',\n\t\t\t},\n\t\t}\n\t}\n\t\n\t//Set the CSS cariables that control theme colors\n\tsetTheme(themeName){\n\t\t//check if a theme exists with that name \n\t\tif(this.themes[themeName]){\n\t\t\t\n\t\t\tconst themeData = this.themes[themeName.toLowerCase()]\n\t\t\t\n\t\t\tObject.entries(themeData).forEach(([key, value]) => {\n\t\t\t\tdocument.documentElement.style.setProperty('--' + key, value)\n\t\t\t})\n\t\t\t\n\t\t\tlocalStorage.setItem('themeName',themeName)\n\t\t}\n\t}\n\t\n\t//fethches the user's preferred theme and applies it\n\tgetUserTheme(){\n\t\tthis.setTheme(localStorage.getItem('themeName'))\n\t}\n}\n","import './TouchPointApp.css'\nimport '../Inputs/InputStyles.css'\nimport React, {useState, useEffect, useRef} from 'react'\nimport SystemPopupHandler from '../../SystemComponents/SystemPopupHandler'\nimport SystemModuleContainer from '../../SystemComponents/SystemModuleContainer'\nimport systemContext from '../../Contexts/SystemContext'\nimport lockedContext from '../../Contexts/LockedContext'\nimport SystemThemeEngine from '../../SystemComponents/ThemeEngine'\nimport PropTypes from 'prop-types'\nimport {HashRouter} from 'react-router-dom'\n\nexport default function TouchPointApp(props){\n\t\n\t//System-wide state\n\tconst [activePopups, setPopups] = useState([]);\n\t\n\tconst portalDestination = useRef()\n\t\n\t//Set moduleTransition to 'transition' while the modules are being switched out\n\tconst [screenBlock, setScreenBlock] = useState(false) //if true, no clicks will register\n\tconst [popupEffect, setPopupEffect] = useState('')\n\tconst [moduleLock, setModuleLock] = useState(props.locked)\n\t\n\tconst [drawerIsOpen, setDrawerIsOpen] = useState(false)\n\tconst [screenEffect, setScreenEffect] = useState('')\n\tconst [drawerExists, setDrawerExists] = useState(false)\n\t\n\tconst [layout, setLayout] = useState({\n\t\theightCSS: '100%',\n\t\twidthCSS: '100%',\n\t\t\n\t\twidths: {},\n\t\theights: {},\n\t})\n\t\n\tfunction saveSettings(settingsID, settingsToken){\n\t\tif (props.saveSettings && settingsID) {\n\t\t\tprops.saveSettings(settingsID, settingsToken)\n\t\t}\n\t}\n\t\n\tasync function getSettings(settingsID) {\n\t\ttry {\n\t\t\tif (props.getSettings && settingsID) {\n\t\t\t\treturn await props.getSettings(settingsID)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err)\n\t\t\treturn null\n\t\t}\n\t}\n\t\n\t//Functions that are available to all modules and can be used system-wode \n\t//Used for things like switching modules, sending out emails, etc. for consistency across the system\n\tconst System = {\n\t\t\n\t\t//Setting system wide variables\n\t\tTheme: {\n\t\t\tset:(themeName) => {\n\t\t\t\tconst themeEngine = new SystemThemeEngine()\n\t\t\t\tthemeEngine.setTheme(themeName)\n\t\t\t\tsaveSettings('TouchPointAppTheme', themeName)\n\t\t\t}\n\t\t},\n\t\t\n\t\tModules: {\n\t\t\topen: (moduleName) => {\n\n\t\t\t\tif (props.modules[moduleName]) {\n\t\t\t\t\t//setActiveModule(moduleName)\n\t\t\t\t\twindow.location.href = '#/' + moduleName\n\t\t\t\t\tsetModuleLock(props.modules[moduleName].locked)\n\n\t\t\t\t\tif (props.onOpenModule) { props.onOpenModule(moduleName) }\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tlist: () => {\n\t\t\t\tconst modules = {}\n\t\t\t\tObject.keys(props.modules).forEach((m) => {\n\t\t\t\t\tif (!props.modules[m].hidden) {\n\t\t\t\t\t\tmodules[m] = props.modules[m]\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn modules\n\t\t\t},\n\t\t\t\n\t\t\tgetHomeName: () => { return props.homeModule },\n\t\t},\n\t\t\n\t\tInput: {\n\t\t\tenable:() => {setScreenBlock(false)},\n\t\t\t\n\t\t\tdisable: (forTime) => {\n\t\t\t\tsetScreenBlock(true)\n\n\t\t\t\tif (forTime) {\n\t\t\t\t\tsetTimeout(() => setScreenBlock(false), forTime)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t\n\t\tPopup: {\n\t\t\topen: (PopupComponent) => {\n\t\t\t\tsetScreenBlock(true)\n\t\t\t\tsetTimeout(() => setScreenBlock(false), 400)\n\n\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\t\n\t\t\t\tconst newPopups = [...activePopups]\n\t\t\t\tnewPopups.push(PopupComponent)\n\t\t\t\tsetPopups(newPopups)\n\t\t\t\t\n\t\t\t\tsetTimeout(() => setPopupEffect(''), 0)\n\t\t\t},\n\n\t\t\tclose: () => {\n\t\t\t\t// if(activePopup.props.onClose){activePopup.props.onClose()}\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\t\n\t\t\t\tconst newPopups = [...activePopups]\n\t\t\t\tnewPopups.pop()\n\t\t\t\tsetTimeout(() => setPopups(newPopups), 100)\n\t\t\t\t\n\t\t\t\tif(!drawerIsOpen){setScreenEffect('')}\n\t\t\t},\n\t\t\t\n\t\t\tcloseAll: () => {\n\t\t\t\t// if(activePopup.props.onClose){activePopup.props.onClose()}\n\t\t\t\tsetPopupEffect('transparent')\n\n\t\t\t\tsetTimeout(() => setPopups([]), 100)\n\n\t\t\t\tif (!drawerIsOpen) { setScreenEffect('') }\n\t\t\t},\n\t\t},\n\t\t\n\t\tDrawer:{\n\t\t\topen: ()=>{ if(!drawerIsOpen){\n\t\t\t\tif(drawerExists){\n\t\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\t\tsetDrawerIsOpen(true)\n\t\t\t\t}\n\t\t\t}},\n\t\t\t\n\t\t\tclose: () => { if(drawerIsOpen){\n\t\t\t\tsetDrawerIsOpen(false)\n\t\t\t\tif(activePopups.length === 0){setScreenEffect('')}\n\t\t\t}},\n\t\t\t\n\t\t\tisOpen: drawerIsOpen,\n\t\t\t\n\t\t\tExists: drawerExists,\n\t\t\tsetExists: setDrawerExists,\n\t\t\t\n\t\t\tportalDestination: portalDestination,\n\t\t\tclassName: activePopups.length > 0 ? screenEffect : '',\n\t\t},\n\t\t\n\t\t//Internal variables for structuring the app\n\t\tLayout: {get: ()=>layout, set: setLayout},\n\t\t\n\t\tSettings: {\n\t\t\tsave: saveSettings,\n\t\t\t\n\t\t\tget: getSettings\n\t\t},\n\t\t\n\t\tio: props.io\n\t}\n\t\n\t//initial setup - theme and settings\n\tuseEffect(()=>{\n\t\tasync function applySavedTheme(){\n\t\t\t\n\t\t\tconst newTheme = await System.Settings.get('TouchPointAppTheme')\n\t\t\tif(newTheme){\n\t\t\t\tconst themeEngine = new SystemThemeEngine()\n\t\t\t\tthemeEngine.setTheme(newTheme)\n\t\t\t}\n\t\t}\n\t\t\n\t\tapplySavedTheme()\n\t},[])\n\t\n\t//Input blocker for clicks\n\tlet screenBlocker = null\n\tif(screenBlock){\n\t\tscreenBlocker = <div className=\"screenBlocker\" />\n\t\t\n\t} else screenBlocker = null\n\t\n\t//The App JSX itself\n\treturn (\n\t\t<div className={\"TouchPointApp \"}>\n\t\t\t<lockedContext.Provider value = {props.locked}>\n\t\t\t\t<systemContext.Provider value ={System}>\n\t\t\t\t\t\t<HashRouter>\n\t\t\t\t\t\t{screenBlocker}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div ref = {portalDestination}>\n\t\t\t\t\t\t\t{/* Portal Destination for App Drawer */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className={'screenEffect ' + screenEffect}>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<SystemModuleContainer \n\t\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\t\tlocked = {props.locked || moduleLock}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<SystemPopupHandler \n\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\tactivePopups = {activePopups}\n\t\t\t\t\t\t\tpopupEffect = {popupEffect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</HashRouter>\n\t\t\t\t</systemContext.Provider>\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nTouchPointApp.propTypes = {\n\tlocked: PropTypes.bool,\n\tmodules: PropTypes.object.isRequired,\n\thomeModule: PropTypes.string,\n\tio: PropTypes.any,\n\tonOpenModule: PropTypes.func,\n\tsaveSettings: PropTypes.func,\n\tgetSettings: PropTypes.func,\n}\n","import systemContext from '../Contexts/SystemContext'\nimport {useContext} from 'react'\n\n//Returns a refference to the System object - allowing modules to interact with the parent app\nexport default function useSystem() {\n\treturn useContext(systemContext)\n}","import {useEffect} from 'react'\nimport useSystem from './UseSystem'\n\n//Allows a system component (like the app-wide toolbar) to declare its presence, so the module container \n//can resize to fit around them\nexport default function usePresence(componentName, height, width) {\n\t\n\tconst {Layout} = useSystem()\n\t\n\tfunction refreshCSS(layoutSettings){\n\t\t\n\t\tlet heightCSS = 'calc(100%'\n\t\tlet widthCSS = 'calc(100%'\n\t\t\n\t\tObject.values(layoutSettings.heights).forEach((h)=>{\n\t\t\t\n\t\t\tif(h){\n\t\t\t\theightCSS = heightCSS + ' - ' + h\n\t\t\t}\n\t\t})\n\t\t\n\t\tObject.values(layoutSettings.widths).forEach((w)=>{\n\t\t\tif(w){\n\t\t\t\twidthCSS = widthCSS + ' - ' + w\n\t\t\t}\n\t\t})\n\t\t\n\t\tlayoutSettings.heightCSS = heightCSS + ')'\n\t\tlayoutSettings.widthCSS = widthCSS + ')'\n\t\t\n\t}\n\t\n\t\n\t\n\tuseEffect(() => {\n\t\t\n\t\tconst newLayout = {...Layout.get()}\n\t\tnewLayout.widths[componentName] = width\n\t\tnewLayout.heights[componentName] = height\n\n\t\trefreshCSS(newLayout)\n\t\tLayout.set(newLayout)\n\t\t\n\t\treturn ()=>{\n\t\t\tconst newLayout = { ...Layout.get() }\n\t\t\tnewLayout.widths[componentName] = 0\n\t\t\tnewLayout.heights[componentName] = 0\n\n\t\t\trefreshCSS(newLayout)\n\t\t\tLayout.set(newLayout)\n\t\t}\n\t\t\n\t},[])\n\t\t\n}","import React from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './AppToolbar.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport propTypes from 'prop-types'\n\nexport default function AppToolbar(props){\n\t\n\t//Declare itself to the app so the modules can be fit around it \n\tusePresence('TouchPointAppToolbar', 'var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppToolbar\" style = {props.style}>\n\t\t\t<div className=\"brandingContainer\">\n\t\t\t\t{props.label}\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className=\"buttonContainer flexY\">\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t)\n}\n\n//\nAppToolbar.propTypes={\n\tlabel: propTypes.any\n}\n","import React from 'react'\nimport './AppFooter.css'\nimport useSystem from '../../Hooks/UseSystem'\nimport usePresence from '../../Hooks/UsePresence'\n\nexport default function AppFooter(props) {\n\t\n\t//Declare itself to the app so the modules can be fit around it\n\tusePresence('TouchPointAppFooter','var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppFooter\" style = {props.style}>\n\t\t\t{props.children}\n\t\t</div>\n\t)\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './CoreButton.css'\n\n\nexport default function CoreButton(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction clickHandler(e){\n\t\tif(!locked && props.onClick !== undefined){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tif(!props.hidden){return (\n\t\t\n\t\t<button className={'CoreButton ' + lockedClass + ' ' + props.className}\n\t\t\tonClick ={clickHandler}\n\t\t\tstyle = {props.style}\n\t\t\tonBlur = {props.onBlur}\n\t\t\ttype={props.type}\n\t\t>\n\t\t\t{props.children}\n\t\t</button>\n\t\t\n\t)} else{return null}\n}\n\n//Proptypes\nCoreButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonBlur: PropTypes.func,\n\ttype: PropTypes.string,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from './CoreButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faTimes} from \"@fortawesome/free-solid-svg-icons\";\nimport './CloseButton.css'\n\n\nexport default function CloseButton(props) {\n\t\n\treturn (\n\t\t<CoreButton \n\t\t\tclassName = 'CloseButton'\n\t\t\tonClick = {props.onClick}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tstyle = {props.style}\n\t\t>\n\t\t\t<FontAwesomeIcon icon={faTimes}/>\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nCloseButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n\n\n","import React, {useEffect, useState, useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './AppDrawer.css'\nimport CloseButton from '../Inputs/CloseButton'\nimport PropTypes from 'prop-types'\nimport useSystem from '../../Hooks/UseSystem'\nimport ReactDOM from 'react-dom'\n\nexport default function AppDrawer(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst {Drawer} = useSystem()\n\t\n\tconst trueLeft = props.style && props.style.width ? props.style.width : 'var(--drawerWidth)'\n\tconst [drawerLeft, setDrawerLeft] = useState(!Drawer.isOpen ? 'calc( ' + trueLeft + ' * -1 )' : null)\n\t\n\tuseEffect(()=>{\n\t\tsetDrawerLeft(!Drawer.isOpen ? 'calc( ' + trueLeft + ' * -1 )' : null)\n\t},[Drawer.isOpen])\n\t\n\tuseEffect(()=>{\n\t\tDrawer.setExists(true)\n\t\t\n\t\treturn ()=>Drawer.setExists(false)\n\t},[])\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e) {\n\t\tif (e.target.classList.contains('SystemDrawerHandler')) {\n\t\t\tDrawer.close()\n\t\t}\n\t}\n\t\n\tconst handlerClass = Drawer.isOpen ? 'SystemDrawerHandler' : ''\n\t\n\tif (Drawer.portalDestination.current){ return ( \n\t\tReactDOM.createPortal(\n\t\t\t<div className={handlerClass} onClick = {clickBackdrop}>\n\t\t\t\t<lockedContext.Provider value={locked}>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={'AppDrawer ' + Drawer.className} \n\t\t\t\t\t\tstyle={{...props.style, left: drawerLeft, opacity: '93%'}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"drawerContainer\" style={props.innerStyle}>\n\t\t\t\t\t\t\t<div className='scroller'>\n\t\t\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tdisplay: Drawer.isOpen ? null : 'none'\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<h1>{props.title}</h1>\n\t\t\t\t\t\t\t\t\t<CloseButton\n\t\t\t\t\t\t\t\t\t\tlocked={false}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tDrawer.close()\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div id='TouchPointDrawerContainer'>\n\t\t\t\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t</div>, Drawer.portalDestination.current)\n\t\t\n\t)} else return null\n\n\t\t\n\n}\n\n\nAppDrawer.propTypes = {\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n}","import React from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\n\nimport './FreeButton.css'\n\nexport default function FreeButton(props) {\n\t\n\tlet purpose = 'neutral '\n\tlet wideClass = ''\n\tif (props.purpose){purpose = props.purpose.toLowerCase()}\n\tif (props.wide){wideClass = 'wide '}\n\t\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tlocked={props.locked}\n\t\t\tonClick ={props.onClick}\n\t\t\thidden={props.hidden}\n\t\t\tclassName = {\"FreeButton \" + purpose + ' ' + wideClass + ' ' + props.className}\n\t\t\tstyle = {props.style}\n\t\t\ttype={props.type}\n\t\t>\n\t\t\t{props.children}\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nFreeButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tpurpose: PropTypes.string,\n\twide: PropTypes.bool,\n\tstyle: PropTypes.object,\n\ttype: PropTypes.string,\n}","import React, {useState} from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\nimport './ConfirmButton.css'\n\nexport default function ConfirmButton(props) {\n\t\n\tconst [expanded, setExpanded] = useState(false)\n\t\n\tfunction clickHandler(e){\n\t\tif(expanded){\n\t\t\tif(props.onClick){props.onClick(e)}\n\t\t\tsetExpanded(false)\n\t\t} else{\n\t\t\te.stopPropagation()\n\t\t\tsetExpanded(true)\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\tfunction blurHandler(){\n\t\tsetExpanded(false)\n\t}\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tclassName = {props.className + ' ConfirmButton ' + \n\t\t\t\t(expanded ? ' expanded ' : '') + props.purpose\n\t\t\t}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tonClick = {clickHandler}\n\t\t\tstyle = {props.style}\n\t\t\tonBlur = {blurHandler}\n\t\t>\n\t\t\t{expanded ? props.expandedContent : props.content}\n\t\t</CoreButton>\n\t)\n}\n\n\n\n//\nConfirmButton.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n\texpandedStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tcontent: PropTypes.any,\n\texpandedContent: PropTypes.any,\n\tpurpose: PropTypes.string,\n}","import React, {useContext} from 'react'\nimport './Tile.css'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\nexport default function Tile(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tfunction clickHandler(){\n\t\tif(!locked && props.onClick){\n\t\t\tprops.onClick()\n\t\t}\n\t}\n\t\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\t\n\tconst notificationBadge = props.notifications && !locked ?\n\t<span className='notifications'>{notifications}</span>\n\t: null\n\t\n\treturn (\n\t\t<div style={props.style} className={'Tile' + (locked ? ' locked ' : '')}>\n\t\t\t<div style = {props.innserStyle} className={'TileContainer '} onClick = {clickHandler}> \n\t\t\t\t{notificationBadge}\n\t\t\t\t<div className='logo flexCenter'>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div> \n\t\t\t\t\n\t\t\t\t<div className=\"title\">{props.title}</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\t\n}\n\n//Proptypes\nTile.propTypes = {\n\tlocked: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\nexport default function TextBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\tfunction blurHandler(e){\n\t\tif(!locked && props.onBlur){\n\t\t\tprops.onBlur(e)\n\t\t} \n\t}\n\t\n\t//For the onEnter event\n\tfunction keyPressHandler(e){\n\t\tif(!locked && e.key === 'Enter' && props.onEnter !==undefined){\n\t\t\tprops.onEnter(e)\n\t\t} \n\t}\n\t\n\treturn (\n\t\t<input \n\t\t\ttype={props.type ? props.type : \"text\"}\n\t\t\tclassName={\"input TextBox \" + lockedClass + ' ' + props.className}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tonKeyPress={keyPressHandler}\n\t\t\tplaceholder = {props.placeholder}\n\t\t\tonBlur = {blurHandler}\n\t\t\tref = {props.inputRef}\n\t\t\tautoFocus = {props.autoFocus}\n\t\t\tstyle = {props.style}\n\t\t\tvalue = {props.value}\n\t\t/>\n\t)\n}\n\n//Proptypes\nTextBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\tvalue: PropTypes.string,\n\tinputRef: PropTypes.object,\n\tautoFocus: PropTypes.bool,\n\tvalue: PropTypes.string,\n\tonEscape: PropTypes.func,\n\ttype: PropTypes.string,\n}\n\n","import { useContext } from 'react'\nimport moduleContext from '../Contexts/ModuleContext'\n\nexport default function useModuleContext(){\n\tconst [dataSource, setDataSource] = useContext(moduleContext)\n\t\n\treturn({\n\t\tget: (key) => {return dataSource[key]},\n\t\t\n\t\tset: (key, value) => {\n\t\t\tconst newSource = {...dataSource}\n\t\t\tnewSource[key] = value\n\t\t\tsetDataSource(newSource)\n\t\t},\n\t\t\n\t\tclear: () => {setDataSource( {} )}\n\t})\n}","import React, {useState, useRef, useEffect} from 'react'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport TextBox from './TextBox'\nimport PropTypes from 'prop-types'\nimport './SearchBar.css'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimesCircle} from \"@fortawesome/free-solid-svg-icons\"\n\nexport default function SearchBar(props) {\n\t\n\t\n\tconst moduleData = useModuleData()\n\tconst [searchFunction, setSearchFunction] = useState()\n\tconst searchRef = useRef()\n\tconst [searchBarValue, setSearchBarValue] = useState('')\n\t\n\tconst searchContext = moduleData.get('TouchPointSearchText')\n\t\n\t\n\tfunction focusSearchBar(){\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//ctrl f handler\n\tfunction keyDownHandler(e) {\n\t\tconst isCtrl = e.ctrlKey || e.metaKey\n\n\t\tif (isCtrl && e.keyCode === 70) {\n\t\t\te.preventDefault()\n\t\t\tfocusSearchBar()\n\t\t}\n\t}\n\t\n\t\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', keyDownHandler)\n\n\t\treturn (() => {\n\t\t\tmoduleData.clear()\n\t\t\twindow.removeEventListener('keydown', keyDownHandler)\n\t\t})\n\n\t}, [])\n\t\n\tuseEffect(()=>{\n\t\tsetSearchBarValue(searchContext)\n\t}, [searchContext])\n\t\n\t\n\t//search\n\tfunction searchHandler(){\n\t\tmoduleData.set('TouchPointSearchText', searchRef.current.value)\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t//clear\n\tfunction clearHandler() {\n\t\tmoduleData.set('TouchPointSearchText', '')\n\t\tsetSearchBarValue('')\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e) {\n\t\tclearTimeout(searchFunction)\n\t\t\n\t\tsetSearchBarValue(e.target.value)\n\n\t\tsetSearchFunction(setTimeout(() => {\n\t\t\tsearchHandler()\n\t\t}, 250))\n\t\t\n\t\tif(props.onChange){\n\t\t\tprops.onChange(e.target.value)\n\t\t}\n\t}\n\t\n\t\n\treturn(\n\t\t<span className=\"SearchBar\"> \n\t\t\t<TextBox \n\t\t\t\tlocked = {false}\n\t\t\t\tonChange= {changeHandler}\n\t\t\t\tonEnter = {searchHandler}\n\t\t\t\tplaceholder = \"Search\"\n\t\t\t\tvalue = {searchBarValue}\n\t\t\t\tinputRef = {searchRef}\n\t\t\t\tstyle = {props.style}\n\t\t\t/>\n\t\t\t\n\t\t\t{searchBarValue ? <button className=\"searchButton\"\n\t\t\t\tonClick = {clearHandler}\n\t\t\t>\n\t\t\t\t<FontAwesomeIcon icon={faTimesCircle} />\n\t\t\t</button> : null}\n\t\t</span>\n\t)\n}\n\n\n//Proptypes\nSearchBar.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonChange: PropTypes.func,\n}\n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by RadioGroup to connect all the radio buttons below\nconst radioContext = createContext({})\nexport default radioContext ","import React, { useContext, useState } from 'react'\nimport PropTypes from 'prop-types';\nimport lockedContext from '../../Contexts/LockedContext'\nimport radioContext from '../../Contexts/RadioContext'\nimport {v4 as uuid} from 'uuid'\n\n\nexport default function RadioGroup(props) {\n\t\n\t//decides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\tconst [groupName] = useState(uuid)\n\t\n\tfunction onChange(value){\n\t\tif(props.onChange){\n\t\t\tprops.onChange(value, props.groupID)\n\t\t}\n\t}\n\t\n\tconst radioData = {\n\t\tonChange: onChange,\n\t\tgroupName: groupName,\n\t\tlocked: locked,\n\t\tdefaultValue: props.defaultValue,\n\t\tvalue: props.value,\n\t}\n\t\n\treturn (\n\t\t<radioContext.Provider value={radioData}>\n\t\t\t{props.children}\n\t\t</radioContext.Provider>\n\t)\n}\n\n//Proptypes\nRadioGroup.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tgroupID: PropTypes.any,\n\tvalue: PropTypes.any,\n}\n\n","import React, {useContext, useState} from 'react'\nimport radioContext from '../../Contexts/RadioContext'\nimport PropTypes from 'prop-types'\nimport './RadioButton.css'\nimport {v4 as uuid} from 'uuid'\n\nexport default function RadioButton(props) {\n\t\n\tconst radioData = useContext(radioContext)\n\tconst [id] = useState(uuid)\n\t\n\tif(!radioData.onChange){\n\t\tconsole.error('Radio Buttons need to be inside a RadioGroup component.')\n\t}\n\t\n\tlet lockedClass = ''\n\tif (radioData.locked) { lockedClass = 'locked ' }\n\n\t//handles the clicking of the radio button - for locked radio buttons\n\tfunction clickHandler(e) {\n\t\tif (radioData.locked) {\n\t\t\te.preventDefault()\n\t\t\t\n\t\t} else{\n\t\t\tradioData.onChange(props.value)\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<span className={\"RadioButton flexY \" + lockedClass} style={props.style}>\n\t\t\t\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={radioData.value !== undefined ? undefined : radioData.defaultValue === props.value}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tname = {radioData.groupName}\n\t\t\t\tvalue = {props.value}\n\t\t\t\tstyle={props.buttonStyle}\n\t\t\t\tid = {id}\n\t\t\t\tchecked = {radioData.value !== undefined ? (radioData.value === props.value) : undefined}\n\t\t\t\treadOnly={radioData.value !== undefined}\n\t\t\t/>\n\t\t\t<label \n\t\t\t\tclassName = {lockedClass}\n\t\t\t\thtmlFor = {id}\n\t\t\t\tstyle={props.labelStyle}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{props.labelValue}\n\t\t\t</label>\n\t\t\t\n\t\t</span>\n\t)\n}\n\nRadioButton.propTypes = {\n\tvalue: PropTypes.any,\n\tstyle: PropTypes.object,\n\tlabelStyle: PropTypes.object,\n\tbuttonStyle: PropTypes.object,\n}","import React, {useContext, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport './ControlBar.css'\nimport SearchBar from './SearchBar'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function ControlBar(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t\n\tif(props.searchBar){\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\" style = {props.style}>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"searchContainer\">\n\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"buttonContainer flexY\" >{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\t\n\t\t)\n\t\t\n\t} else{\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\" style={props.style}>\n\t\t\t\t\t<div className=\"buttonContainer\">{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\n\t\t)\n\t}\n}\n\n//Proptypes\nControlBar.propTypes = {\n\tsearchBar: PropTypes.bool,\n\tsearchBarProps: PropTypes.object,\n\tlocked: PropTypes.bool, \n\tstyle: PropTypes.object,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './CommentBox.css'\n\nexport default function CommentBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\tfunction blurHandler(e){\n\t\tif(!locked && props.onBlur){\n\t\t\tprops.onBlur(e)\n\t\t} \n\t}\n\t\n\treturn (\n\t\t<textarea\n\t\t\tclassName={\"input CommentBox \" + lockedClass}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tplaceholder={props.placeholder}\n\t\t\tonBlur = {blurHandler}\n\t\t\tstyle = {props.style}\n\t\t\tvalue={props.value}\n\t\t></textarea>\n\t)\n}\n\n//Proptypes\nCommentBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\theight: PropTypes.string,\n\twidth: PropTypes.string,\n\tvalue: PropTypes.string,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './ComboBox.css'\nimport PropTypes from 'prop-types'\n\nexport default function ComboBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//if its locked, only allow the default option\n\tlet kids = props.children\n\tif(locked){\n\t\tkids = <option>{props.defaultValue}</option>\n\t}\n\t\n\t//If it's hidden, don't render anything\n\tif (props.hidden){return null} else{return(\n\t\t\t<select \n\t\t\t\tclassName={\"ComboBox input \" + lockedClass} \n\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tdisabled = {locked}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tvalue = {props.value}\n\t\t\t>\n\t\t\t\t{kids}\n\t\t\t</select>\n\t)}\n}\n\n//\nComboBox.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tvalue: PropTypes.string,\n\tdefaultValue: PropTypes.string,\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\n\nexport default function CheckBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//handles the clicking of the checkbox - for locked checkboxes\n\tfunction clickHandler(e){\n\t\tif(locked){\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<label className=\"CheckBox flexY\">\n\t\t\t<input \n\t\t\t\ttype=\"checkbox\" \n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={props.defaultValue}\n\t\t\t\tonChange={changeHandler}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tchecked = {props.checked}\n\t\t\t\treadOnly={props.checked !== undefined ? true : false}\n\t\t\t/>\n\t\t\t<span className=\"checkmark\"></span>\n\t\t\t{props.label}\n\t\t</label>\n\t)\n}\n\nCheckBox.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tdefaultValue: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tchecked: PropTypes.bool,\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//used by dropdown menus to talk to items inside of themselves \nconst menuContext = createContext({})\nexport default menuContext \n","import React, {useContext, useState} from 'react'\nimport ReactDOM from 'react-dom'\nimport lockedContext from '../../Contexts/LockedContext'\nimport menuContext from '../../Contexts/MenuContext'\nimport PropTypes from 'prop-types'\nimport './MenuButton.css'\nimport {Dropdown} from 'react-bootstrap'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faCaretRight} from '@fortawesome/free-solid-svg-icons'\n\nconst dropMenu = React.forwardRef(\n\t(props, ref) => {\n\t\treturn (\n\t\t\t<menuContext.Provider value={{submenu: true}}>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={props.className + ' Menu ' + props.menuClass}\n\t\t\t\t\tstyle={{...props.style, ...props.menuStyle}}\n\t\t\t\t\tonClick={props.onClickBody}\n\t\t\t\t>\n\t\t\t\t\t{typeof (props.MenuContent) == 'function' ? <props.MenuContent /> : props.MenuContent}\n\t\t\t\t</div>\n\t\t\t</menuContext.Provider>\n\t\t)\n\t}\n)\n\nexport default function MenuButton(props){\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tlet lockedClass\n\tif(locked){lockedClass = 'locked'}\n\t\n\tconst [toggling, setToggling] = useState(false)\n\t\n\t//handles both onOpen and onClose\n\tfunction toggleHandler(isOpen){\n\t\t\n\t\tif(!toggling && isOpen && props.onOpen){\n\t\t\tprops.onOpen()\n\t\t\t\n\t\t} else if(!toggling && props.onClose && !isOpen){\n\t\t\tprops.onClose()\n\t\t\tsetToggling(true)\n\t\t}\n\t\t\n\t\t//Prevent spamming\n\t\tsetTimeout(()=>setToggling(false), 300)\n\t}\n\t\n\t//check if it's inside of another menu, if so render as a submenu\n\tconst parentMenuData = useContext(menuContext)\n\tconst icon = parentMenuData.submenu ? <span className='subMenuIcon'>\n\t\t\t<FontAwesomeIcon icon={faCaretRight} />\n\t</span> : null\n\n\t\n\tlet direction = props.direction\n\tif(parentMenuData.submenu){\n\t\tdirection = 'right'\n\t}\n\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\tconst notificationBadge = props.notifications && !locked ?\n\t\t<span className='notifications' style={props.notificationStyle}>{notifications}</span>\n\t\t: null\n\t\n\t//button\n\tconst dropButton = React.forwardRef(({onClick}, ref)=> { \n\t\t\n\t\tfunction clickHandler(e){\n\t\t\te.preventDefault() \n\t\t\tonClick(e)\n\t\t}\n\t\t\n\t\treturn( \n\t\t\t<button \n\t\t\t\tclassName={'MenuButton '+ props.className + ' ' + lockedClass}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tref={ref}\n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t{notificationBadge}\n\t\t\t\t{props.children}\n\t\t\t\t{icon}\n\t\t\t\t\n\t\t\t</button>\n\t\t)\n\t})\n\t\n\t//Prevent submenus from sticking around after their parent has closed\n\tfunction onClickBody(){\n\t\tif(parentMenuData.submenu){\n\t\t\tdocument.body.click()\n\t\t}\n\t}\n\t\n\tif(props.hidden){return null}\n\t\n\t//If locked return a button that does nothing, otherwise create a real dropdown button\n\tif(locked){\n\t\t\n\t\treturn (<button\n\t\t\t\tclassName={'MenuButton ' + props.className + ' ' + lockedClass}\n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t\n\t\t\t{props.children}\n\t\t\t{icon}\n\n\t\t</button>)\n\t\t\n\t}\n\t\n\treturn(\n\t\t\n\t\t<span className = 'menuButtonContainer'>\n\t\t\t<Dropdown drop={direction} onToggle = {toggleHandler}>\n\t\t\t\t\n\t\t\t\t<Dropdown.Toggle as={dropButton}/>\n\t\t\t\t\n\t\t\t\t{ReactDOM.createPortal(<Dropdown.Menu \n\t\t\t\t\tas={dropMenu}\n\t\t\t\t\tMenuContent = {props.menuContent}\n\t\t\t\t\tmenuStyle = {props.menuStyle}\n\t\t\t\t\tonClickBody = {onClickBody}\n\t\t\t\t/>, document.body)}\n\t\t\t\t\n\t\t\t</Dropdown>\n\t\t</span>\n\t\t\n\t)\n}\n\n//Proptypes\nMenuButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tmenuContent: PropTypes.any.isRequired,\n\tmaxHeight: PropTypes.string,\n\tdirection: PropTypes.string,\n\tonOpen: PropTypes.func,\n\tonClose: PropTypes.func,\n\tmenuStyle: PropTypes.object,\n\tstyle: PropTypes.object,\n\tnotificationStyle: PropTypes.object,\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from '../Inputs/CoreButton'\nimport MenuButton from '../Display/MenuButton'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport './DockIcon.css'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function DockIcon(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst icon = props.faIcon ? <FontAwesomeIcon icon = {props.faIcon} /> : null\n\t\n\tconst iconStyle = {\n\t\tfontSize: props.title ? '17pt' : '20pt'\n\t}\n\t\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\t\n\tconst notificationBadge = props.notifications && !locked ? \n\t<span className='notifications'>{notifications}</span> \n\t: null\n\t\n\tif(props.hidden){return null}\n\t\n\tif(props.menuContent){return(\n\t\t<MenuButton\n\t\t\tclassName='DockIcon'\n\t\t\tstyle={props.style}\n\t\t\tlocked={props.locked}\n\t\t\tonOpen={props.onClick}\n\t\t\tmenuContent={props.menuContent}\n\t\t\tdirection='left'\n\t\t\tmenuStyle={props.menuStyle}\n\t\t>\n\t\t\t{notificationBadge}\n\t\t\t<div className='pic' style={iconStyle}>{icon}{props.children}</div>\n\t\t\t<div className='title'>{props.title}</div>\n\t\t</MenuButton>\n\t)}\n\t\n\treturn (\n\t\t<CoreButton \n\t\t\tclassName = 'DockIcon' \n\t\t\tstyle = {props.style} \n\t\t\tlocked = {props.locked}\n\t\t\tonClick = {props.onClick}\n\t\t>\n\t\t\t{notificationBadge}\n\t\t\t<div className='pic' style = {iconStyle}>{icon}{props.children}</div>\n\t\t\t<div className='title'>{props.title}</div>\n\t\t</CoreButton>\n\t)\n}\n\n//proptypes\nDockIcon.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tfaIcon: PropTypes.object,\n\tstyle: PropTypes.object,\n\tnotifications: PropTypes.number,\n\tonClick: PropTypes.func,\n\tmenuContent: PropTypes.any,\n\tmenuStyle: PropTypes.object,\n}\n\n","import React, {useContext} from 'react'\nimport './InfoCard.css'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport CloseButton from '../Inputs/CloseButton'\n\nexport default function InfoCard(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t//Assign classes based on props \n\tlet stripe = ''\n\tconst hasStripe = props.stripe || props.stripeColor\n\tif(hasStripe && !props.titleBar){stripe = 'stripe'}\n\t\n\t//Adds hover and click effects\n\tconst dynamic = !locked && props.onClick ? 'dynamicX' : ''\n\t\n\t//handles the onClick event. Only fires if the component is not locked\n\tfunction clickHandler(e){\n\t\tif(!locked && props.onClick !== undefined){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tfunction closeHandler(e){\n\t\te.stopPropagation()\n\t\tprops.onClose()\n\t}\n\t\n\t//If a title prop is provided, create an H1\n\tlet titleBar\n\tif(props.title){\n\t\ttitleBar = <h1\n\t\t\tstyle={{color: props.stripeColor}}\n\t\t>{props.title}</h1>\n\t}\n\t\n\tlet closeButton\n\tif(props.onClose){\n\t\tcloseButton = <CloseButton onClick = {closeHandler}></CloseButton>\n\t}\n\t\n\tconst stripeStyle = props.stripeColor ? {\n\t\tborderLeftColor: props.stripeColor \n\t} : undefined\n\t\t\n\t//if 'hidden' prop is true then dont show the component\n\tif(props.hidden){return null} else{\n\t\t\n\t\treturn (\n\t\t\t<div \n\t\t\t\tclassName={\"InfoCard \" + dynamic + ' ' + props.className} \n\t\t\t\tonClick = {clickHandler} \n\t\t\t\tstyle = {props.style}\n\t\t\t>\n\t\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"cardContainer\" style = {props.innerStyle}>\t\n\t\t\t\t\t\t<div className={\"textBox \" + stripe} style = {stripeStyle}>\n\t\t\t\t\t\t\t{closeButton}\n\t\t\t\t\t\t\t{titleBar}\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n//Proptypes\nInfoCard.propTypes = {\n\ttitle: PropTypes.string,\n\tstripe: PropTypes.bool,\n\tdynamicX: PropTypes.bool,\n\tdynamicY: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tclassName: PropTypes.string,\n\tonClose: PropTypes.func,\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n\tstripeColor: PropTypes.string,\n}","import React, {useContext, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\nimport InfoCard from '../Containers/InfoCard'\nimport './PopupCard.css'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function PopupCard(props) {\n\tconst system = useSystem()\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\t//Clicking the background closes the popup\n\tlet handleCloseButton\n\tif(!props.forceOpen){\n\t\thandleCloseButton = () => {\n\t\t\tif(!props.forceOpen){\n\t\t\t\tsystem.Popup.close()\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tuseEffect(()=>{\n\t\tif(props.onOpen){ props.onOpen() }\n\t\t\n\t\treturn(()=>{\n\t\t\tif(props.onClose){ props.onClose() }\n\t\t})\n\t\t\n\t},[])\n\t\n\t\n\tconst content = <lockedContext.Provider value={locked}>\n\t\t\n\t\t\t<InfoCard\n\t\t\t\tclassName={'PopupCard '}\n\t\t\t\tstripe\n\t\t\t\ttitle={props.title}\n\t\t\t\tonClose={handleCloseButton}\n\t\t\t\tstyle={{ height: 'auto', ...props.style }}\n\t\t\t\tinnerStyle={{ borderColor: props.stripeColor, ...props.innerStyle }}\n\t\t\t\tstripeColor={props.stripeColor}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</InfoCard>\n\t</lockedContext.Provider>\n\t\n\tif(props.forceOpen){return (<div className={'popupBlockClicks'}>{content}</div>)}\n\treturn content\n}\n\n//Proptypes\nPopupCard.propTypes = {\n\ttitle: PropTypes.string,\n\tonClose: PropTypes.func,\n\tonOpen: PropTypes.func,\n\tforceOpen: PropTypes.bool,\n\twidth: PropTypes.string,\n\theight: PropTypes.string,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n}","import React, {useState, useEffect, useRef} from 'react'\nimport './InputCell.css'\n\nexport default function InputCell(props) {\n\t\n\tconst [initalValue, setInitialValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\t// Update the value if the data is changed by an outside source\n\tuseEffect(() => {\n\t\tconst newVal = props.dataRow[props.header.headerID] ? props.dataRow[props.header.headerID] : ''\n\t\tsetCurrentValue(props.header.format(newVal))\n\t\tsetInitialValue(newVal)\n\t\t\n\t}, [ props.dataRow[props.header.headerID] ])\n\t\n\t//When you focus on an item, the value is saved. if you escape, its restored\n\tfunction focusHandler(e){\n\t\tsetInitialValue(e.target.value)\n\t}\n\t\n\t//Chaches the value and updates the dataset when you're done editing\n\tfunction changeHandler(e){\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\tconst escRef = useRef(false)\n\t\n\t//Handles keypresses, for enter or esc keys\n\tfunction keyHandler(e){\n\t\tif(e.keyCode === 27) { //esc\n\t\t\tsetCurrentValue(initalValue)\n\t\t\tescRef.current = true\n\t\t\te.target.blur()\n\t\t} else if(e.keyCode === 13){ //enter\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction flashRed(){\n\t\tsetValidClass('invalid')\n\t\tsetTimeout(()=>setValidClass(''), 200)\n\t}\n\t\n\tfunction flashGreen() {\n\t\tsetValidClass('valid')\n\t\tsetTimeout(() => setValidClass(''), 0)\n\t}\n\t\n\t//Check if the input is valid and commit\n\tasync function commitChanges(){\n\t\t\n\t\tif(escRef.current){\n\t\t\tescRef.current = false\n\t\t\treturn\n\t\t}\n\t\t\n\t\tconst override = {value: false, newRow: {}}\n\t\t\n\t\tfunction customSetRow(newRow){\n\t\t\tprops.setRow(newRow)\n\t\t\toverride.value = true\n\t\t\toverride.newRow = newRow\n\t\t}\n\t\t\n\t\ttry{\n\t\t\tif (props.header.compare(props.dataRow[props.header.headerID], currentValue)) { return }\n\t\t\tconst newData = JSON.parse(JSON.stringify([...props.dataset.read()]))\n\t\t\tconst newCellValue = props.header.parse(currentValue)\n\t\t\t\n\t\t\tnewData[props.rowIndex][props.header.headerID] = newCellValue\n\t\t\t\n\t\t\tconst res = await props.header.onEdit({\n\t\t\t\tcellValue: currentValue, \n\t\t\t\trow: newData[props.rowIndex], \n\t\t\t\toldCellValue: initalValue, \n\t\t\t\toldRow: props.dataset.read()[props.rowIndex],\n\t\t\t\tsetRow: customSetRow,\n\t\t\t})\n\t\t\t\n\t\t\tif(res || res === undefined){\n\t\t\t\tif(override.value){\n\t\t\t\t\tsetCurrentValue(props.header.format(override.newRow[props.header.headerID]))\n\t\t\t\t} else{\n\t\t\t\t\tprops.dataset.set(newData)\n\t\t\t\t\tsetCurrentValue(props.header.format(currentValue))\n\t\t\t\t}\n\t\t\t\tflashGreen()\n\t\t\t} else{\n\t\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\t\tflashRed()\n\t\t\t}\n\t\t\t\n\t\t} catch (err){\n\t\t\tconsole.error(err)\n\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\tflashRed()\n\t\t}\n\t\t\n\t}\n\t\n\treturn(<input\n\t\ttype = 'text'\n\t\tclassName = {'InputCell input ' + validClass}\n\t\tonKeyDown = {keyHandler}\n\t\tonFocus = {focusHandler}\n\t\tonBlur = {commitChanges}\n\t\tvalue = {currentValue}\n\t\tonChange = {changeHandler}\n\t/>)\n}","import React, {useEffect, useState} from 'react'\nimport './MainTableRow.css'\nimport InputCell from './InputCell'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons'\n\nexport default function MainTableRow(props) {\n\t\n\tconst activeClass = \n\tprops.dataset.getActiveRecord \n\t&& props.dataset.getActiveRecord()[props.dataset.primaryKey] === props.dataRow[props.dataset.primaryKey]\n\t&& !props.noActive\n\t? ' active '\n\t: ''\n\t\n\tfunction rowClickHandler(){\n\t\tif(!props.noActive){\n\t\t\tprops.dataset.selectRecord( props.dataRow[props.dataset.primaryKey])\n\t\t}\n\t}\n\t\n\t//Allow nested components and onClicks to update their dataRow\n\tfunction setRow(newRow) {\n\t\tconst newData = [...props.dataset.read()]\n\t\tnewData[props.rowIndex] = newRow\n\t\tprops.dataset.set(newData)\n\t}\n\t\n\tconst rowContent = props.dataHeaders.map((hdr, i) => {\n\t\tif(hdr.visible || hdr.required){\n\t\t\t\n\t\t\tfunction cellClickHandler(){\n\t\t\t\tif(hdr.onClick && !hdr.locked && !props.locked){\n\t\t\t\t\thdr.onClick({\n\t\t\t\t\t\tcellValue: props.dataRow[hdr.headerID],\n\t\t\t\t\t\trow: props.dataRow,\n\t\t\t\t\t\tsetRow: setRow,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//Decide if the cell is editable or not based on the locked status, and the header onEdit function\n\t\t\tlet cellContent\n\t\t\tlet cellClass = hdr.onClick && !props.locked ? ' clickable plain tableCell ' : ' plain tableCell'\n\t\t\tconst cellText = hdr.format(props.dataRow[hdr.headerID])\n\t\t\t\n\t\t\tif(!props.locked && hdr.onEdit && !hdr.locked){\n\t\t\t\t\n\t\t\t\tcellContent = <InputCell \n\t\t\t\t\theader = {hdr}\n\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\trowIndex = {props.rowIndex}\n\t\t\t\t\tdataset = {props.dataset}\n\t\t\t\t\tsetRow = {setRow}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\tcellClass = cellClass + ' inputWrapper ' \n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tcellContent = cellText\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(hdr.component){ //custom component cells\n\t\t\t\treturn (<span\n\t\t\t\t\tkey={hdr.headerID + props.rowKey}\n\t\t\t\t\tstyle={{ width: hdr.width + 'px' }}\n\t\t\t\t\tclassName={'tableCell componentCell'}\n\t\t\t\t>\n\t\t\t\t\t<hdr.component\n\t\t\t\t\t\trow={props.dataRow}\n\t\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\t\t{...hdr.props}\n\t\t\t\t\t/>\n\t\t\t\t</span>)\n\t\t\t\t\n\t\t\t}else if (!hdr.styling){ //No conditional formatting\n\t\t\t\treturn(<span \n\t\t\t\t\tkey = {hdr.headerID + props.rowKey} \n\t\t\t\t\tstyle = {{width: hdr.width + 'px'}}\n\t\t\t\t\tclassName = {cellClass}\n\t\t\t\t\ttitle={cellText}\n\t\t\t\t\tonClick = {cellClickHandler}\n\t\t\t\t>\n\t\t\t\t\t{cellContent}\n\t\t\t\t</span>)\n\t\t\t\n\t\t\t} else{ //with coniditional formatting\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tconst myStyle = hdr.styling(props.dataRow[hdr.headerID], props.dataRow)\n\t\t\t\t\n\t\t\t\treturn( \n\t\t\t\t\t<span \n\t\t\t\t\t\tclassName = {'badge ' + cellClass}\n\t\t\t\t\t\tkey = {hdr.headerID + props.rowKey + i} \n\t\t\t\t\t\tonClick={cellClickHandler}\n\t\t\t\t\t\tstyle = {{\n\t\t\t\t\t\t\twidth: 'calc(' + hdr.width + 'px - 23px)',\n\t\t\t\t\t\t\t...myStyle,\n\t\t\t\t\t\t\tmarginLeft: '23px'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t</span>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t})\n\t\n\t//Nested rows\n\tconst [expanded, setExpanded] = useState(false)\n\tconst expandedClass = expanded ? ' expanded ' : ''\n\t\n\tfunction expandHandler(e){\n\t\t//don't set the active row when collapsing \n\t\tif (expanded) { e.stopPropagation()}\n\t\tsetExpanded(!expanded)\n\t}\n\t\n\t//Listeners to expand all and collapse all events from the parent maintable\n\tuseEffect(()=>{\n\t\tsetExpanded(true)\n\t},[props.expandTrigger])\n\t\n\tuseEffect(() => {\n\t\tsetExpanded(false)\n\t}, [props.collapseTrigger])\n\t\n\tconst expandIcon = props.nestedComponent ? <span className='expandButton' onClick={expandHandler}>\n\t\t{expanded ? <FontAwesomeIcon icon={faMinus} /> : <FontAwesomeIcon icon={faPlus} />}\n\t</span> : null\n\t\n\treturn(\n\t\t<div\n\t\t\tclassName={'MainTableRow ' + expandedClass} \n\t\t\tonClick = {rowClickHandler}\n\t\t>\n\t\t\t<div className={'topRow' + activeClass}>\n\t\t\t\t{expandIcon}\n\t\t\t\t{rowContent}\n\t\t\t</div>\n\t\t\t\n\t\t\t{expanded && props.nestedComponent ? <div \n\t\t\t\tclassName = 'componentWrapper'\n\t\t\t>\n\t\t\t\t<div style={props.nestedProps && props.nestedProps.fitToWidth ? {width: props.tableRef.current ? 'calc(' + props.tableRef.current.clientWidth + 'px - 48px)' : null} : undefined}>\n\t\t\t\t\t<props.nestedComponent\n\t\t\t\t\t\t{...props.nestedProps}\n\t\t\t\t\t\trow = {props.dataRow}\n\t\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\t\tsetRow = {setRow}\n\t\t\t\t\t\trowIndex={props.rowIndex}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div> : null}\n\t\t\t\n\t\t</div>\n\t)\n}","import React from 'react'\n\nexport default function FilterMenu(props){\n\n\tconst values = props.header.uniqueValues\n\t\n\tfunction clickHandler(e, id){\n\t\tconst cb = document.getElementById(id)\n\t\tif(e.target !== cb){cb.checked = !cb.checked}\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\tnewHeaders[props.header.index].uniqueValues[cb.value] = cb.checked\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction selectAll(e){\n\t\tconst cb = document.getElementById(props.header.headerID + 'selectAll')\n\t\tif (e.target !== cb) { cb.checked = !cb.checked }\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\n\t\tif(cb.checked){\n\t\t\tnewHeaders[props.header.index].clearFilter()\n\t\t} else{\n\t\t\tnewHeaders[props.header.index].selectAll(cb.checked)\n\t\t}\n\t\t\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\tlet count = -1\n\tconst lim = 200\n\t\n\tif(!props.noFilter){ return (\n\t\t<div className = 'FilterMenu'>\n\t\t\t\n\t\t\t<div className='stickyMenu'>\n\t\t\t\t\n\t\t\t\t<button onClick={selectAll} className = 'selectAll fullButton compactText'>\n\t\t\t\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={!props.header.hasFilter()}\n\t\t\t\t\t\tid={props.header.headerID + 'selectAll'}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span style={spanStyle}>{'Select All'}</span>\n\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t{Object.keys(values).map((v, i) => {\n\t\t\t\tcount++\n\t\t\t\t\n\t\t\t\t//Limit the number of checkboxes that are rendered to 200\n\t\t\t\tif(count < lim){return (<button\n\t\t\t\t\tclassName = {'fullButton compactText'}\n\t\t\t\t\tkey={props.header.id + 'fv' + count}\n\t\t\t\t\tonClick={(e) => clickHandler(e, props.header.headerID + 'fcb' + i)}\n\t\t\t\t\ttitle = {props.header.format(v)}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype = 'checkbox'\n\t\t\t\t\t\tchecked = {values[v]}\n\t\t\t\t\t\tid={props.header.headerID + 'fcb' + i}\n\t\t\t\t\t\tvalue = {v}\n\t\t\t\t\t\tstyle= {{cursor:'pointer'}}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span \n\t\t\t\t\t\tstyle={spanStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{v !== 0 && !v ? 'Blank' : props.header.format(v)}\n\t\t\t\t\t</span>\n\t\t\t\t\t\n\t\t\t\t</button>)} else return null\n\t\t\t\t\n\t\t\t})}\n\t\t\t\n\t\t\t{count >= lim ? <button>... {count - lim} More</button> : null}\n\t\t\t\t\n\n\t\t</div>\n\t)} else return null\n}","import moment from 'moment'\n\nexport default class DataFilter{\n\t\n\tconstructor(options){\n\t\tthis.options = options\n\t\tthis.displayName = options.type\n\t\tthis.filter = DataFilter.getFilterTypes()[options.id] ? DataFilter.getFilterTypes()[options.id].func : ()=>{return true}\n\t\tthis.displayName = DataFilter.getFilterTypes()[options.id].displayName\n\t\tthis.args = DataFilter.getFilterTypes()[options.id].args\n\t\tthis.options.value = options.value.toString().toLowerCase()\n\t}\n\t\n\t\n\tfunc(val){\n\t\ttry{\n\t\t\treturn(this.filter(val, this.options))\n\t\t} catch(err){\n\t\t\treturn false\n\t\t}\n\t}\n\t\n\t\n\tstatic getFilterTypes(){\n\t\t\n\t\treturn {\n\t\t\t\n\t\t\tincludes: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Includes',\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tdoesNotInclude: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn !val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: \"Doesn't Include\",\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tlessThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val < options.value || moment(val).isBefore(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Less than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\n\t\t\tgreaterThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val > options.value || moment(val).isAfter(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Greater than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\t\t\t\n\t\t\tequals: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() == options.value || moment(val).isSame(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Equals',\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\n\t\t\tdoesNotEqual: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() != options.value && !moment(val).isSame(options.value, 'day')\n\t\t\t\t}, \n\t\t\t\tdisplayName: \"Doesn't Equal\",\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\t\t\t\n\t\t}\n\t\t\n\t}\n}","import React, { useState, useEffect } from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function MoreFilterButtonActive(props) {\n\t\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.header.filterList[props.filterID] && props.header.filterList[props.filterID].options.value ? \n\t\tprops.header.format(props.header.filterList[props.filterID].options.value) : ''\n\t)\n\t\n\tfunction changeHandler(e) {\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\n\t\tnewHeaders[props.header.index].addFilter({\n\t\t\tid: props.filterID,\n\t\t\tvalue: currentValue\n\t\t})\n\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction cancelHandler(){\n\t\t\n\t\tprops.setActive(false)\n\t\t\n\t\t//if filter exists, remove it\n\t\tif (props.header.filterList[props.filterID]){\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].removeFilter(props.filterID)\n\t\t\tprops.dataHeaders.set(newHeaders)\n\n\t\t}\n\n\t\tprops.data.filter()\n\t}\n\t\n\tfunction keyDownHandler(e){\n\t\tif(e.key === 'Enter'){\n\t\t\te.target.blur()\n\t\t} \n\t}\n\t\n\t\n\tfunction blurHandler(e){\n\t\tif (currentValue.trim() === ''){\n\t\t\tcancelHandler()\n\t\t} else{\n\t\t\tcommitHandler()\n\t\t}\n\t}\n\t\n\treturn(\n\t\t<button \n\t\t\tclassName='MoreFilterButtonActive disabled' \n\t\t>\n\t\t\t\n\t\t\t<span className = 'tag'>{props.filter.displayName}</span>\n\t\t\t<br/>\n\t\t\t\n\t\t\t<input \n\t\t\t\tclassName = {'input wrap'}\n\t\t\t\tautoFocus\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tvalue={currentValue}\n\t\t\t\tonKeyDown = {keyDownHandler}\n\t\t\t\tonBlur={blurHandler}\n\t\t\t/>\n\t\t\t\n\t\t\t<span className='cancelIcon' onClick={cancelHandler} >\n\t\t\t\t<FontAwesomeIcon icon={faTimes} />\n\t\t\t</span>\n\t\t\t\n\t\t</button>\n\t)\n}","import React, {useState, useEffect} from 'react'\nimport MoreFilterButtonActive from './MoreFilterButtonActive'\n\nexport default function MoreFilterButton(props) {\n\t\n\tconst [active, setActive] = useState(props.header.filterList[props.filterID] ? true : false)\n\t\n\tfunction activate(){\n\t\tif(!active){\n\t\t\tsetActive(true)\n\t\t\t\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].addFilter({\n\t\t\t\tid: props.filterID,\n\t\t\t\tvalue: ''\n\t\t\t})\n\t\t\t\n\t\t\tprops.dataHeaders.set(newHeaders)\n\t\t}\n\t}\n\t\n\tuseEffect(() => {\n\t\tconst newActive = props.header.filterList[props.filterID] ? true : false\n\t\tif (active !== newActive) { setActive(newActive) }\n\t})\n\t\n\tif(!active){return(\n\t\t<button onClick = {activate} className = 'MoreFilterButton'>\n\t\t\t<span style = {{paddingRight: '10px'}}>{props.filter.displayName}</span>\n\t\t</button>\n\t\t\n\t)} else{ return(\n\t\t\n\t\t<MoreFilterButtonActive\n\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t\tfilter = {props.filter}\n\t\t\tfilterID = {props.filterID}\n\t\t\theader = {props.header}\n\t\t\tsetActive = {setActive}\n\t\t\tactive = {active}\n\t\t/>\n\t\t\n\t)}\n}","import React from 'react'\nimport DataFilter from '../../../DataObjects/DataFilter'\nimport './MoreFilterButton'\nimport MoreFilterButton from './MoreFilterButton'\n\nexport default function MoreFilters(props) {\n\t\n\tconst filterList = DataFilter.getFilterTypes()\n\t\n\tif(!props.noFilter){return (\n\t\t<div className = 'MoreFilters'>\n\t\t\t\n\t\t\t{Object.keys(filterList).map((f, i)=>{\n\t\t\t\t\n\t\t\t\tif (filterList[f].availableTo.includes(props.header.type)){\n\t\t\t\t\t\n\t\t\t\t\treturn <MoreFilterButton \n\t\t\t\t\t\tkey = {'MoreFilterButton' + i}\n\t\t\t\t\t\tfilter = {filterList[f]}\n\t\t\t\t\t\tfilterID = {f}\n\t\t\t\t\t\theader = {props.header}\n\t\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\t\tdata = {props.data}\n\t\t\t\t\t\topenTrigger = {props.openTrigger}\n\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t} else return null\n\t\t\t})}\n\t\t\t\n\t\t</div>\n\t)} else return null\n}","import React from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function SortMenu(props){\n\t\n\tfunction sortData(e){\n\t\tprops.dataHeaders.addSortRule(props.header.headerID, e.target.value, props.header.index)\n\t\tprops.data.sort()\n\t}\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\tconst sortDir = sortRule ? sortRule.direction : ''\n\n\tconst cancelIcon = <span className = 'sortIcon' onClick={(e)=>{\n\t\tprops.dataHeaders.removeSortRule(props.header.headerID)\n\t\tprops.data.sort()\n\t\te.stopPropagation()\n\t}}>\n\t\t<FontAwesomeIcon icon={faTimes} />\n\t</span>\n\t\n\tif(!props.noSort){return (\n\t\t<div className='SortMenu' >\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'asc'}>\n\t\t\t\tSort Ascending\n\t\t\t\t{sortDir === 'asc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t\t\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'desc'}>\n\t\t\t\tSort Descending\n\t\t\t\t{sortDir === 'desc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t</div>\n\t)} else return null\n}\n","import React from 'react'\nimport './TheadMenu.css'\nimport FilterMenu from './FilterMenu'\nimport MoreFilters from './MoreFilters'\nimport SortMenu from './SortMenu'\n\n\nexport default function TheadMenu(props) {\n\t\n\t\n\treturn (\n\t\t<div className = 'TheadMenu'>\n\t\t\t<FilterMenu\n\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\theader={props.header}\n\t\t\t\tdata={props.data}\n\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t/>\n\t\t\t\n\t\t\t<div className='sideMenu' style={{ width: props.noFilter ? '100%' : null }}>\n\t\t\t\t\n\t\t\t\t<SortMenu \n\t\t\t\t\tdata = {props.data}\n\t\t\t\t\theader = {props.header}\n\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<MoreFilters\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoFilter={props.noFilter}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faCaretDown, faFilter, faSortAlphaDown, faSortAlphaDownAlt} from '@fortawesome/free-solid-svg-icons'\nimport TheadMenu from './TheadMenu'\nimport './TheadMenu'\n\nexport default function TheadButton(props){\n\t\n\t//if there is a menu, add a dropdown icon\n\tlet arrowIcon = <span className='theadIcon'><FontAwesomeIcon icon={faCaretDown}/></span>\t\n\tlet filterIcon\n\tlet sortIcon\n\t\n\tconst hasFilter = props.header.hasFilter()\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\t\t\n\tif(sortRule){\n\t\tarrowIcon = null\n\t\tsortIcon = sortRule.direction === 'asc' ?\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDown} /></span> :\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDownAlt} /></span>\n\t}\n\t\n\t\n\tif (hasFilter) {\n\t\tarrowIcon = null\n\t\tfilterIcon = <span className='smallIcon' style={{\n\t\t\tpaddingLeft: '5px',\n\t\t}}><FontAwesomeIcon icon={faFilter} /></span>\n\t}\n\t\n\t//changes every time the menu opens. Used by useEffect listeners in teh menu to respond to the open event\n\tconst [openTrigger, setOpenTrigger] = useState(false) \n\tconst [isOpen, setIsOpen] = useState(false)\n\t\n\tconst openClass = isOpen ? ' open ' : ''\n\t\n\tif(props.noSort && props.noFilter) { \n\t\t\n\t\treturn(props.children)\n\t\t\n\t} else{\n\t\treturn (\n\t\t\t<MenuButton \n\t\t\t\tclassName={'TheadButton '  + openClass} \n\t\t\t\tlocked = {false} \n\t\t\t\tonOpen = {()=>{\n\t\t\t\t\tsetOpenTrigger(!openTrigger)\n\t\t\t\t\tsetIsOpen(true)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tonClose = {()=>{\n\t\t\t\t\tprops.data.filter()\n\t\t\t\t\tsetIsOpen(false)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tmenuContent={<TheadMenu\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t\t/>}\n\t\t\t\t\n\t\t\t\tmenuStyle = {{\n\t\t\t\t\tmaxWidth: props.noFilter ? '180px' : '400px', \n\t\t\t\t\tmaxHeight: '310px'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{arrowIcon}\n\t\t\t\t{sortIcon}\t\t\n\t\t\t\t{filterIcon}\t\t\t\t\n\t\t\t</MenuButton>\n\t\t)\n\t}\n}","import React from 'react'\nimport Proptypes from 'prop-types'\nimport {v4 as uuid} from 'uuid'\n\nexport default function CheckButton(props) {\n\t\n\tconst checkID = uuid()\n\t\n\tfunction clickHandler(e, id) {\n\t\tif(!props.disabled){\n\t\t\tconst cb = document.getElementById(id)\n\t\t\tif (e.target !== cb) {cb.checked = !cb.checked}\n\t\t\t\n\t\t\tif(props.onClick){props.onClick(cb.checked, props.value)}\n\t\t}\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\treturn (<button\n\t\tonClick={(e) => clickHandler(e, checkID)}\n\t\tstyle ={{color: 'var(--mainTextColor)'}}\n\t>\n\n\t\t<input\n\t\t\ttype='checkbox'\n\t\t\tdefaultChecked={props.defaultChecked}\n\t\t\tid={checkID}\n\t\t\tvalue={props.value}\n\t\t\tstyle={{cursor: 'pointer', }}\n\t\t\tdisabled = {props.disabled}\n\t\t\tchecked = {props.checked}\n\t\t\treadOnly = {props.checked !== undefined ? true : false}\n\t\t/>\n\t\t<span style={spanStyle}>{props.children}</span>\n\t\t\n\n\t</button>)\n\t\n}\n\n\nCheckButton.propTypes={\n\tdefaultChecked: Proptypes.bool,\n\tvalue: Proptypes.any,\n\tlabel: Proptypes.string,\n\tonClick: Proptypes.func,\n\tdisabled: Proptypes.bool,\n\tchecked: Proptypes.bool,\n}","import React from 'react'\nimport CheckButton from './CheckButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faColumns} from '@fortawesome/free-solid-svg-icons'\nimport MenuButton from '../MenuButton'\n\nexport default function ColumnSettings(props) {\n\n\tfunction clickHandler(checked, idx){\n\t\t\n\t\tprops.setTransitionClass('noTransition')\n\t\tprops.headers.setVisible(idx, checked)\n\t\t\n\t\tsetTimeout(()=>{\n\t\t\tprops.data.sort()\n\t\t\tprops.setTransitionClass('')\n\t\t},0)\n\t}\n\t\n\treturn (<MenuButton \n\t\t\tlocked={false} \n\t\t\tmenuStyle={{\n\t\t\t\tmaxHeight: '300px'\n\t\t\t}}\n\t\t\tmenuContent={\n\t\t\t\t<div style = {{overflowY: 'auto'}}>\n\t\t\t\t\t{props.headers.get().map((h) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CheckButton\n\t\t\t\t\t\t\t\tkey={'customizeHeader' + h.headerID}\n\t\t\t\t\t\t\t\tdisabled={h.required}\n\t\t\t\t\t\t\t\tchecked={h.visible}\n\t\t\t\t\t\t\t\tvalue={h.index}\n\t\t\t\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t\t\t\t>{h.displayName}</CheckButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t}>\n\t\t\t<FontAwesomeIcon icon={faColumns} /> Column Settings\n\t</MenuButton>\n\t\t\n\t)\n}","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faWindowRestore, faCheck, faTimes} from '@fortawesome/free-solid-svg-icons'\nimport './SaveTableLayout.css'\nimport ConfirmButton from '../../Inputs/ConfirmButton'\n\nexport default function SaveTableLayout(props) {\n\t\n\tconst [saveName, setSaveName] = useState('')\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction changeHandler(e){\n\t\tsetSaveName(e.target.value)\n\t\tsetValidClass('')\n\t}\n\t\n\tconst savedLayouts = props.headers.getSavedLayouts()\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst nameExists = Object.values(savedLayouts).some((f)=>{\n\t\t\treturn f.name === saveName\n\t\t})\n\t\t\n\t\tif(saveName.trim() !== '' && !nameExists){\n\t\t\tsetSaveName('')\n\t\t\tprops.headers.saveLayout(saveName)\n\t\t} else{\n\t\t\tsetValidClass('invalid')\n\t\t}\t\n\t}\n\t\n\tfunction keyDownHandler(e) {\n\t\tif (e.key === 'Enter') {\n\t\t\tcommitHandler()\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\t\n\tfunction applyLayout(f){\n\t\tprops.headers.loadLayout(f)\n\t\tprops.data.sort()\n\t}\n\t\n\treturn (\n\t\t<MenuButton\n\t\t\tlocked={false}\n\t\t\tonClose={() => setValidClass('')}\n\t\t\tmenuStyle = {{width: '250px'}}\n\t\t\tmenuContent={\n\t\t\t\t<div className='SaveTableLayout'>\n\n\t\t\t\t\t<div className='inputMenu'>\n\t\t\t\t\t\t<span>Save Current Layout</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input className={'input ' + validClass}\n\t\t\t\t\t\t\tvalue={saveName}\n\t\t\t\t\t\t\tonChange={changeHandler}\n\t\t\t\t\t\t\tonKeyDown={keyDownHandler}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"commitIcon\" onClick={commitHandler}>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCheck} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t{Object.keys(savedLayouts).map((f) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName = {'layoutButton'}\n\t\t\t\t\t\t\t\tkey = {'saveLayoutButton' + f}\n\t\t\t\t\t\t\t\tonClick={()=>{applyLayout(f)}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<ConfirmButton \n\t\t\t\t\t\t\t\t\tclassName='cancelIcon'\n\t\t\t\t\t\t\t\t\tonClick = {(e)=>{\n\t\t\t\t\t\t\t\t\t\tprops.headers.deleteLayout(f)\n\t\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontent = {<FontAwesomeIcon icon={faTimes} />}\n\t\t\t\t\t\t\t\t\texpandedContent = {'Delete'}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: 'var(--cardBG)',\n\t\t\t\t\t\t\t\t\t\tcolor: 'var(--lockedTextColor)',\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tlocked = {false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<span className = 'layoutButtonText'>{savedLayouts[f].name}</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\n\n\t\t\t\t</div>\n\n\t\t\t}>\n\t\t\t\t\n\t\t\t<span className=''>\n\t\t\t\t<FontAwesomeIcon icon={faWindowRestore} />\n\t\t\t</span> Saved Layouts\n\t\t</MenuButton>\n\t)\n}","import React from 'react'\nimport ColumnSettings from './ColumnSettings'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {faTimesCircle, faPlus, faMinus} from '@fortawesome/free-solid-svg-icons'\nimport SaveTableLayout from './SaveTableLayout'\n\n\nexport default function TableControls(props) {\n\tlet clearFilterButton = null\n\tlet layoutButton = null\n\tlet settingsButton = null\n\tlet expandControls\n\t\n\tif (props.hasFilter && !props.noFilter) {\n\t\tclearFilterButton = <button\n\t\t\tonClick={props.clearFilter}\n\t\t><FontAwesomeIcon icon={faTimesCircle} /> Clear Filter</button>\n\t}\n\n\tif (!props.noFilter && !props.noSort && !props.noOptions) {\n\t\tlayoutButton = <SaveTableLayout \n\t\t\theaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t/>\n\t}\n\t\n\tif (!props.noOptions) {\n\t\tsettingsButton = <ColumnSettings\n\t\t\theaders={props.dataHeaders}\n\t\t\tdata={props.data}\n\t\t\tsetTransitionClass = {props.setTransitionClass}\n\t\t/>\n\t}\n\t\n\tif(props.showExpandControls){\n\t\texpandControls = <>\n\t\t\t<button onClick={()=>{\n\t\t\t\tprops.setExpandTrigger(!props.expandTrigger)\n\t\t\t}}><FontAwesomeIcon icon={faPlus} /> Expand All</button>\n\t\t\t\n\t\t\t<button onClick={()=>{\n\t\t\t\tprops.setCollapseTrigger(!props.collapseTrigger)\n\t\t\t}}><FontAwesomeIcon icon={faMinus} /> Collapse All</button>\n\t\t</>\n\t}\n\t\n\t\n\n\treturn (\n\t\t<div className='tableControls'>\n\t\t\t{settingsButton}\n\t\t\t{layoutButton}\n\t\t\t{expandControls}\n\t\t\t{clearFilterButton}\n\t\t</div>\n\t)\n}","import {useEffect, useRef} from 'react'\nimport useSystem from './UseSystem'\n\nexport default function useSettings(settingsID, applySettings){\n\tconst {get, save} = useSystem().Settings\n\t\n\tconst debouncer = useRef()\n\t\n\tuseEffect(() => {\n\t\tconst fetchAndApply = async () => {\n\t\t\ttry{\n\t\t\t\tconst token = await get(settingsID)\n\t\t\t\tapplySettings(token)\n\t\t\t} catch(err){\n\t\t\t\t// console.error(err)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(settingsID){fetchAndApply()}\n\t}, [])\n\t\n\t\n\treturn (newToken) => {\n\t\t//Prevent creating many tokens too fast\n\t\tclearTimeout(debouncer.current)\n\t\t\n\t\tdebouncer.current = setTimeout(() => {\n\t\t\tsave(settingsID, newToken)\n\t\t}, 2000)\n\t}\n}","import React from 'react'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons'\n\nexport default function PageContols(props) {\n\t\n\tconst showPageBack = props.activePage > 0\n\tconst showPageForward = ((props.activePage + 1) * props.pageSize) < props.dataLength\n\t\n\tif(!props.pageSize){\n\t\treturn null\n\t}\n\t\n\tfunction pageBack() {\n\t\tif (showPageBack) {\n\t\t\tprops.setActivePage(props.activePage - 1)\n\t\t\tprops.tableRef.current.scrollTop = 0\n\t\t}\n\t}\n\t\n\t\n\tfunction pageForward() {\n\t\tif (showPageForward) {\n\t\t\tprops.setActivePage(props.activePage + 1)\n\t\t\tprops.tableRef.current.scrollTop = 0\n\t\t}\n\t}\n\t\n\n\tif (props.dataLength > props.pageSize) {\n\t\treturn (<div className=\"pageControls\">\n\t\t\t\n\t\t\t{showPageBack ? \n\t\t\t\t<button onClick={pageBack}><FontAwesomeIcon icon={faCaretLeft} /></button> \n\t\t\t: null}\n\t\t\t\n\n\t\t\t<button className='textButton'>Showing {1 + props.activePage * props.pageSize}-\n\t\t\t{Math.min((1 + props.activePage) * props.pageSize, props.dataLength) + ' '}\n\t\t\tof {`  ${props.dataLength}`}</button>\n\t\t\t\n\n\t\t\t{showPageForward ?\n\t\t\t\t<button onClick={pageForward}><FontAwesomeIcon icon={faCaretRight} /></button>\n\t\t\t:null}\n\t\t\t\n\t\t</div>\n\t\t\n\t)} else return null\n\t\n}\n","import React, {useState, useRef, useEffect} from 'react'\nimport './CoreTable.css'\nimport MainTableRow from './MainTableRow'\nimport TheadButton from './TheadButton' \nimport TableControls from './TableControls'\nimport useSettings from '../../../Hooks/UseSettings'\nimport PageControls from './PageContols'\n\nexport default function CoreTable(props){\n\t\n\t//Sorting and filtering are optional (via props), only supported with if a dataset is provided\n\tconst {noSort, noFilter, searchable, noActive, locked} = props\n\tconst noOptions = props.noOptions || !props.settingsID\n\t\n\t//expanded rows (if applicable)\n\tconst hasNestedClass = props.nestedComponent ? ' hasNested ' : null\n\t\n\t//support for dataSets or for just arrays\n\tconst data = props.data.read()\n\tconst metaData = props.metaData\n\t\n\t//Settings token support \n\tconst [sortTrigger, setSortTrigger] = useState(false)\n\tconst saveSettings = useSettings(props.settingsID, (token) => {\n\t\tprops.headers.applyToken(token)\n\t\tif(!noSort){setSortTrigger(true)}\n\t})\n\t\n\tif (sortTrigger) { \n\t\tsetSortTrigger(false)\n\t\tsetTimeout(props.data.sort, 0)\n\t}\n\t\n\t//Active page handling\n\tconst [activePage, setActivePage] = useState(0)\n\t\n\t//get the length of the data with the filter applied\n\tlet dataLength = 0\n\tdata.forEach((r, idx)=>{\n\t\tif(metaData[idx]){\n\t\t\tif (metaData[idx].visible && !metaData[idx].searchHidden){dataLength ++}\n\t\t} else {\n\t\t\tdataLength++\n\t\t}\n\t})\n\t\n\t//For dataSets - runs when dataSet refreshes (sets the filter options to match)\n\tuseEffect(() => {\n\t\tif (!noFilter) { props.headers.embedData(data, metaData) }\n\t\tif (!noOptions) { props.headers.setSettingsEngine({ save: saveSettings }) }\n\t\t\n\t\tprops.data.sort()\n\n\t}, [props.data.lastResolved, props.data.lastEdited])\n\t\n\t//If clicking sets the active record then its animated\n\t//if there are editable cells the animations will be cancelled\n\tlet dynamic\n\tlet hasActiveClass = ''\n\t\n\tif(!noActive){\n\t\tdynamic = true\n\t\thasActiveClass = ' hasActive '\n\t} \n\t\n\tlet hasFilter = false\n\tlet totalHeaderWidth = 70\n\t\n\tprops.headers.get().forEach(hdr => {\n\t\t//if you have input cells in the table, hover effects will be cancelled\n\t\tif(hdr.onEdit){dynamic = false}\n\t\t\n\t\tif(hdr.visible){totalHeaderWidth = totalHeaderWidth + hdr.width}\n\t\t\n\t\t//check if any headers have active filters (to show a clear filter button)\n\t\tif(hdr.hasFilter()){hasFilter = true}\n\n\t})\n\n\tfunction clearFilter(){\n\t\tconst newHeaders = [...props.headers.get()]\n\t\tnewHeaders.forEach(hdr=>{\n\t\t\thdr.clearFilter()\n\t\t})\n\t\t\n\t\tprops.headers.set(newHeaders)\n\t\tprops.data.filter()\n\t}\n\t\n\tconst [transitionClass, setTransitionClass] = useState('')\n\t\n\t//Counter for rendered rows\n\tlet rowCount = 1\n\n\t//Positioning for nested components\n\tconst [expandTrigger, setExpandTrigger] = useState(false)\n\tconst [collapseTrigger, setCollapseTrigger] = useState(false)\n\tconst tableRef = useRef()\n\n\t//Render\n\treturn (\n\t\t<div \n\t\t\tclassName={'MainTable ' + hasActiveClass + hasNestedClass} \n\t\t\tref = {tableRef} \n\t\t\tstyle={props.style}\n\t\t>\n\n\t\t\t<div className=\"topBar\">\n\t\t\t\t<div className='topBarContainer'></div>\n\t\t\t\t\t<TableControls\n\t\t\t\t\t\thasFilter={hasFilter}\n\t\t\t\t\t\tnoFilter={noFilter}\n\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\tclearFilter={clearFilter}\n\t\t\t\t\t\tnoOptions={noOptions}\n\t\t\t\t\t\tdataHeaders={props.headers}\n\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\tsetTransitionClass={setTransitionClass}\n\t\t\t\t\t\tsetExpandTrigger = {setExpandTrigger}\n\t\t\t\t\t\tsetCollapseTrigger = {setCollapseTrigger}\n\t\t\t\t\t\texpandTrigger = {expandTrigger}\n\t\t\t\t\t\tcollapseTrigger = {collapseTrigger}\n\t\t\t\t\t\tshowExpandControls = {props.nestedComponent ? true : false}\n\t\t\t\t\t/>\n\t\t\t\t\t<PageControls \n\t\t\t\t\t\tactivePage = {activePage}\n\t\t\t\t\t\tsetActivePage = {setActivePage}\n\t\t\t\t\t\tdataLength = {dataLength}\n\t\t\t\t\t\tpageSize = {props.pageSize}\n\t\t\t\t\t\ttableRef={tableRef}\n\t\t\t\t\t/>\n\t\t\t</div>\n\n\n\t\t\t<div className=\"theadBar\" style={{\n\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)'\n\t\t\t}}>\n\t\t\t\t{props.headers.get().map((hdr, i) => {\n\t\t\t\t\tif (hdr.visible || hdr.required) {\n\t\t\t\t\t\t//Custom component type headers have no filters\n\t\t\t\t\t\tif (hdr.component) return <span style={{ width: hdr.width + 'px' }} key={'header' + i}>\n\t\t\t\t\t\t\t{hdr.displayName + ' '}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span style={{ width: hdr.width + 'px' }} key={'header' + i}>\n\n\t\t\t\t\t\t\t\t<TheadButton\n\t\t\t\t\t\t\t\t\theader={hdr}\n\t\t\t\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\t\t\t\tdataHeaders={props.headers}\n\t\t\t\t\t\t\t\t\tnoFilter={noFilter} \n\t\t\t\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{hdr.displayName + ' '}\n\t\t\t\t\t\t\t\t</TheadButton>\n\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)\n\t\t\t\t\t} else return null\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<div className={\"mainSection\" + transitionClass} style={{\n\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)' \n\t\t\t}}>\n\t\t\t\t\n\t\t\t\t{/* Table body data */}\n\t\t\t\t<div className = {'tableBody ' + props.data.lastResolved}>\n\t\t\t\t\t{data.map((dr, idx) => {\n\t\t\t\t\t\t//render the allowed numebr of rows, on th selected page\n\t\t\t\t\t\tif(!props.pageSize || ((rowCount > activePage * props.pageSize) && (rowCount <= (1 + activePage)*props.pageSize))){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet renderRow = dr !== []\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(searchable && metaData[idx]){\n\t\t\t\t\t\t\t\trenderRow = !metaData[idx].searchHidden\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\trenderRow = renderRow && (noFilter || (metaData[idx] && metaData[idx].visible))\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst rowKey = dr[props.data.primaryKey] ? dr[props.data.primaryKey] : idx\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst r = renderRow ? \n\t\t\t\t\t\t\t\t<MainTableRow\n\t\t\t\t\t\t\t\t\tdataRow = {dr}\n\t\t\t\t\t\t\t\t\tdataset = {props.data}\n\t\t\t\t\t\t\t\t\tdataHeaders={props.headers.get()}\n\t\t\t\t\t\t\t\t\trowKey = {rowKey}\n\t\t\t\t\t\t\t\t\tkey = {rowKey}\n\t\t\t\t\t\t\t\t\tlocked = {locked}\n\t\t\t\t\t\t\t\t\tdynamic = {dynamic}\n\t\t\t\t\t\t\t\t\trowIndex = {idx}\n\t\t\t\t\t\t\t\t\tnestedComponent = {props.nestedComponent}\n\t\t\t\t\t\t\t\t\tnestedProps = {props.nestedProps}\n\t\t\t\t\t\t\t\t\texpandTrigger = {expandTrigger}\n\t\t\t\t\t\t\t\t\tcollapseTrigger = {collapseTrigger}\n\t\t\t\t\t\t\t\t\tnoActive = {noActive}\n\t\t\t\t\t\t\t\t\ttableRef = {tableRef}\n\t\t\t\t\t\t\t\t/> : null\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(r){rowCount++}//Count the number of rows actually renedered (not filtered out)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn r\n\t\t\t\t\t\t} else if(rowCount <= (1 + activePage)*props.pageSize){rowCount++}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn null\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import {useState, useEffect} from 'react'\n\n//Initialises a Dataset and caches the value\nexport default function useDataset(fetchFunction, options = {}) {\n\t\n\t//The array contains an empty object by default\n\tconst [data, setData] = useState(options.defaultValue ? options.defaultValue : [])\n\tconst [status, setStatus] = useState('Pending')\n\tconst [lastResolved, setLastResolved] = useState()\n\tconst [lastEdited, setLastEdited] = useState()\n\tconst [activeRecord, setActiveRecord] = useState({})\n\t\n\t//Allowing you to choose the data arary you use, so you can set the active row right after fetching/setting new data\n\tfunction selectRecord(newPrimaryKey, fromData = data){\n\t\tconst newIndex = fromData.findIndex(r => r[options.primaryKey] == newPrimaryKey)\n\t\t\n\t\tif(newIndex > -1){\n\t\t\tsetActiveRecord(fromData[newIndex])\n\t\t\treturn (fromData[newIndex])\n\t\t} else{\n\t\t\tsetActiveRecord({})\n\t\t\treturn({})\n\t\t}\n\t}\n\t\n\tfunction getActiveRecord(){\n\t\treturn activeRecord\n\t}\n\t\n\t//Fetch data and update state once the operation is complete. Keep the old value in the meantime\n\tasync function fetchData() {\n\t\tsetStatus('Pending')\n\n\t\ttry {\n\t\t\t\n\t\t\tconst newData = await fetchFunction()\n\t\t\tsetData(newData)\n\t\t\t\n\t\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\t\t\t\n\t\t\tsetStatus('Resolved')\n\t\t\tsetLastResolved(Date())\n\t\t\treturn 'Resolved'\n\t\t\t\n\t\t} catch (e) {\n\t\t\tsetStatus('Rejected')\n\t\t\tconsole.error(e)\n\t\t\treturn 'Rejected'\n\t\t}\n\t}\n\t\n\t//Lets you edit the active row\n\tfunction editActiveRecord(newRecord) {\n\t\tconst newData = newRecord ? [...data] : []\n\t\t\n\t\tif(!options.primaryKey){console.error('No primary key set for this dataset.')}\n\t\t\n\t\tconst activeIndex = data.findIndex(r => r[options.primaryKey] == activeRecord[options.primaryKey])\n\t\t\n\t\t//if you call this function without passing a new record, the record is deleted\n\t\tif(newRecord && activeIndex > -1){\n\t\t\tnewData[activeIndex] = newRecord\n\t\t\tsetActiveRecord(newRecord)\n\t\t}else{\n\t\t\tdata.forEach((r, idx)=>{\n\t\t\t\tif(idx !== activeIndex){\n\t\t\t\t\tnewData.push(r)\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetActiveRecord({})\n\t\t}\n\t\t\n\t\tsetData(newData)\n\t}\n\t\n\t//Lets you edit a record that isn't the active record by specifying a primary key\n\tfunction editSpecificRecord(recordKey, newRecord){\n\t\tconst newData = newRecord ? [...data] : []\n\t\t\n\t\tif (!options.primaryKey) { console.error('No primary key set for this dataset.') }\n\n\t\tconst activeIndex = data.findIndex(r => r[options.primaryKey] == recordKey)\n\n\t\t//if you call this function without passing a new record, the record is deleted\n\t\tif (newRecord && activeIndex > -1) {\n\t\t\tnewData[activeIndex] = newRecord\n\t\t} else {\n\t\t\tdata.forEach((r, idx) => {\n\t\t\t\tif (idx !== activeIndex) {\n\t\t\t\t\tnewData.push(r)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tsetData(newData)\n\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\t}\n\t\n\t//Automatically run the fetching function the first time, then wait for a refresh\n\t//If the dataset was spawned by a parent dataset, send its refresh function to the parent, so it can refresh when the parent refreshes\n\tuseEffect(()=>{ \n\t\tfetchData()\n\t},[])\n\t\n\t//Return a Dataset object\n\treturn ({\n\t\tread: () => {return data},\n\t\trefresh: fetchData,\n\t\t\n\t\tselectRecord: (newKey) => selectRecord(newKey),\n\t\tgetActiveRecord: getActiveRecord,\n\t\tsetActiveRecord: editActiveRecord,\n\t\tsetRecord: editSpecificRecord,\n\t\t\n\t\tstatus: status,\n\t\tlastResolved: lastResolved,\n\t\tlastEdited: lastEdited,\n\t\t\n\t\t//TouchPoint Controls\n\t\tisDataset: true,\n\t\tprimaryKey: options.primaryKey,\n\t\t\n\t\tset: (newData)=>{\n\t\t\tsetData(newData)\n\t\t\tsetLastEdited(Date())\n\t\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\t\t}\n\t})\n}","import moment from 'moment'\n\n//format for displaying certain types of data\nconst formatFunctions = {\n\tdate: (cellValue) => cellValue ? moment(new Date(cellValue)).format('DD-MMM-YY') : '',\n\tboolean: (cellValue) => cellValue ? 'True' : 'False',\n\tother: (cellValue) => cellValue,\n}\n\n\n//Takes a user input and changes it to the correct data type (eg. Date string to new Date object)\nconst parseFunctions = {\n\tdate: (input) => {\n\t\tconst testVal = input.toString().toLowerCase()\n\t\t\n\t\tif (testVal === 'today' || testVal === 'td') { return moment().toISOString() }\n\t\t\n\t\tif (testVal === 'tomorrow' || testVal === 'tm') { return moment().add(1, 'day').toISOString() }\n\t\t\n\t\tif (testVal === 'yesterday' || testVal === 'tm') { return moment().subtract(1, 'day').toISOString() }\n\t\t\n\t\treturn moment( new Date(input) ).toISOString()\n\t},\n\n\tboolean: (input) => {\n\t\tconst testVal = input.toString().toLowerCase()\n\t\tif (testVal === 'true' || testVal === 'yes' || testVal == 1 || testVal === 'y' || testVal === 't') {\n\t\t\treturn true\n\t\t} else return false\n\t},\n\n\tnumber: (input) => {\n\t\tconst newValue = Number(input)\n\t\tif (!isNaN(newValue)) {\n\t\t\treturn newValue\n\t\t} else {\n\t\t\tthrow new Error('invalid input - not a number')\n\t\t}\n\t},\n\n\tother: (input) => input,\n}\n\n\n//Compares 2 values that may not be directly equal (eg. date object and date string)\nconst compareFunctions = {\n\tdate: (a, b) => moment( new Date(a) ).isSame(new Date(b), 'day'),\n\tboolean: (a, b) => this.parse(a) === this.parse(b),\n\tother: (a, b) => a == b,\n}\n\n\n//\nexport default class DataType{\n\tconstructor(type){\n\t\tthis.format = formatFunctions[type] ? formatFunctions[type] : formatFunctions.other\n\t\tthis.parse = parseFunctions[type] ? parseFunctions[type] : parseFunctions.other\n\t\tthis.compare = compareFunctions[type] ? compareFunctions[type] : compareFunctions.other\n\t}\n}","import DataFilter from './DataFilter'\nimport DataType from './DataType'\n\nexport default class DataHeader{\n\t\n\tconstructor(options){\n\t\tthis.headerID = options.headerID\n\t\tthis.displayName = options.displayName\n\t\tthis.width = options.width ? options.width : 100\n\t\tthis.required = options.required ? options.required : false\n\t\tthis.visible = (!options.visible === undefined) ? options.visible : true\n\t\tthis.index = options.index\n\t\tthis.onEdit = options.onEdit ? options.onEdit : null\n\t\tthis.locked = options.locked ? options.locked : false\n\t\tthis.styling = options.styling ? options.styling : null\n\t\tthis.uniqueValues = {}\n\t\tthis.type = options.type ? options.type : 'string'\n\t\tthis.onClick = options.onClick\n\t\t\n\t\tthis.component = options.component \n\t\tthis.props = options.props\n\t\t\n\t\t//Default filter list only has 1 functions (array filter)\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: (cellValue) => {\n\t\t\t\t\treturn (this.uniqueValues[cellValue] || this.uniqueValues[cellValue] === undefined)\n\t\t\t\t}, \n\t\t\t},\n\t\t}\n\t\t\n\t\tthis.dataType = new DataType(this.type)\n\t\t\n\t\tthis.format = this.dataType.format\n\t\tthis.parse = this.dataType.parse\n\t\tthis.compare = this.dataType.compare\n\t\t\n\t}\n\n\t\n\tfilter(cellValue, dataRow){\n\t\t//Check if any of the filters fail\n\t\t//If any filters fail, res will be true. Return the opposite\n\t\treturn !Object.keys(this.filterList).some( (f)=>{\n\t\t\treturn !this.filterList[f].func(cellValue, dataRow)\n\t\t})\n\t}\n\t\n\t\n\taddFilter(options){\n\t\tthis.filterList[options.id] = new DataFilter({...options, headerType: this.type})\n\t}\n\t\n\t\n\tremoveFilter(filterID){\n\t\tdelete this.filterList[filterID]\n\t}\n\t\n\t\n\t//Saves a list of unique values in the column - to be used in the filter dropdowns\n\tembedData(data, metaData){\n\t\tthis.uniqueValues = uniqueByColumn(data, metaData, this.headerID, this.uniqueValues)\n\t}\n\t\n\tselectAll(setVal){\n\t\tObject.keys(this.uniqueValues).map((uv)=>{\n\t\t\tthis.uniqueValues[uv] = setVal\n\t\t})\n\t}\n\t\n\t//checks if there are any active filters, including the array filter\n\thasFilter(){\n\t\t//array filter is always there, check if any other filters are there\n\t\tlet testRes = Object.keys(this.filterList).length === 1\n\t\t\n\t\t//if there are no other filters, check if the array filter is active\n\t\tif(testRes){\n\t\t\tObject.keys(this.uniqueValues).forEach((val) => {\n\t\t\t\tif (!this.uniqueValues[val]){testRes = false}\n\t\t\t})\n\t\t}\n\t\treturn !testRes\n\t}\n\t\n\tclearFilter(){\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: (cellValue) => {\n\t\t\t\t\treturn (this.uniqueValues[cellValue] || this.uniqueValues[cellValue] === undefined)\n\t\t\t\t}, displayName: 'Array Filter'\n\t\t\t}\n\t\t}\n\t\tthis.selectAll(true)\n\t}\n}\n\n\n//Returns an array of unique values from a column of DataRow objects\nfunction uniqueByColumn(data, metaData, columnID, oldValues) {\n\tconst res = {}\n\t\n\tdata.forEach((r, idx) => {\n\t\t\n\t\tif (metaData[idx] && (metaData[idx].visible || metaData[idx].filteredBy === columnID + ';')){\n\t\t\t//New vales added as true, old values keep their value\n\t\t\tif (oldValues[r[columnID]] === undefined){\n\t\t\t\tres[r[columnID]] = true\n\t\t\t} else{\n\t\t\t\tres[r[columnID]] = oldValues[r[columnID]]\n\t\t\t}\n\t\t}\n\t})\n\t\n\tconst orderedRes = {}\n\t\n\tObject.keys(res).sort().forEach((key)=>{\n\t\torderedRes[key] = res[key]\n\t})\n\t\n\treturn orderedRes\n}","import {useState, useRef} from 'react'\nimport DataHeader  from '../DataObjects/DataHeader'\nimport {v4 as uuid} from 'uuid'\n\n\n//Crates a set of DataHeaders, for use with a mainTable\nexport default function useHeaders(dataHeaders = []) {\n\t\n\tconst [headers, setHeaders] = useState(dataHeaders.map((hdr, i) => {\n\t\tconst obj = new DataHeader(hdr)\n\t\tobj.index = i\n\t\treturn (obj)\n\t}))\n\t\n\tconst [savedLayouts, setSavedLayouts] = useState({})\n\tconst [settingsEngine, setSettingsEngine] = useState({ save: ()=>{} })\n\tconst [tokenTrigger, setTokenTrigger] = useState(false)\n\t\n\tconst sortRules = useRef([])\n\tconst setSortRules = (value) => {sortRules.current = value}\n\t\n\t//Coverts the current layout to JSON and saves it\n\tfunction saveLayout(layoutName){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tconst saveID = uuid()\n\t\t\n\t\tnewLayouts[saveID] = {\n\t\t\tname: layoutName,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\t\n\t\theaders.forEach((h)=>{\n\t\t\tnewLayouts[saveID].headerOptions[h.headerID] = {\n\t\t\t\tvisible: h.visible,\n\t\t\t\tfilterList: []\n\t\t\t}\n\t\t\t\n\t\t\tObject.values(h.filterList).forEach((f) => {\n\t\t\t\tif (f.options) { newLayouts[saveID].headerOptions[h.headerID].filterList.push( f.options )}\n\t\t\t})\n\t\t})\n\t\t\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction loadLayout(id){\n\t\tif(savedLayouts[id]){\n\t\t\t\n\t\t\tconst newHeaders = []\n\t\t\t\n\t\t\theaders.forEach(h=>{\n\t\t\t\th.clearFilter()\n\t\t\t\th.visible = savedLayouts[id].headerOptions[h.headerID].visible \n\t\t\t\t\n\t\t\t\tsavedLayouts[id].headerOptions[h.headerID].filterList.forEach((f)=>{\n\t\t\t\t\th.addFilter(f)\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tnewHeaders.push(h)\n\t\t\t})\n\t\t\t\t\n\t\t\tsetHeaders(newHeaders)\n\t\t\tsetSortRules(savedLayouts[id].sortRules)\n\t\t\tsetTokenTrigger(true)\n\t\t}\n\t}\n\t\n\tfunction deleteLayout(id){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tdelete newLayouts[id]\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t\n\t//Saves a list of unique values in each column (header) - to be used in the filter dropdowns\n\tfunction embedData(data, metaData) {\n\t\t\n\t\tconst newHeaders = [...headers]\n\t\t\n\t\tnewHeaders.forEach((hdr) => {\n\t\t\thdr.embedData(data, metaData)\n\t\t})\n\n\t\tsetHeaders(newHeaders)\n\t}\n\t\n\tfunction applyToken(token){\n\t\tconst newSettings = JSON.parse(token)\n\t\tsetSavedLayouts(newSettings.savedLayouts)\n\t\t\n\t\tconst newHeaders = [...headers]\n\t\t\n\t\tnewHeaders.forEach((h)=>{\n\t\t\th.visible = newSettings.headerOptions[h.headerID].visible\n\t\t})\n\t\t\n\t\tsetSortRules(newSettings.sortRules ? newSettings.sortRules : [])\n\t\tsetHeaders(newHeaders)\n\t}\n\t\n\tfunction setVisible(index, bool){\n\t\tconst newHeaders = [...headers]\n\t\tnewHeaders[index].visible = bool\n\t\tsetHeaders(newHeaders)\n\t\tsetSortRules( [...sortRules.current].filter(sr => sr.headerID !== headers[index].headerID) )\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t//If settings have changed since the last render, create and save a new token\n\tif (tokenTrigger) {\n\t\tsetTokenTrigger(false)\n\t\t\n\t\tconst res = {\n\t\t\tsavedLayouts: savedLayouts,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\theaders.forEach((hdr)=>{\n\t\t\tres.headerOptions[hdr.headerID] = {\n\t\t\t\tvisible: hdr.visible,\n\t\t\t}\n\t\t})\n\n\t\tsettingsEngine.save(JSON.stringify(res))\n\t}\n\t\t\n\tfunction removeSortRule(headerID){\n\t\tsetSortRules(\n\t\t\t[...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\t)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction addSortRule(headerID, direction, headerIndex){\n\t\tconst newSortRules = [...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\tnewSortRules.push({headerID: headerID, direction: direction, index: headerIndex})\n\t\tsetSortRules(newSortRules)\n\t\tsetTokenTrigger(true)\n\t}\n\n\treturn ({\n\t\tget: () => {return headers},\n\t\tset: setHeaders,\n\t\t\n\t\tembedData: embedData,\n\t\tapplyToken: applyToken,\n\t\tsaveLayout: saveLayout,\n\t\tloadLayout: loadLayout,\n\t\tdeleteLayout: deleteLayout,\n\t\tgetSavedLayouts: ()=>{return savedLayouts},\n\t\tsetSettingsEngine: setSettingsEngine,\n\t\tsetVisible: setVisible,\n\t\t\n\t\taddSortRule: addSortRule,\n\t\tremoveSortRule: removeSortRule,\n\t\tgetSortRules: ()=>{\n\t\t\treturn sortRules.current\n\t\t}\n\t})\n}","import React, {useState, useEffect, useContext} from 'react'\nimport CoreTable from './DisplaySupport/CoreTable'\nimport useDataset from '../../Hooks/UseDataset'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport PropTypes from 'prop-types'\nimport useHeaders from '../../Hooks/UseHeaders'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function MainTable(props){\n\t\n\t//Converts static data to a dataset\n\tconst wrapperDataset = useDataset(props.data.isDataset ? () => [] : () => props.data, {primaryKey: props.primaryKey})\n\tconst data = props.data.isDataset ? {...props.data} : wrapperDataset\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined) || !props.data.isDataset \n\t\n\tconst headers = useHeaders(props.headers)\n\t\n\tconst newProps = {...props}\n\tnewProps.data = data\n\tnewProps.nestedComponent = null\n\tnewProps.noActive = true\n\tnewProps.headers = headers\n\t\n\tconst cleanProps = {...props}\n\tcleanProps.data = data\n\tcleanProps.headers = headers\n\t\n\t//Sort, search, and filter functionality\n\tconst [metaData, setMetaData] = useState([{ visible: true, filteredBy: '' }])\n\t\n\tuseEffect(()=>{\n\t\tif(!props.data.isDataset){\n\t\t\tdata.refresh()\n\t\t}\n\t},[props.data])\n\t\n\t//SEARCH\n\tconst searchText = useModuleData().get('TouchPointSearchText')\n\t\n\tfunction searchData() {\n\t\tif(props.searchable){\n\t\t\tconst values = data.read()\n\t\t\tconst newMetaData = []\n\n\t\t\tvalues.forEach((r, idx) => {\n\n\t\t\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\t\t\trowMeta.searchHidden = false\n\n\t\t\t\tif (searchText) {\n\n\t\t\t\t\tconst testVal = JSON.stringify(r).toLowerCase()\n\t\t\t\t\trowMeta.searchHidden = !testVal.includes(searchText.toLowerCase())\n\n\t\t\t\t}\n\n\t\t\t\tnewMetaData.push(rowMeta)\n\t\t\t})\n\n\t\t\tsetMetaData(newMetaData)\n\t\t}\n\t}\n\t\n\tuseEffect(searchData, [searchText])\n\t\n\t//FILTER\n\tfunction filterData(values) {\n\t\tconst newMetaData = []\n\n\t\tvalues.forEach((r, idx) => {\n\n\t\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\t\trowMeta.filteredBy = ''\n\n\t\t\tlet noRender = false\n\n\t\t\theaders.get().forEach((h) => {\n\t\t\t\tconst fltr = h.filter(r[h.headerID], r)\n\n\t\t\t\tif (!fltr && fltr != 'arrayFilter' && h.visible) {\n\t\t\t\t\tnoRender = true\n\t\t\t\t\trowMeta.filteredBy = rowMeta.filteredBy + [h.headerID] + ';'\n\t\t\t\t}\n\t\t\t})\n\n\t\t\trowMeta.visible = !noRender\n\t\t\tnewMetaData.push(rowMeta)\n\t\t})\n\t\t\n\t\treturn newMetaData\n\t}\n\t\n\tdata.filter = () => {\n\t\tconst newMeta = filterData(data.read())\n\t\tsetMetaData(newMeta)\n\t\theaders.embedData(data.read(), newMeta)\n\t}\n\t\n\t//SORT\n\tfunction sortData(values) {\n\t\tlet newValues = [...values]\n\n\t\theaders.getSortRules().forEach((sr) => {\n\n\t\t\tif (headers.get()[sr.index] && headers.get()[sr.index].visible) {\n\t\t\t\tnewValues = newValues.sort((aRow, bRow) => {\n\n\t\t\t\t\tif (sr.direction === 'asc') {\n\t\t\t\t\t\tif (aRow[sr.headerID] > bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t\t} else if (aRow[sr.headerID] < bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn -1\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn 0\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (aRow[sr.headerID] < bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t\t} else if (aRow[sr.headerID] > bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn -1\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t})\n\t\t\n\t\treturn newValues\n\t}\n\t\n\tdata.sort = () => {\n\t\tconst newData = props.noSort ? data.read() : sortData(data.read()) \n\t\t\n\t\t// const newMeta = props.noFilter ? newData : filterData(newData)\n\t\t// setMetaData(newMeta)\n\t\t\n\t\tdata.set(newData)\n\t\tdata.filter()\n\t}\n\t\n\t//Select and return:\n\t//cleanProps - if a dataset is passed to the table, then no need to create one\n\t//newProps - if a dataset is not passed to the table, then create one and pass it\n\tif(props.data.isDataset){\n\t\treturn (<CoreTable {...cleanProps} metaData = {metaData} locked={locked}/>)\n\t} else{\n\t\treturn (<CoreTable {...newProps} metaData={metaData} locked={locked}/>)\n\t}\n}\n\n//Proptypes\nMainTable.propTypes = {\n\tonEdit: PropTypes.func,\n\theaders: PropTypes.arrayOf(PropTypes.object).isRequired,\n\t\n\tdata: PropTypes.oneOfType([\n\t\tPropTypes.object,\n\t\tPropTypes.array\n\t]).isRequired,\n\n\tpageSize: PropTypes.number,\n\tlocked: PropTypes.bool,\n\tsearchable: PropTypes.bool,\n\tnoSort: PropTypes.bool,\n\tnoFilter: PropTypes.bool,\n\tnoOptions: PropTypes.bool,\n\tnoActive: PropTypes.bool,\n\tnestedProps: PropTypes.object,\n\tnestedComponent: PropTypes.func,\n\tsettingsID: PropTypes.string,\n\tstyle: PropTypes.object,\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function InfoTab(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tif(!props.hidden){return (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t\n\t\t\t<div className = {'InfoTab ' + props.tabID} style = {props.style}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t\t\n\t\t</lockedContext.Provider>\n\t)} else return null\n}\n\n//Proptypes\nInfoTab.propTypes = {\n\ttabTitle: PropTypes.string,\n\ttabID: PropTypes.string.isRequired,\n\tstyle: PropTypes.object,\n}\n","import React, {useContext} from 'react'\nimport {Tabs, Tab} from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './InfoTabContainer.css'\n\n\nexport default function InfoTabContainer(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"InfoTabContainer\">\n\t\t\t\t<Tabs \n\t\t\t\t\tdefaultActiveKey={props.defaultTab} \n\t\t\t\t\ttransition={false}\n\t\t\t\t\tonSelect = {(tabID)=>{\n\t\t\t\t\t\tif(props.onTabChange){props.onTabChange(tabID, locked)}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t{React.Children.map(props.children,(child) =>{\n\t\t\t\t\t\tconst tabTitle = child.props.tabTitle ? child.props.tabTitle : child.props.title\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!child.props.hidden){\n\t\t\t\t\t\t\treturn(<Tab eventKey={child.props.tabID} title={tabTitle}>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</Tab>)\n\t\t\t\t\t\t} else return null\n\t\t\t\t\t})}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nInfoTabContainer.propTypes = {\n\tdefaultTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n}\n\n\n","import React, {useEffect, useContext} from 'react'\nimport './Module.css'\nimport PropTypes from 'prop-types'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport lockedContext from '../../Contexts/LockedContext'\n\n\nexport default function Module(props) {\n\t\n\tconst moduleData = useModuleData()\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tuseEffect(()=>{\n\t\tmoduleData.clear()\n\t\t\n\t\treturn(()=>{\n\t\t\tmoduleData.clear()\n\t\t})\n\t\t\n\t}, [])\n\t\n\treturn (\n\t\t<div className={'Module ' + props.moduleName} style = {props.style}>\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nModule.propTypes = {\n\tmoduleName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n}\n","import React from 'react'\nimport './SplitScreen.css'\nimport Split from 'react-split'\nimport PropTypes from 'prop-types'\n\nexport default function SplitScreen(props) {\n\t\n\tlet splitSize = 50\n\tif(props.defaultSize){splitSize = props.defaultSize}\n\t\n\treturn (\n\t\t<div className='SplitScreen'>\n\t\t\t<Split \n\t\t\t\tdirection=\"vertical\" \n\t\t\t\tsizes={[100 - splitSize, splitSize]}\n\t\t\t\tminSize={100}\n\t\t\t\tgutterSize={4}\n\t\t\t\tsnapOffset={1}\n\t\t\t\tdragInterval={20}\n\t\t\t>\n\t\t\t\t{props.children}\n\n\t\t\t</Split>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nSplitScreen.propTypes = {\n\tdefaultSize: PropTypes.number,\n}","import React, { useContext } from 'react'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './ControlledTabContainer.css'\n\n\nexport default function ControlledTabContainer(props) {\n\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"ControlledTabContainer\" style={props.style}>\n\t\t\t\t{React.Children.map(props.children, (child) => {\n\t\t\t\t\tif (!child.props.hidden) {\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn (<div \n\t\t\t\t\t\t\tclassName='tabWrapper' \n\t\t\t\t\t\t\tstyle={props.activeTab === child.props.tabID ? {} : {display: 'None'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t</div>)\n\t\t\t\t\t} else return null\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nControlledTabContainer.propTypes = {\n\tactiveTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n\n\n","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport './Dock.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport lockedContext from '../../Contexts/LockedContext'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function Dock(props) {\n\t\n\tusePresence('TouchPointDock', 0, 'var(--dockWidth)')\n\tconst {Layout} = useSystem()\n\t\n\t//locking the item. If a component somewhere above in the tree is locked, the context will \n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\treturn (\n\t\t<div className='Dock' style={{...props.style, height: Layout.get().heightCSS}}>\n\t\t\t<lockedContext.Provider value={locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\nDock.propTypes={\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n"],"names":["SystemPopupHandler","props","num","activePopups","length","clickBackdrop","e","target","classList","contains","system","Popup","closeAll","map","Pop","idx","popupEffect","display","width","height","moduleContext","createContext","SystemModuleContainer","styleSettings","Layout","get","heightCSS","widthCSS","right","moduleList","Modules","list","moduleDataState","useState","Object","keys","m","component","getHomeName","systemContext","lockedContext","ThemeEngine","themes","orange","tableActiveColor","mainTextColor","labelColor","lockedTextColor","navColor","navTextColor","navHoverColor","navClickedColor","bodyAltBG","cardBG","borderColor","freeButtonNeutralBG","freeButtonPositiveBG","freeButtonNegativeBG","freeButtonTextColor","inputColor","inputInvalidColor","inputValidColor","blue","dark","themeName","themeData","toLowerCase","entries","forEach","key","value","document","documentElement","style","setProperty","localStorage","setItem","setTheme","getItem","TouchPointApp","setPopups","portalDestination","useRef","screenBlock","setScreenBlock","setPopupEffect","locked","moduleLock","setModuleLock","drawerIsOpen","setDrawerIsOpen","screenEffect","setScreenEffect","drawerExists","setDrawerExists","widths","heights","layout","setLayout","saveSettings","settingsID","settingsToken","getSettings","console","error","System","Theme","set","themeEngine","SystemThemeEngine","open","moduleName","modules","window","location","href","onOpenModule","hidden","homeModule","Input","enable","disable","forTime","setTimeout","PopupComponent","newPopups","push","close","pop","Drawer","isOpen","Exists","setExists","className","Settings","save","io","useEffect","applySavedTheme","newTheme","screenBlocker","children","propTypes","PropTypes","bool","object","isRequired","string","any","func","useSystem","useContext","usePresence","componentName","refreshCSS","layoutSettings","values","h","w","newLayout","AppToolbar","label","AppFooter","CoreButton","lockedFromAbove","undefined","lockedClass","clickHandler","onClick","onBlur","type","CloseButton","faTimes","AppDrawer","trueLeft","drawerLeft","setDrawerLeft","handlerClass","current","ReactDOM","createPortal","left","opacity","innerStyle","title","FreeButton","purpose","wideClass","wide","ConfirmButton","expanded","setExpanded","stopPropagation","blurHandler","expandedContent","content","expandedStyle","Tile","notifications","notificationBadge","innserStyle","TextBox","changeHandler","onChange","keyPressHandler","onEnter","defaultValue","placeholder","inputRef","autoFocus","useModuleContext","dataSource","setDataSource","newSource","clear","SearchBar","moduleData","useModuleData","searchFunction","setSearchFunction","searchRef","searchBarValue","setSearchBarValue","searchContext","focusSearchBar","focus","keyDownHandler","isCtrl","ctrlKey","metaKey","keyCode","preventDefault","addEventListener","removeEventListener","searchHandler","clearHandler","clearTimeout","faTimesCircle","radioContext","RadioGroup","uuid","groupName","groupID","radioData","RadioButton","id","buttonStyle","labelStyle","labelValue","ControlBar","searchBar","searchBarProps","CommentBox","ComboBox","kids","CheckBox","checked","menuContext","dropMenu","React","forwardRef","ref","submenu","menuClass","menuStyle","onClickBody","MenuContent","MenuButton","toggling","setToggling","toggleHandler","onOpen","onClose","parentMenuData","icon","faCaretRight","direction","notificationStyle","dropButton","body","click","menuContent","maxHeight","DockIcon","faIcon","iconStyle","fontSize","number","InfoCard","stripe","hasStripe","stripeColor","titleBar","dynamic","closeHandler","color","closeButton","stripeStyle","borderLeftColor","dynamicX","dynamicY","PopupCard","handleCloseButton","forceOpen","InputCell","dataRow","header","headerID","format","initalValue","setInitialValue","currentValue","setCurrentValue","newVal","focusHandler","escRef","keyHandler","blur","validClass","setValidClass","flashRed","flashGreen","commitChanges","customSetRow","newRow","setRow","override","compare","newData","JSON","parse","stringify","dataset","read","newCellValue","rowIndex","onEdit","cellValue","row","oldCellValue","oldRow","res","MainTableRow","activeClass","getActiveRecord","primaryKey","noActive","rowClickHandler","selectRecord","rowContent","dataHeaders","hdr","i","visible","required","cellClickHandler","cellContent","cellClass","cellText","rowKey","styling","myStyle","marginLeft","expandedClass","expandHandler","expandTrigger","collapseTrigger","expandIcon","nestedComponent","faMinus","faPlus","nestedProps","fitToWidth","tableRef","clientWidth","FilterMenu","uniqueValues","cb","getElementById","newHeaders","index","selectAll","clearFilter","spanStyle","textAlign","paddingLeft","count","lim","noFilter","hasFilter","cursor","v","DataFilter","options","displayName","filter","getFilterTypes","args","toString","val","err","includes","availableTo","doesNotInclude","lessThan","moment","isBefore","greaterThan","isAfter","equals","isSame","doesNotEqual","MoreFilterButtonActive","filterList","filterID","commitHandler","addFilter","cancelHandler","setActive","removeFilter","data","trim","MoreFilterButton","active","activate","newActive","paddingRight","MoreFilters","f","openTrigger","SortMenu","sortData","addSortRule","sort","sortRule","getSortRules","find","sr","sortDir","cancelIcon","removeSortRule","noSort","TheadMenu","TheadButton","arrowIcon","faCaretDown","filterIcon","sortIcon","faSortAlphaDown","faSortAlphaDownAlt","faFilter","setOpenTrigger","setIsOpen","openClass","maxWidth","CheckButton","checkID","disabled","defaultChecked","Proptypes","ColumnSettings","setTransitionClass","headers","setVisible","overflowY","faColumns","SaveTableLayout","saveName","setSaveName","savedLayouts","getSavedLayouts","nameExists","some","name","saveLayout","applyLayout","loadLayout","faCheck","deleteLayout","backgroundColor","padding","faWindowRestore","TableControls","clearFilterButton","layoutButton","settingsButton","expandControls","noOptions","showExpandControls","setExpandTrigger","setCollapseTrigger","useSettings","applySettings","debouncer","fetchAndApply","token","newToken","PageContols","showPageBack","activePage","showPageForward","pageSize","dataLength","pageBack","setActivePage","scrollTop","pageForward","faCaretLeft","Math","min","CoreTable","searchable","hasNestedClass","metaData","sortTrigger","setSortTrigger","applyToken","r","searchHidden","embedData","setSettingsEngine","lastResolved","lastEdited","hasActiveClass","totalHeaderWidth","transitionClass","rowCount","PageControls","dr","renderRow","useDataset","fetchFunction","setData","status","setStatus","setLastResolved","setLastEdited","activeRecord","setActiveRecord","newPrimaryKey","fromData","newIndex","findIndex","fetchData","Date","editActiveRecord","newRecord","activeIndex","editSpecificRecord","recordKey","refresh","newKey","setRecord","isDataset","formatFunctions","date","boolean","other","parseFunctions","input","testVal","toISOString","add","subtract","newValue","Number","isNaN","Error","compareFunctions","a","b","DataType","DataHeader","arrayFilter","dataType","headerType","uniqueByColumn","setVal","uv","testRes","columnID","oldValues","filteredBy","orderedRes","useHeaders","obj","setHeaders","setSavedLayouts","settingsEngine","tokenTrigger","setTokenTrigger","sortRules","setSortRules","layoutName","newLayouts","saveID","headerOptions","newSettings","headerIndex","newSortRules","MainTable","wrapperDataset","newProps","cleanProps","setMetaData","searchText","searchData","newMetaData","rowMeta","filterData","noRender","fltr","newMeta","newValues","aRow","bRow","arrayOf","oneOfType","array","InfoTab","tabID","tabTitle","InfoTabContainer","defaultTab","onTabChange","Children","child","Module","SplitScreen","splitSize","defaultSize","ControlledTabContainer","activeTab","Dock"],"mappings":"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"}