{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/touchpoint-ui/SystemComponents/SystemPopupHandler.js","../src/touchpoint-ui/Contexts/ModuleContext.js","../src/touchpoint-ui/SystemComponents/SystemModuleContainer.js","../src/touchpoint-ui/Contexts/SystemContext.js","../src/touchpoint-ui/Contexts/LockedContext.js","../src/touchpoint-ui/SystemComponents/ThemeEngine.js","../src/touchpoint-ui/Components/Core/TouchPointApp.js","../src/touchpoint-ui/Hooks/UseSystem.js","../src/touchpoint-ui/Hooks/UsePresence.js","../src/touchpoint-ui/Components/Core/AppToolbar.js","../src/touchpoint-ui/Components/Core/AppFooter.js","../src/touchpoint-ui/Components/Display/Loading.js","../src/touchpoint-ui/Components/Inputs/CoreButton.js","../src/touchpoint-ui/Components/Inputs/CloseButton.js","../src/touchpoint-ui/Components/Core/AppDrawer.js","../src/touchpoint-ui/Components/Inputs/FreeButton.js","../src/touchpoint-ui/Components/Inputs/ConfirmButton.js","../src/touchpoint-ui/Components/Inputs/Tile.js","../src/touchpoint-ui/Components/Inputs/TextBox.js","../src/touchpoint-ui/Hooks/UseModuleData.js","../src/touchpoint-ui/Components/Inputs/SearchBar.js","../src/touchpoint-ui/Contexts/RadioContext.js","../src/touchpoint-ui/Components/Inputs/RadioGroup.js","../src/touchpoint-ui/Components/Inputs/RadioButton.js","../src/touchpoint-ui/Components/Inputs/ControlBar.js","../src/touchpoint-ui/Components/Inputs/CommentBox.js","../src/touchpoint-ui/Components/Inputs/ComboBox.js","../src/touchpoint-ui/Components/Inputs/CheckBox.js","../src/touchpoint-ui/Contexts/MenuContext.js","../src/touchpoint-ui/Components/Display/MenuButton.js","../src/touchpoint-ui/Components/Inputs/DockIcon.js","../src/touchpoint-ui/Components/Containers/InfoCard.js","../src/touchpoint-ui/Components/Display/PopupCard.js","../src/touchpoint-ui/Components/Display/DisplaySupport/FilterMenu.js","../src/touchpoint-ui/DataObjects/DataFilter.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButtonActive.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilters.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SortMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/CheckButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/ColumnSettings.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SaveTableLayout.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TableControls.js","../src/touchpoint-ui/Hooks/UseSettings.js","../src/touchpoint-ui/Components/Display/DisplaySupport/PageContols.js","../src/touchpoint-ui/Components/Display/DisplaySupport/DateCell.js","../src/touchpoint-ui/Components/Display/DisplaySupport/InputCell.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MainTableRow.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TableBody.js","../src/touchpoint-ui/Components/Display/DisplaySupport/CoreTable.js","../src/touchpoint-ui/Hooks/UseDataset.js","../src/touchpoint-ui/DataObjects/DataType.js","../src/touchpoint-ui/DataObjects/headerSupport.js","../src/touchpoint-ui/DataObjects/DataHeader.js","../src/touchpoint-ui/Hooks/UseHeaders.js","../src/touchpoint-ui/Components/Display/DisplaySupport/DataProcessing.js","../src/touchpoint-ui/Components/Display/MainTable.js","../src/touchpoint-ui/Components/Display/RefreshButton.js","../src/touchpoint-ui/Components/Containers/InfoTab.js","../src/touchpoint-ui/Components/Containers/InfoTabContainer.js","../src/touchpoint-ui/Components/Containers/Module.js","../src/touchpoint-ui/Components/Containers/SplitScreen.js","../src/touchpoint-ui/Components/Containers/ControlledTabContainer.js","../src/touchpoint-ui/Components/Containers/Dock.js","../src/touchpoint-ui/Hooks/UseShortcuts.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react'\nimport './SystemPopupHandler.css'\n\nexport default function SystemPopupHandler(props) {\n\t\n\tconst num = props.activePopups.length\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e){\n\t\tif (e.target.classList.contains('systemPopupBackdrop')){\n\t\t\tprops.system.Popup.closeAll()\n\t\t}\n\t}\n\t\n\t//If the active popup isn't null, render it\n\tif(num === 0){return null}\n\t\n\treturn(\n\t\tprops.activePopups.map((Pop, idx)=>{\n\t\t\t\n\t\t\treturn <div \n\t\t\t\tclassName={\"systemPopupBackdrop \" + props.popupEffect}\n\t\t\t\tonClick={clickBackdrop}\n\t\t\t\tkey = {idx}\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: idx === num - 1 ? null :  'none',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{typeof (Pop) == 'function' ? <Pop {...props.popupProps[idx]}/> : Pop}\n\t\t\t</div> \n\t\t})\n\t)\t\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by a module to talk to it's children (eg. tying a searchbar to a maintable)\nconst moduleContext = createContext({})\nexport default moduleContext ","import React, {useState} from 'react'\nimport {Route, Switch} from 'react-router'\nimport moduleContext from '../Contexts/ModuleContext'\n\t\nexport default function SystemModuleContainer(props){\n\t\n\t//Adjusts the module container to fit between the system toolbars\n\tconst styleSettings = {\n\t\theight: props.system.Layout.get().heightCSS,\n\t\twidth: props.system.Layout.get().widthCSS,\n\t\tright: '0'\n\t}\n\n\tconst moduleList = props.system.Modules.list();\n\tconst moduleDataState = useState({})\n\n\t//Render the chosen module\n\treturn(\n\t\t\t<moduleContext.Provider value={moduleDataState}>\n\t\t\t\t\n\t\t\t\t<div className={\"moduleContainer\"} style={styleSettings}>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{/*<ActiveModule.component /> */}\n\n\t\t\t\t\t\t{Object.keys(moduleList).map(m => {\n\t\t\t\t\t\t\treturn <Route path={'/' + m} key={'routeFor' + m} component={moduleList[m].component} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<Route path='/' component={moduleList[props.system.Modules.getHomeName()].component} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</moduleContext.Provider>\n\t)\n\t\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//System wide variables (eg. activeUser, theming functions etc.) to be defined in the App component. \nconst systemContext = createContext({})\nexport default systemContext \n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Locking context. If a compnent is locked, then all child components will be locked as well \n//Only certain components support locking (see docs for more information)\nconst lockedContext = createContext(false)\nexport default lockedContext ","export default class ThemeEngine{\n\t\n\tconstructor(){\n\t\t//The list of available themes.\n\t\tthis.themes = {\n\t\t\torange: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(221, 70, 0)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(211, 67, 0)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'rgb(0, 138, 230)',\n\t\t\t\tfreeButtonNegativeBG: 'rgb(211, 67, 0)',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(238, 238, 238)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tblue: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(2, 187, 219)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(0, 138, 230)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(245, 245, 245)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tdark: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: '#63A1FF',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tlabelColor: '#63A1FF',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: '#35363A',\n\t\t\t\tnavTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: '#222229',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: '#313440',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.158)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: '#202124',\n\t\t\t\tinputInvalidColor: 'rgb(134, 67, 67)',\n\t\t\t\tinputValidColor: 'rgb(45, 104, 45)',\n\t\t\t},\n\t\t}\n\t}\n\t\n\t//Set the CSS cariables that control theme colors\n\tsetTheme(themeName){\n\t\t//check if a theme exists with that name \n\t\tif(this.themes[themeName]){\n\t\t\t\n\t\t\tconst themeData = this.themes[themeName.toLowerCase()]\n\t\t\t\n\t\t\tObject.entries(themeData).forEach(([key, value]) => {\n\t\t\t\tdocument.documentElement.style.setProperty('--' + key, value)\n\t\t\t})\n\t\t\t\n\t\t\tlocalStorage.setItem('themeName',themeName)\n\t\t}\n\t}\n\t\n\t//fethches the user's preferred theme and applies it\n\tgetUserTheme(){\n\t\tthis.setTheme(localStorage.getItem('themeName'))\n\t}\n}\n","import './TouchPointApp.css'\nimport '../Inputs/InputStyles.css'\nimport React, {useState, useEffect, useRef} from 'react'\nimport SystemPopupHandler from '../../SystemComponents/SystemPopupHandler'\nimport SystemModuleContainer from '../../SystemComponents/SystemModuleContainer'\nimport systemContext from '../../Contexts/SystemContext'\nimport lockedContext from '../../Contexts/LockedContext'\nimport SystemThemeEngine from '../../SystemComponents/ThemeEngine'\nimport PropTypes from 'prop-types'\nimport {HashRouter} from 'react-router-dom'\n\nexport default function TouchPointApp(props){\n\t\n\t//System-wide state\n\tconst [activePopups, setPopups] = useState([])\n\tconst [popupProps, setPopupProps] = useState([])\n\t\n\tconst portalDestination = useRef()\n\t\n\t//Set moduleTransition to 'transition' while the modules are being switched out\n\tconst [screenBlock, setScreenBlock] = useState(false) //if true, no clicks will register on the screen. use while things are movong to avoid misclicks\n\tconst [popupEffect, setPopupEffect] = useState('')\n\tconst [moduleLock, setModuleLock] = useState(props.locked)\n\t\n\tfunction setScreenEffect(newScreenEffect){\n\t\tconst effectDiv = document.getElementById('TouchPointScreenEffect')\n\t\teffectDiv.className = 'screenEffect ' + newScreenEffect\n\t}\n\t\n\tconst [drawerExists, setDrawerExists] = useState(false)\n\t\n\tconst [layout, setLayout] = useState({\n\t\theightCSS: '100%',\n\t\twidthCSS: '100%',\n\t\t\n\t\twidths: {},\n\t\theights: {},\n\t})\n\t\n\tfunction saveSettings(settingsID, settingsToken){\n\t\tif (props.saveSettings && settingsID) {\n\t\t\tprops.saveSettings(settingsID, settingsToken)\n\t\t}\n\t}\n\t\n\tasync function getSettings(settingsID) {\n\t\ttry {\n\t\t\tif (props.getSettings && settingsID) {\n\t\t\t\treturn await props.getSettings(settingsID)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err)\n\t\t\treturn null\n\t\t}\n\t}\n\t\n\t//Functions that are available to all modules and can be used system-wode \n\t//Used for things like switching modules, sending out emails, etc. for consistency across the system\n\tconst System = {\n\t\t\n\t\t//Setting system wide variables\n\t\tTheme: {\n\t\t\tset:(themeName) => {\n\t\t\t\tconst themeEngine = new SystemThemeEngine()\n\t\t\t\tthemeEngine.setTheme(themeName)\n\t\t\t\tsaveSettings('TouchPointAppTheme', themeName)\n\t\t\t}\n\t\t},\n\t\t\n\t\tModules: {\n\t\t\topen: (moduleName) => {\n\n\t\t\t\tif (props.modules[moduleName]) {\n\t\t\t\t\t//setActiveModule(moduleName)\n\t\t\t\t\twindow.location.href = '#/' + moduleName\n\t\t\t\t\tsetModuleLock(props.modules[moduleName].locked)\n\n\t\t\t\t\tif (props.onOpenModule) { props.onOpenModule(moduleName) }\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tlist: () => {\n\t\t\t\tconst modules = {}\n\t\t\t\tObject.keys(props.modules).forEach((m) => {\n\t\t\t\t\tif (!props.modules[m].hidden) {\n\t\t\t\t\t\tmodules[m] = props.modules[m]\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn modules\n\t\t\t},\n\t\t\t\n\t\t\tgetHomeName: () => { return props.homeModule },\n\t\t},\n\t\t\n\t\tInput: {\n\t\t\tenable:() => {setScreenBlock(false)},\n\t\t\t\n\t\t\tdisable: (forTime) => {\n\t\t\t\tsetScreenBlock(true)\n\n\t\t\t\tif (forTime) {\n\t\t\t\t\tsetTimeout(() => setScreenBlock(false), forTime)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t\n\t\tPopup: {\n\t\t\topen: (PopupComponent, props) => {\n\t\t\t\tsetScreenBlock(true)\n\t\t\t\tsetTimeout(() => setScreenBlock(false), 400)\n\n\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\t\n\t\t\t\tconst newPopups = [...activePopups]\n\t\t\t\tconst newPopupProps = [...popupProps]\n\t\t\t\t\n\t\t\t\tnewPopups.push(PopupComponent)\n\t\t\t\tnewPopupProps.push(props)\n\t\t\t\t\n\t\t\t\tsetPopups(newPopups)\n\t\t\t\tsetPopupProps(newPopupProps)\n\t\t\t\t\n\t\t\t\tsetTimeout(() => setPopupEffect(''), 0)\n\t\t\t},\n\n\t\t\tclose: () => {\n\t\t\t\t// if(activePopup.props.onClose){activePopup.props.onClose()}\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\t\n\t\t\t\tconst newPopups = [...activePopups]\n\t\t\t\tconst newPopupProps = [...popupProps]\n\t\t\t\t\n\t\t\t\tnewPopups.pop()\n\t\t\t\tnewPopupProps.pop()\n\t\t\t\t\n\t\t\t\tsetPopupProps(newPopupProps)\n\t\t\t\tsetPopups(newPopups)\n\t\t\t\t\n\t\t\t\tsetTimeout(() => setPopups(newPopups), 100)\n\t\t\t\t\n\t\t\t\tconst drawerIsOpen = document.getElementById('TouchPointAppDrawer').classList.toString().includes('open')\n\t\t\t\tif(!drawerIsOpen){setScreenEffect('')}\n\t\t\t},\n\t\t\t\n\t\t\tcloseAll: () => {\n\t\t\t\t// if(activePopup.props.onClose){activePopup.props.onClose()}\n\t\t\t\tsetPopupEffect('transparent')\n\n\t\t\t\tsetTimeout(() => setPopups([]), 100)\n\t\t\t\t\n\t\t\t\tconst drawerElement = document.getElementById('TouchPointAppDrawer')\n\n\t\t\t\tif (!(drawerElement && drawerElement.classList.toString().includes('open'))) { \n\t\t\t\t\tsetScreenEffect('')\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t\n\t\tDrawer:{\n\t\t\topen: ()=>{\n\t\t\t\tconst drawerHandler = document.getElementById('TouchPointDrawerHandler')\n\t\t\t\tif(drawerHandler){\n\t\t\t\t\tdrawerHandler.classList.add('SystemDrawerHandler')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst drawerBox = document.getElementById('TouchPointAppDrawer')\n\t\t\t\tif (drawerBox) {\n\t\t\t\t\tdrawerBox.classList.add('open')\n\t\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tclose: () => {\n\t\t\t\tconst drawerHandler = document.getElementById('TouchPointDrawerHandler')\n\t\t\t\tif (drawerHandler) {\n\t\t\t\t\tdrawerHandler.classList.remove('SystemDrawerHandler')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst drawerBox = document.getElementById('TouchPointAppDrawer')\n\t\t\t\tif (drawerBox) {\n\t\t\t\t\tdrawerBox.classList.remove('open')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetScreenEffect('')\n\t\t\t},\n\t\t\t\n\t\t\tExists: drawerExists,\n\t\t\tsetExists: setDrawerExists,\n\t\t\t\n\t\t\tportalDestination: portalDestination,\n\t\t},\n\t\t\n\t\t//Internal variables for structuring the app\n\t\tLayout: {get: ()=>layout, set: setLayout},\n\t\t\n\t\tSettings: {\n\t\t\tsave: saveSettings,\n\t\t\tget: getSettings\n\t\t},\n\t\t\n\t\tio: props.io\n\t}\n\t\n\t//initial setup - theme and settings\n\tuseEffect(()=>{\n\t\tasync function applySavedTheme(){\n\t\t\t\n\t\t\tconst newTheme = await System.Settings.get('TouchPointAppTheme')\n\t\t\tif(newTheme){\n\t\t\t\tconst themeEngine = new SystemThemeEngine()\n\t\t\t\tthemeEngine.setTheme(newTheme)\n\t\t\t}\n\t\t}\n\t\t\n\t\tapplySavedTheme()\n\t}, [])\n\t\n\t//Input blocker for clicks\n\tlet screenBlocker = null\n\tif(screenBlock){\n\t\tscreenBlocker = <div className=\"screenBlocker\" />\n\t} else screenBlocker = null\n\t\n\t\n\treturn (\n\t\t<div className={\"TouchPointApp \"}>\n\t\t\t<lockedContext.Provider value = {props.locked}>\n\t\t\t\t<systemContext.Provider value ={System}>\n\t\t\t\t\t\t<HashRouter>\n\t\t\t\t\t\t{screenBlocker}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div ref={portalDestination}>\n\t\t\t\t\t\t\t{/* Portal Destination for App Drawer */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className='screenEffect' id='TouchPointScreenEffect'>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<SystemModuleContainer \n\t\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\t\tlocked = {props.locked || moduleLock}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<SystemPopupHandler \n\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\tactivePopups = {activePopups}\n\t\t\t\t\t\t\tpopupEffect = {popupEffect}\n\t\t\t\t\t\t\tpopupProps = {popupProps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</HashRouter>\n\t\t\t\t</systemContext.Provider>\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nTouchPointApp.propTypes = {\n\tlocked: PropTypes.bool,\n\tmodules: PropTypes.object.isRequired,\n\thomeModule: PropTypes.string,\n\tio: PropTypes.any,\n\tonOpenModule: PropTypes.func,\n\tsaveSettings: PropTypes.func,\n\tgetSettings: PropTypes.func,\n}\n","import systemContext from '../Contexts/SystemContext'\nimport {useContext} from 'react'\n\n//Returns a refference to the System object - allowing modules to interact with the parent app\nexport default function useSystem() {\n\treturn useContext(systemContext)\n}","import {useEffect} from 'react'\nimport useSystem from './UseSystem'\n\n//Allows a system component (like the app-wide toolbar) to declare its presence, so the module container \n//can resize to fit around them\nexport default function usePresence(componentName, height, width) {\n\t\n\tconst {Layout} = useSystem()\n\t\n\tfunction refreshCSS(layoutSettings){\n\t\t\n\t\tlet heightCSS = 'calc(100%'\n\t\tlet widthCSS = 'calc(100%'\n\t\t\n\t\tObject.values(layoutSettings.heights).forEach((h)=>{\n\t\t\t\n\t\t\tif(h){\n\t\t\t\theightCSS = heightCSS + ' - ' + h\n\t\t\t}\n\t\t})\n\t\t\n\t\tObject.values(layoutSettings.widths).forEach((w)=>{\n\t\t\tif(w){\n\t\t\t\twidthCSS = widthCSS + ' - ' + w\n\t\t\t}\n\t\t})\n\t\t\n\t\tlayoutSettings.heightCSS = heightCSS + ')'\n\t\tlayoutSettings.widthCSS = widthCSS + ')'\n\t\t\n\t}\n\t\n\t\n\t\n\tuseEffect(() => {\n\t\t\n\t\tconst newLayout = {...Layout.get()}\n\t\tnewLayout.widths[componentName] = width\n\t\tnewLayout.heights[componentName] = height\n\n\t\trefreshCSS(newLayout)\n\t\tLayout.set(newLayout)\n\t\t\n\t\treturn ()=>{\n\t\t\tconst newLayout = { ...Layout.get() }\n\t\t\tnewLayout.widths[componentName] = 0\n\t\t\tnewLayout.heights[componentName] = 0\n\n\t\t\trefreshCSS(newLayout)\n\t\t\tLayout.set(newLayout)\n\t\t}\n\t\t\n\t},[])\n\t\t\n}","import React from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './AppToolbar.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport propTypes from 'prop-types'\n\nexport default function AppToolbar(props){\n\t\n\t//Declare itself to the app so the modules can be fit around it \n\tusePresence('TouchPointAppToolbar', 'var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppToolbar\" style = {props.style}>\n\t\t\t<div className=\"brandingContainer\">\n\t\t\t\t{props.label}\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className=\"buttonContainer flexY\">\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t)\n}\n\n//\nAppToolbar.propTypes={\n\tlabel: propTypes.any\n}\n","import React from 'react'\nimport './AppFooter.css'\nimport useSystem from '../../Hooks/UseSystem'\nimport usePresence from '../../Hooks/UsePresence'\n\nexport default function AppFooter(props) {\n\t\n\t//Declare itself to the app so the modules can be fit around it\n\tusePresence('TouchPointAppFooter','var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppFooter\" style = {props.style}>\n\t\t\t{props.children}\n\t\t</div>\n\t)\n}\n","import React from 'react'\nimport {faCircleNotch} from \"@fortawesome/free-solid-svg-icons\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport './Loading.css'\nimport propTypes from 'prop-types'\n\nexport default function Loading(props) {\n\treturn (\n\t\t<span className = {'Loading ' + props.className} style={props.style} >\n\t\t\t<span className={props.animation ? props.animation : 'rotate'}>\n\t\t\t\t{props.children ? props.children : <FontAwesomeIcon icon={faCircleNotch} />}\n\t\t\t</span> \n\t\t</span>\n\t)\n}\n\nLoading.propTypes={\n\tclassName: propTypes.string,\n\tstyle: propTypes.object,\n\tanimation: propTypes.string,\n}","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './CoreButton.css'\nimport Loading from '../Display/Loading'\n\n\nexport default function CoreButton(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction clickHandler(e){\n\t\tif((!locked) && (!props.loading) && props.onClick){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tif(!props.hidden){return (\n\t\t\n\t\t<button className={'CoreButton ' + lockedClass + ' ' + props.className}\n\t\t\tonClick ={clickHandler}\n\t\t\tstyle = {props.style}\n\t\t\tonBlur = {props.onBlur}\n\t\t\ttype={props.type}\n\t\t\ttabIndex={props.tabIndex}\n\t\t\ttitle={props.title}\n\t\t>\n\t\t\t{props.loading ? <Loading style={{\n\t\t\t\tfontSize: 'inherit',\n\t\t\t\topacity: '100%'\n\t\t\t}}/> : props.children}\n\t\t</button>\n\t\t\n\t)} else{return null}\n}\n\n//Proptypes\nCoreButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonBlur: PropTypes.func,\n\ttype: PropTypes.string,\n\tloading: PropTypes.bool,\n\ttabIndex: PropTypes.any,\n\ttitle: PropTypes.string,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from './CoreButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faTimes} from \"@fortawesome/free-solid-svg-icons\";\nimport './CloseButton.css'\n\n\nexport default function CloseButton(props) {\n\t\n\treturn (\n\t\t<CoreButton \n\t\t\tclassName = 'CloseButton'\n\t\t\tonClick = {props.onClick}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tstyle = {props.style}\n\t\t\ttabIndex = {props.tabIndex}\n\t\t>\n\t\t\t<FontAwesomeIcon icon={faTimes}/>\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nCloseButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tstyle: PropTypes.object,\n\ttabIndex: PropTypes.any,\n}\n\n\n","import React, {useEffect, useState, useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './AppDrawer.css'\nimport CloseButton from '../Inputs/CloseButton'\nimport PropTypes from 'prop-types'\nimport useSystem from '../../Hooks/UseSystem'\nimport ReactDOM from 'react-dom'\n\nexport default function AppDrawer(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst {Drawer} = useSystem()\n\t\n\tuseEffect(()=>{\n\t\tDrawer.setExists(true)\n\t\treturn ()=>Drawer.setExists(false)\n\t},[])\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e) {\n\t\tif (e.target.classList.contains('SystemDrawerHandler')) {\n\t\t\tDrawer.close()\n\t\t}\n\t}\n\t\n\tif (Drawer.portalDestination.current){ return ( \n\t\tReactDOM.createPortal(\n\t\t\t<div id='TouchPointDrawerHandler' onClick = {clickBackdrop}>\n\t\t\t\t<lockedContext.Provider value={locked}>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={'AppDrawer'}\n\t\t\t\t\t\tid={'TouchPointAppDrawer'}\n\t\t\t\t\t\tstyle={{...props.style, opacity: '93%'}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"drawerContainer\" style={props.innerStyle}>\n\t\t\t\t\t\t\t<div className='scroller'>\n\t\t\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<h1>{props.title}</h1>\n\t\t\t\t\t\t\t\t\t<CloseButton\n\t\t\t\t\t\t\t\t\t\tlocked={false}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tDrawer.close()\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div id='TouchPointDrawerContainer'>\n\t\t\t\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t</div>, Drawer.portalDestination.current)\n\t\t\n\t)} else return null\n\n\t\t\n\n}\n\n\nAppDrawer.propTypes = {\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n}","import React from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\n\nimport './FreeButton.css'\n\nexport default function FreeButton(props) {\n\t\n\tlet purpose = 'neutral '\n\tlet wideClass = ''\n\tif (props.purpose){purpose = props.purpose.toLowerCase()}\n\tif (props.wide){wideClass = 'wide '}\n\t\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tlocked={props.locked}\n\t\t\tonClick ={props.onClick}\n\t\t\thidden={props.hidden}\n\t\t\tclassName = {\"FreeButton \" + purpose + ' ' + wideClass + ' ' + props.className}\n\t\t\tstyle = {props.style}\n\t\t\ttype={props.type}\n\t\t\tloading={props.loading}\n\t\t\ttabIndex={props.tabIndex}\n\t\t\ttitle={props.title}\n\t\t>\n\t\t\t{props.children}\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nFreeButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tpurpose: PropTypes.string,\n\twide: PropTypes.bool,\n\tstyle: PropTypes.object,\n\ttype: PropTypes.string,\n\tloading: PropTypes.bool,\n\ttabIndex: PropTypes.any,\n\ttitle: PropTypes.string,\n}","import React, {useState} from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\nimport './ConfirmButton.css'\n\nexport default function ConfirmButton(props) {\n\t\n\tconst [expanded, setExpanded] = useState(false)\n\t\n\tfunction clickHandler(e){\n\t\tif(expanded){\n\t\t\tif(props.onClick){props.onClick(e)}\n\t\t\tsetExpanded(false)\n\t\t\tif(props.onCollapse){ props.onCollapse()}\n\t\t} else{\n\t\t\te.stopPropagation()\n\t\t\tsetExpanded(true)\n\t\t\tif(props.onExpand){props.onExpand(e)}\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\tfunction blurHandler(){\n\t\tsetExpanded(false)\n\t\tif(props.onCollapse){ props.onCollapse()}\n\t}\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tclassName = {props.className + ' ConfirmButton ' + \n\t\t\t\t(expanded ? ' expanded ' : '') + props.purpose\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tonClick = {clickHandler}\n\t\t\tstyle = {expanded ? {...props.style, ...props.expandedStyle} : props.style}\n\t\t\tloading = {props.loading}\n\t\t\tonBlur = {blurHandler}\n\t\t>\n\t\t\t{expanded ? props.expandedContent : props.content}\n\t\t</CoreButton>\n\t)\n}\n\n//\nConfirmButton.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n\texpandedStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tcontent: PropTypes.any,\n\texpandedContent: PropTypes.any,\n\tpurpose: PropTypes.string,\n\tloading: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tonExpand: PropTypes.func,\n\tonCollapse: PropTypes.func,\n}","import React, {useContext} from 'react'\nimport './Tile.css'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport Loading from '../Display/Loading'\n\nexport default function Tile(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tfunction clickHandler(){\n\t\tif((!locked) && (!props.loading) && props.onClick){\n\t\t\tprops.onClick()\n\t\t}\n\t}\n\t\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\t\n\tconst notificationBadge = props.notifications && !locked ?\n\t<span className='notifications'>{notifications}</span>\n\t: null\n\t\n\treturn (\n\t\t<div style={props.style} className={'Tile' + (locked ? ' locked ' : '')} title={props.title}>\n\t\t\t<div style = {props.innserStyle} className={'TileContainer '} onClick = {clickHandler}> \n\t\t\t\t{notificationBadge}\n\t\t\t\t<div className='logo flexCenter'>\n\t\t\t\t\t{props.loading ? <Loading style={{\n\t\t\t\t\t\tfontSize: 'inherit',\n\t\t\t\t\t\topacity: '100%'\n\t\t\t\t\t}} /> : props.children}\n\t\t\t\t</div> \n\t\t\t\t\n\t\t\t\t<div className=\"title\">{props.title}</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\t\n}\n\n//Proptypes\nTile.propTypes = {\n\tlocked: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n\tloading: PropTypes.bool,\n\ttitle: PropTypes.string,\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\nexport default function TextBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//For the onEnter event\n\tfunction keyPressHandler(e){\n\t\tif(!locked && e.key === 'Enter' && props.onEnter !==undefined){\n\t\t\tprops.onEnter(e)\n\t\t} \n\t}\n\t\n\treturn (\n\t\t<input \n\t\t\ttype={props.type ? props.type : \"text\"}\n\t\t\tclassName={\"input TextBox \" + lockedClass + ' ' + props.className}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tonKeyPress={keyPressHandler}\n\t\t\tplaceholder = {props.placeholder}\n\t\t\tonBlur = {props.onBlur}\n\t\t\tonFocus = {props.onFocus}\n\t\t\tref = {props.inputRef}\n\t\t\tautoFocus = {props.autoFocus}\n\t\t\tstyle = {props.style}\n\t\t\tvalue = {props.value}\n\t\t\tmaxLength={props.maxLength}\n\t\t\ttabIndex={props.tabIndex}\n\t\t/>\n\t)\n}\n\n//Proptypes\nTextBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\tvalue: PropTypes.string,\n\tinputRef: PropTypes.object,\n\tautoFocus: PropTypes.bool,\n\tvalue: PropTypes.string,\n\ttype: PropTypes.string,\n\tmaxLength:PropTypes.number,\n\ttabIndex: PropTypes.any,\n\tonFocus: PropTypes.func,\n\tonBlur: PropTypes.func,\n}\n\n","import { useContext } from 'react'\nimport moduleContext from '../Contexts/ModuleContext'\n\nexport default function useModuleContext(){\n\tconst [dataSource, setDataSource] = useContext(moduleContext)\n\t\n\treturn({\n\t\tget: (key) => {return dataSource[key]},\n\t\t\n\t\tset: (key, value) => {\n\t\t\tconst newSource = {...dataSource}\n\t\t\tnewSource[key] = value\n\t\t\tsetDataSource(newSource)\n\t\t},\n\t\t\n\t\tclear: () => {setDataSource( {} )}\n\t})\n}","import React, {useState, useRef, useEffect} from 'react'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport TextBox from './TextBox'\nimport PropTypes from 'prop-types'\nimport './SearchBar.css'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimesCircle} from \"@fortawesome/free-solid-svg-icons\"\n\nexport default function SearchBar(props) {\n\t\n\t\n\tconst moduleData = useModuleData()\n\tconst [searchFunction, setSearchFunction] = useState()\n\tconst searchRef = useRef()\n\tconst [searchBarValue, setSearchBarValue] = useState('')\n\t\n\tconst searchContext = moduleData.get('TouchPointSearchText')\n\t\n\tfunction focusSearchBar(){\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//ctrl f handler\n\tfunction keyDownHandler(e) {\n\t\tconst isCtrl = e.ctrlKey || e.metaKey\n\n\t\tif (isCtrl && e.keyCode === 70) {\n\t\t\te.preventDefault()\n\t\t\tfocusSearchBar()\n\t\t}\n\t}\n\t\n\t\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', keyDownHandler)\n\n\t\treturn (() => {\n\t\t\tmoduleData.clear()\n\t\t\twindow.removeEventListener('keydown', keyDownHandler)\n\t\t})\n\n\t}, [])\n\t\n\tuseEffect(()=>{\n\t\tsetSearchBarValue(searchContext ? searchContext : '')\n\t}, [searchContext])\n\t\n\t\n\t//search\n\tfunction searchHandler(){\n\t\tmoduleData.set('TouchPointSearchText', searchRef.current.value)\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t//clear\n\tfunction clearHandler() {\n\t\tmoduleData.set('TouchPointSearchText', '')\n\t\tsetSearchBarValue('')\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e) {\n\t\tclearTimeout(searchFunction)\n\t\t\n\t\tsetSearchBarValue(e.target.value)\n\n\t\tsetSearchFunction(setTimeout(() => {\n\t\t\tsearchHandler()\n\t\t}, 250))\n\t\t\n\t\tif(props.onChange){\n\t\t\tprops.onChange(e.target.value)\n\t\t}\n\t}\n\t\n\t//for nested components\n\tfunction customizeValue(newValue) {\n\t\tconst fakeEvent = {target: {value: newValue}}\n\t\tchangeHandler(fakeEvent)\n\t}\n\t\n\t\n\treturn(\n\t\t<span className=\"SearchBar\"> \n\t\t\t<TextBox \n\t\t\t\tlocked = {false}\n\t\t\t\tonChange= {changeHandler}\n\t\t\t\tonEnter = {searchHandler}\n\t\t\t\tplaceholder = \"Search\"\n\t\t\t\tvalue = {searchBarValue}\n\t\t\t\tinputRef = {searchRef}\n\t\t\t\tstyle = {props.style}\n\t\t\t\ttabIndex={props.tabIndex}\n\t\t\t/>\n\t\t\t\n\t\t\t{searchBarValue && props.nestedComponent ? <div \n\t\t\t\tclassName={props.alwaysShow ? 'searchComponentWrapper alwaysShow' : 'searchComponentWrapper'} \n\t\t\t\tstyle={props.nestedProps ? props.nestedProps.style : null}\n\t\t\t>\n\t\t\t\t\n\t\t\t\t{typeof (props.nestedComponent) == 'function' ? \n\t\t\t\t<props.nestedComponent {...props.nestedProps} searchBarValue={searchBarValue} setSearchBarValue={customizeValue}/> \n\t\t\t\t: props.nestedComponent}\n\t\t\t\t\n\t\t\t</div>: null}\n\t\t\t\n\t\t\t{searchBarValue ? <button className=\"searchButton\"\n\t\t\t\tonClick={clearHandler}\n\t\t\t>\n\t\t\t\t<FontAwesomeIcon icon={faTimesCircle} />\n\t\t\t</button> : null}\n\t\t</span>\n\t)\n}\n\n//Proptypes\nSearchBar.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonChange: PropTypes.func,\n\ttabIndex: PropTypes.any,\n\talwaysShow: PropTypes.bool,\n\tnestedComponent: PropTypes.any,\n\tnestedProps: PropTypes.object,\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by RadioGroup to connect all the radio buttons below\nconst radioContext = createContext({})\nexport default radioContext ","import React, { useContext, useState } from 'react'\nimport PropTypes from 'prop-types';\nimport lockedContext from '../../Contexts/LockedContext'\nimport radioContext from '../../Contexts/RadioContext'\nimport {v4 as uuid} from 'uuid'\n\n\nexport default function RadioGroup(props) {\n\t\n\t//decides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\tconst [groupName] = useState(uuid)\n\t\n\tfunction onChange(value){\n\t\tif(props.onChange){\n\t\t\tprops.onChange(value, props.groupID)\n\t\t}\n\t}\n\t\n\tconst radioData = {\n\t\tonChange: onChange,\n\t\tgroupName: groupName,\n\t\tlocked: locked,\n\t\tdefaultValue: props.defaultValue,\n\t\tvalue: props.value,\n\t}\n\t\n\treturn (\n\t\t<radioContext.Provider value={radioData}>\n\t\t\t{props.children}\n\t\t</radioContext.Provider>\n\t)\n}\n\n//Proptypes\nRadioGroup.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tgroupID: PropTypes.any,\n\tvalue: PropTypes.any,\n}\n\n","import React, {useContext, useState} from 'react'\nimport radioContext from '../../Contexts/RadioContext'\nimport PropTypes from 'prop-types'\nimport './RadioButton.css'\nimport {v4 as uuid} from 'uuid'\n\nexport default function RadioButton(props) {\n\t\n\tconst radioData = useContext(radioContext)\n\tconst [id] = useState(uuid)\n\t\n\tif(!radioData.onChange){\n\t\tconsole.error('Radio Buttons need to be inside a RadioGroup component.')\n\t}\n\t\n\tlet lockedClass = ''\n\tif (radioData.locked) { lockedClass = 'locked ' }\n\n\t//handles the clicking of the radio button - for locked radio buttons\n\tfunction clickHandler(e) {\n\t\tif (radioData.locked) {\n\t\t\te.preventDefault()\n\t\t\t\n\t\t} else{\n\t\t\tradioData.onChange(props.value)\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<span className={\"RadioButton flexY \" + lockedClass} style={props.style}>\n\t\t\t\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={radioData.value !== undefined ? undefined : radioData.defaultValue === props.value}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tname = {radioData.groupName}\n\t\t\t\tvalue = {props.value}\n\t\t\t\tstyle={props.buttonStyle}\n\t\t\t\tid = {id}\n\t\t\t\tchecked = {radioData.value !== undefined ? (radioData.value === props.value) : undefined}\n\t\t\t\treadOnly={radioData.value !== undefined}\n\t\t\t\ttabIndex={props.tabIndex}\n\t\t\t\tref = {props.inputRef}\n\t\t\t/>\n\t\t\t<label \n\t\t\t\tclassName = {lockedClass}\n\t\t\t\thtmlFor = {id}\n\t\t\t\tstyle={props.labelStyle}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{props.labelValue}\n\t\t\t</label>\n\t\t\t\n\t\t</span>\n\t)\n}\n\nRadioButton.propTypes = {\n\tvalue: PropTypes.any,\n\tstyle: PropTypes.object,\n\tlabelStyle: PropTypes.object,\n\tbuttonStyle: PropTypes.object,\n\ttabIndex: PropTypes.any,\n\tinputRef: PropTypes.object,\n}","import React, {useContext, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport './ControlBar.css'\nimport SearchBar from './SearchBar'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function ControlBar(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t\n\tif(props.searchBar){\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\" style = {props.style}>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"searchContainer\">\n\t\t\t\t\t\t<SearchBar {...props.searchBarProps}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"buttonContainer flexY\" >{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\t\n\t\t)\n\t\t\n\t} else{\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\" style={props.style}>\n\t\t\t\t\t<div className=\"buttonContainer\">{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\n\t\t)\n\t}\n}\n\n//Proptypes\nControlBar.propTypes = {\n\tsearchBar: PropTypes.bool,\n\tsearchBarProps: PropTypes.object,\n\tlocked: PropTypes.bool, \n\tstyle: PropTypes.object,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './CommentBox.css'\n\nexport default function CommentBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\tfunction blurHandler(e){\n\t\tif(!locked && props.onBlur){\n\t\t\tprops.onBlur(e)\n\t\t} \n\t}\n\t\n\t//For the onEnter event\n\tfunction keyPressHandler(e) {\n\t\tif (!locked && e.key === 'Enter' && props.onEnter !== undefined) {\n\t\t\te.preventDefault()\n\t\t\te.target.blur()\n\t\t\tprops.onEnter(e)\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<textarea\n\t\t\tclassName={\"input CommentBox \" + lockedClass + ' ' + props.className}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tplaceholder={props.placeholder}\n\t\t\tonBlur = {blurHandler}\n\t\t\tstyle = {props.style}\n\t\t\tvalue={props.value}\n\t\t\tmaxLength={props.maxLength}\n\t\t\tonKeyPress={keyPressHandler}\n\t\t\tautoFocus ={props.autoFocus}\n\t\t\tonFocus={props.onFocus}\n\t\t\tonBlur={props.onBlur}\n\t\t\ttabIndex={props.tabIndex}\n\t\t\tref={props.inputRef}\n\t\t></textarea>\n\t)\n}\n\n//Proptypes\nCommentBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\theight: PropTypes.string,\n\twidth: PropTypes.string,\n\tvalue: PropTypes.string,\n\tmaxLength: PropTypes.number,\n\tautoFocus: PropTypes.bool,\n\ttabIndex: PropTypes.any,\n\tonFocus: PropTypes.func,\n\tonBlur: PropTypes.func,\n\tinputRef: PropTypes.object,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './ComboBox.css'\nimport PropTypes from 'prop-types'\n\nexport default function ComboBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//if its locked, only allow the default option\n\tlet kids = props.children\n\tif(locked){\n\t\tkids = <option>{props.defaultValue}</option>\n\t}\n\t\n\t//If it's hidden, don't render anything\n\tif (props.hidden){return null} else{return(\n\t\t\t<select \n\t\t\t\tclassName={\"ComboBox input \" + lockedClass + ' ' + props.className} \n\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tdisabled = {locked}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tvalue = {props.value}\n\t\t\t\ttabIndex = {props.tabIndex}\n\t\t\t\tref={props.inputRef}\n\t\t\t>\n\t\t\t\t{kids}\n\t\t\t</select>\n\t)}\n}\n\n//\nComboBox.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tvalue: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdefaultValue: PropTypes.string,\n\ttabIndex: PropTypes.any,\n\tinputRef: PropTypes.object,\n}","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\n\nexport default function CheckBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//handles the clicking of the checkbox - for locked checkboxes\n\tfunction clickHandler(e){\n\t\tif(locked){\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<label className=\"CheckBox flexY\">\n\t\t\t<input \n\t\t\t\ttype=\"checkbox\" \n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={props.defaultValue}\n\t\t\t\tonChange={changeHandler}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tchecked = {props.checked}\n\t\t\t\treadOnly={props.checked !== undefined ? true : false}\n\t\t\t\ttabIndex={props.tabIndex}\n\t\t\t\tref={props.inputRef}\n\t\t\t/>\n\t\t\t<span className=\"checkmark\"></span>\n\t\t\t{props.label}\n\t\t</label>\n\t)\n}\n\nCheckBox.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tdefaultValue: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tchecked: PropTypes.bool,\n\ttabIndex: PropTypes.any,\n\tinputRef: PropTypes.object,\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//used by dropdown menus to talk to items inside of themselves \nconst menuContext = createContext({})\nexport default menuContext \n","import React, {useContext, useState} from 'react'\nimport ReactDOM from 'react-dom'\nimport lockedContext from '../../Contexts/LockedContext'\nimport menuContext from '../../Contexts/MenuContext'\nimport PropTypes from 'prop-types'\nimport './MenuButton.css'\nimport {Dropdown} from 'react-bootstrap'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faCaretRight} from '@fortawesome/free-solid-svg-icons'\n\nconst dropMenu = React.forwardRef(\n\t(props, ref) => {\n\t\tconst menuMaxWidth = props.menuStyle && props.menuStyle.width ? null : '180px'\n\t\t\n\t\treturn (\n\t\t\t<menuContext.Provider value={{submenu: true}}>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={props.className + ' Menu ' + props.menuClass}\n\t\t\t\t\tstyle={{maxWidth: menuMaxWidth, ...props.style, ...props.menuStyle}}\n\t\t\t\t\tonClick={props.onClickBody}\n\t\t\t\t>\n\t\t\t\t\t{typeof (props.MenuContent) == 'function' ? <props.MenuContent {...props.menuProps}/> : props.MenuContent}\n\t\t\t\t</div>\n\t\t\t</menuContext.Provider>\n\t\t)\n\t}\n)\n\nexport default function MenuButton(props){\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tlet lockedClass\n\tif(locked){lockedClass = 'locked'}\n\t\n\tconst [toggling, setToggling] = useState(false)\n\t\n\t//handles both onOpen and onClose\n\tfunction toggleHandler(isOpen){\n\t\t\n\t\tif(!toggling && isOpen && props.onOpen){\n\t\t\tprops.onOpen()\n\t\t\t\n\t\t} else if(!toggling && props.onClose && !isOpen){\n\t\t\tprops.onClose()\n\t\t\tsetToggling(true)\n\t\t}\n\t\t\n\t\t//Prevent spamming\n\t\tsetTimeout(()=>setToggling(false), 300)\n\t}\n\t\n\t//check if it's inside of another menu, if so render as a submenu\n\tconst parentMenuData = useContext(menuContext)\n\tconst icon = parentMenuData.submenu ? <span className='subMenuIcon'>\n\t\t\t<FontAwesomeIcon icon={faCaretRight} />\n\t</span> : null\n\n\t\n\tlet direction = props.direction\n\tif(parentMenuData.submenu){\n\t\tdirection = 'right'\n\t}\n\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\tconst notificationBadge = props.notifications && !locked ?\n\t\t<span className='notifications' style={props.notificationStyle}>{notifications}</span>\n\t\t: null\n\t\n\t//button\n\tconst dropButton = React.forwardRef(({onClick}, ref)=> { \n\t\t\n\t\tfunction clickHandler(e){\n\t\t\te.preventDefault() \n\t\t\tonClick(e)\n\t\t}\n\t\t\n\t\treturn( \n\t\t\t<button \n\t\t\t\tclassName={'MenuButton '+ props.className + ' ' + lockedClass}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tref={ref}\n\t\t\t\tstyle={props.style}\n\t\t\t\ttitle={props.title}\n\t\t\t>\n\t\t\t\t{notificationBadge}\n\t\t\t\t{props.children}\n\t\t\t\t{icon}\n\t\t\t\t\n\t\t\t</button>\n\t\t)\n\t})\n\t\n\t//Prevent submenus from sticking around after their parent has closed\n\tfunction onClickBody(){\n\t\tif(parentMenuData.submenu){\n\t\t\tdocument.body.click()\n\t\t}\n\t}\n\t\n\tif(props.hidden){return null}\n\t\n\t//If locked return a button that does nothing, otherwise create a real dropdown button\n\tif(locked){\n\t\t\n\t\treturn (<button\n\t\t\t\ttitle={props.title}\n\t\t\t\tclassName={'MenuButton ' + props.className + ' ' + lockedClass}\n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t\n\t\t\t{props.children}\n\t\t\t{icon}\n\n\t\t</button>)\n\t\t\n\t}\n\t\n\treturn(\n\t\t\n\t\t<span className = 'menuButtonContainer'>\n\t\t\t<Dropdown drop={direction} onToggle = {toggleHandler}>\n\t\t\t\t\n\t\t\t\t<Dropdown.Toggle as={dropButton}/>\n\t\t\t\t\n\t\t\t\t{ReactDOM.createPortal(<Dropdown.Menu \n\t\t\t\t\tas={dropMenu}\n\t\t\t\t\tMenuContent = {props.menuContent}\n\t\t\t\t\tmenuProps = {props.menuProps}\n\t\t\t\t\tmenuStyle = {props.menuStyle}\n\t\t\t\t\tonClickBody = {onClickBody}\n\t\t\t\t/>, document.body)}\n\t\t\t\t\n\t\t\t</Dropdown>\n\t\t</span>\n\t\t\n\t)\n}\n\n//Proptypes\nMenuButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tmenuContent: PropTypes.any.isRequired,\n\tmaxHeight: PropTypes.string,\n\tdirection: PropTypes.string,\n\tonOpen: PropTypes.func,\n\tonClose: PropTypes.func,\n\tmenuStyle: PropTypes.object,\n\tstyle: PropTypes.object,\n\tnotificationStyle: PropTypes.object,\n\tmenuProps: PropTypes.object,\n\ttitle: PropTypes.string,\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from '../Inputs/CoreButton'\nimport MenuButton from '../Display/MenuButton'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport './DockIcon.css'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function DockIcon(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst icon = props.faIcon ? <FontAwesomeIcon icon = {props.faIcon} /> : null\n\t\n\tconst iconStyle = {\n\t\tfontSize: props.title ? '17pt' : '20pt'\n\t}\n\t\n\tconst notifications = props.notifications < 99 ? props.notifications : '99+'\n\t\n\tconst notificationBadge = props.notifications && !locked ? \n\t<span className='notifications'>{notifications}</span> \n\t: null\n\t\n\tif(props.hidden){return null}\n\t\n\tif(props.menuContent){\n\t\tfunction openHandler(){\n\t\t\tif(props.onClick){props.onClick()}\n\t\t\tif(props.onOpen){props.onOpen()}\n\t\t}\n\t\t\n\t\treturn(\n\t\t\t<MenuButton\n\t\t\t\tclassName='DockIcon'\n\t\t\t\tstyle={props.style}\n\t\t\t\tlocked={props.locked}\n\t\t\t\tonOpen={openHandler}\n\t\t\t\tonClose={props.onClose}\n\t\t\t\tmenuContent={props.menuContent}\n\t\t\t\tdirection='left'\n\t\t\t\tmenuStyle={props.menuStyle}\n\t\t\t\tmenuProps = {props.menuProps}\n\t\t\t>\n\t\t\t\t{notificationBadge}\n\t\t\t\t<div className='pic' style={iconStyle}>{icon}{props.children}</div>\n\t\t\t\t<div className='title'>{props.title}</div>\n\t\t\t</MenuButton>\n\t\t)\n\t}\n\t\n\treturn (\n\t\t<CoreButton \n\t\t\tclassName = {props.active ? 'DockIcon active' : 'DockIcon'} \n\t\t\tstyle = {props.style} \n\t\t\tlocked = {props.locked}\n\t\t\tonClick = {props.onClick}\n\t\t>\n\t\t\t{notificationBadge}\n\t\t\t<div className='pic' style = {iconStyle}>{icon}{props.children}</div>\n\t\t\t<div className='title'>{props.title}</div>\n\t\t</CoreButton>\n\t)\n}\n\n//proptypes\nDockIcon.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tstyle: PropTypes.object,\n\tnotifications: PropTypes.number,\n\tonClick: PropTypes.func,\n\tmenuContent: PropTypes.any,\n\tmenuStyle: PropTypes.object,\n\tmenuProps: PropTypes.object,\n\tactive: PropTypes.bool,\n}\n\n","import React, {useContext} from 'react'\nimport './InfoCard.css'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport CloseButton from '../Inputs/CloseButton'\n\nexport default function InfoCard(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t//Assign classes based on props \n\tlet stripe = ''\n\tconst hasStripe = props.stripe || props.stripeColor\n\tif(hasStripe && !props.titleBar){stripe = 'stripe'}\n\t\n\t//Adds hover and click effects\n\tconst dynamic = !locked && props.onClick ? 'dynamicX' : ''\n\t\n\t//handles the onClick event. Only fires if the component is not locked\n\tfunction clickHandler(e){\n\t\tif(!locked && props.onClick !== undefined){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tfunction closeHandler(e){\n\t\te.stopPropagation()\n\t\tprops.onClose()\n\t}\n\t\n\t//If a title prop is provided, create an H1\n\tlet titleBar\n\tif(props.title){\n\t\ttitleBar = <h1\n\t\t\tstyle={{color: props.stripeColor}}\n\t\t>{props.title}</h1>\n\t}\n\t\n\tlet closeButton\n\tif(props.onClose){\n\t\tcloseButton = <CloseButton onClick = {closeHandler}></CloseButton>\n\t}\n\t\n\tconst stripeStyle = props.stripeColor ? {\n\t\tborderLeftColor: props.stripeColor \n\t} : undefined\n\t\t\n\t//if 'hidden' prop is true then dont show the component\n\tif(props.hidden){return null} else{\n\t\t\n\t\treturn (\n\t\t\t<div \n\t\t\t\tclassName={\"InfoCard \" + dynamic + ' ' + props.className} \n\t\t\t\tonClick = {clickHandler} \n\t\t\t\tstyle = {props.style}\n\t\t\t>\n\t\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"cardContainer\" style = {props.innerStyle}>\t\n\t\t\t\t\t\t<div className={\"textBox \" + stripe} style = {stripeStyle}>\n\t\t\t\t\t\t\t{closeButton}\n\t\t\t\t\t\t\t{titleBar}\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n//Proptypes\nInfoCard.propTypes = {\n\ttitle: PropTypes.string,\n\tstripe: PropTypes.bool,\n\tdynamicX: PropTypes.bool,\n\tdynamicY: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tclassName: PropTypes.string,\n\tonClose: PropTypes.func,\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n\tstripeColor: PropTypes.string,\n}","import React, {useContext, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\nimport InfoCard from '../Containers/InfoCard'\nimport './PopupCard.css'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function PopupCard(props) {\n\tconst system = useSystem()\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\t//Clicking the background closes the popup\n\tlet handleCloseButton\n\tif(!props.forceOpen){\n\t\thandleCloseButton = () => {\n\t\t\tif(!props.forceOpen){\n\t\t\t\tsystem.Popup.close()\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tuseEffect(()=>{\n\t\tif(props.onOpen){ props.onOpen() }\n\t\t\n\t\tfunction handlKeypress(e){\n\t\t\tif (e.key === 'Escape' && !props.forceOpen){\n\t\t\t\tsystem.Popup.close()\n\t\t\t}\n\t\t}\n\t\t\n\t\tdocument.addEventListener('keydown', handlKeypress)\n\t\t\n\t\treturn(()=>{\n\t\t\tif(props.onClose){ props.onClose() }\n\t\t\tdocument.removeEventListener('keydown', handlKeypress)\n\t\t})\n\t\t\n\t},[])\n\t\n\t\n\tconst content = <lockedContext.Provider value={locked}>\n\t\t\n\t\t\t<InfoCard\n\t\t\t\tclassName={'PopupCard '}\n\t\t\t\tstripe\n\t\t\t\ttitle={props.title}\n\t\t\t\tonClose={handleCloseButton}\n\t\t\t\tstyle={{ height: 'auto', ...props.style }}\n\t\t\t\tinnerStyle={{ borderColor: props.stripeColor, ...props.innerStyle }}\n\t\t\t\tstripeColor={props.stripeColor}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</InfoCard>\n\t</lockedContext.Provider>\n\t\n\tif(props.forceOpen){return (<div className={'popupBlockClicks'}>{content}</div>)}\n\treturn content\n}\n\n//Proptypes\nPopupCard.propTypes = {\n\ttitle: PropTypes.string,\n\tonClose: PropTypes.func,\n\tonOpen: PropTypes.func,\n\tforceOpen: PropTypes.bool,\n\twidth: PropTypes.string,\n\theight: PropTypes.string,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n}","import React, { useRef } from 'react'\n\nexport default function FilterMenu(props){\n\n\tconst values = props.header.uniqueValues\n\tconst selectAllRef = useRef({})\n\t\n\tfunction clickHandler(val){\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\tnewHeaders[props.header.index].uniqueValues[val] = !newHeaders[props.header.index].uniqueValues[val]\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction selectAll(e){\n\t\tconst cb = selectAllRef.current\n\t\tif (e.target !== cb) { cb.checked = !cb.checked }\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\n\t\tif(cb.checked){\n\t\t\tnewHeaders[props.header.index].clearFilter()\n\t\t} else{\n\t\t\tnewHeaders[props.header.index].selectAll(cb.checked)\n\t\t}\n\t\t\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\tlet count = -1\n\tconst lim = 200\n\t\n\tif(!props.noFilter){ return (\n\t\t<div className = 'FilterMenu'>\n\t\t\t\n\t\t\t<div className='stickyMenu'>\n\t\t\t\t\n\t\t\t\t<button onClick={selectAll} className = 'selectAll fullButton compactText'>\n\t\t\t\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={!props.header.hasFilter()}\n\t\t\t\t\t\tref={selectAllRef}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span style={spanStyle}>{'Select All'}</span>\n\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t{Object.keys(values).map((v, i) => {\n\t\t\t\tcount++\n\t\t\t\t\n\t\t\t\t//Limit the number of checkboxes that are rendered to 200\n\t\t\t\tif(count < lim){return (<button\n\t\t\t\t\tclassName = {'fullButton compactText'}\n\t\t\t\t\tkey={props.header.id + 'fv' + count}\n\t\t\t\t\tonClick={(e) => clickHandler(v)}\n\t\t\t\t\ttitle = {props.header.format(v)}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype = 'checkbox'\n\t\t\t\t\t\tchecked = {values[v]}\n\t\t\t\t\t\tid={props.header.headerID + 'fcb' + i}\n\t\t\t\t\t\tvalue = {v}\n\t\t\t\t\t\tstyle= {{cursor:'pointer'}}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span \n\t\t\t\t\t\tstyle={spanStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{v !== 0 && ((!v) || (v.toString() === 'undefined')) ? 'Blank' : props.header.format(v)}\n\t\t\t\t\t</span>\n\t\t\t\t\t\n\t\t\t\t</button>)} else return null\n\t\t\t\t\n\t\t\t})}\n\t\t\t\n\t\t\t{count >= lim ? <button>... {count - lim} More</button> : null}\n\t\t\t\t\n\n\t\t</div>\n\t)} else return null\n}","import moment from 'moment'\n\nexport default class DataFilter{\n\t\n\tconstructor(options){\n\t\tthis.options = options\n\t\tthis.displayName = options.type\n\t\tthis.filter = DataFilter.getFilterTypes()[options.id] ? DataFilter.getFilterTypes()[options.id].func : ()=>{return true}\n\t\tthis.displayName = DataFilter.getFilterTypes()[options.id].displayName\n\t\tthis.args = DataFilter.getFilterTypes()[options.id].args\n\t\tthis.options.value = options.value.toString().toLowerCase()\n\t}\n\t\n\t\n\tfunc(val){\n\t\ttry{\n\t\t\treturn(this.filter(val, this.options))\n\t\t} catch(err){\n\t\t\treturn false\n\t\t}\n\t}\n\t\n\t\n\tstatic getFilterTypes(){\n\t\t\n\t\treturn {\n\t\t\t\n\t\t\tincludes: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Search',\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tdoesNotInclude: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn !val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: \"Doesn't Include\",\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tlessThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val < options.value || moment(val).isBefore(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Less than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\n\t\t\tgreaterThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val > options.value || moment(val).isAfter(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Greater than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\t\t\t\n\t\t\tequals: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() == options.value || moment(val).isSame(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Equals',\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\n\t\t\tdoesNotEqual: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() != options.value && !moment(val).isSame(options.value, 'day')\n\t\t\t\t}, \n\t\t\t\tdisplayName: \"Doesn't Equal\",\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\t\t\t\n\t\t}\n\t\t\n\t}\n}","import React, { useState, useEffect } from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function MoreFilterButtonActive(props) {\n\t\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.header.filterList[props.filterID] && props.header.filterList[props.filterID].options.value ? \n\t\tprops.header.format(props.header.filterList[props.filterID].options.value) : ''\n\t)\n\t\n\tfunction changeHandler(e) {\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\n\t\tnewHeaders[props.header.index].addFilter({\n\t\t\tid: props.filterID,\n\t\t\tvalue: currentValue\n\t\t})\n\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction cancelHandler(){\n\t\t\n\t\tprops.setActive(false)\n\t\t\n\t\t//if filter exists, remove it\n\t\tif (props.header.filterList[props.filterID]){\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].removeFilter(props.filterID)\n\t\t\tprops.dataHeaders.set(newHeaders)\n\n\t\t}\n\n\t\tprops.data.filter()\n\t}\n\t\n\tfunction keyDownHandler(e){\n\t\tif(e.key === 'Enter'){\n\t\t\te.target.blur()\n\t\t\tdocument.body.click()\n\t\t} \n\t}\n\t\n\t\n\tfunction blurHandler(e){\n\t\tif (currentValue.trim() === ''){\n\t\t\tcancelHandler()\n\t\t} else{\n\t\t\tcommitHandler()\n\t\t}\n\t}\n\t\n\treturn(\n\t\t<button \n\t\t\tclassName='MoreFilterButtonActive disabled' \n\t\t>\n\t\t\t\n\t\t\t<span className = 'tag'>{props.filter.displayName}</span>\n\t\t\t<br/>\n\t\t\t\n\t\t\t<input \n\t\t\t\tclassName = {'input wrap'}\n\t\t\t\tautoFocus\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tvalue={currentValue}\n\t\t\t\tonKeyDown = {keyDownHandler}\n\t\t\t\tonBlur={blurHandler}\n\t\t\t/>\n\t\t\t\n\t\t\t<span className='cancelIcon' onClick={cancelHandler} >\n\t\t\t\t<FontAwesomeIcon icon={faTimes} />\n\t\t\t</span>\n\t\t\t\n\t\t</button>\n\t)\n}","import React, {useState, useEffect} from 'react'\nimport MoreFilterButtonActive from './MoreFilterButtonActive'\n\nexport default function MoreFilterButton(props) {\n\t\n\tconst [active, setActive] = useState(props.header.filterList[props.filterID] ? true : false)\n\t\n\tfunction activate(){\n\t\tif(!active){\n\t\t\tsetActive(true)\n\t\t\t\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].addFilter({\n\t\t\t\tid: props.filterID,\n\t\t\t\tvalue: ''\n\t\t\t})\n\t\t\t\n\t\t\tprops.dataHeaders.set(newHeaders)\n\t\t}\n\t}\n\t\n\tuseEffect(() => {\n\t\tconst newActive = props.header.filterList[props.filterID] ? true : false\n\t\tif (active !== newActive) { setActive(newActive) }\n\t})\n\t\n\tif(!active){return(\n\t\t<button onClick = {activate} className = 'MoreFilterButton'>\n\t\t\t<span style = {{paddingRight: '10px'}}>{props.filter.displayName}</span>\n\t\t</button>\n\t\t\n\t)} else{ return(\n\t\t\n\t\t<MoreFilterButtonActive\n\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t\tfilter = {props.filter}\n\t\t\tfilterID = {props.filterID}\n\t\t\theader = {props.header}\n\t\t\tsetActive = {setActive}\n\t\t\tactive = {active}\n\t\t/>\n\t\t\n\t)}\n}","import React from 'react'\nimport DataFilter from '../../../DataObjects/DataFilter'\nimport './MoreFilterButton'\nimport MoreFilterButton from './MoreFilterButton'\n\nexport default function MoreFilters(props) {\n\t\n\tconst filterList = DataFilter.getFilterTypes()\n\t\n\tif (props.header.type !== 'tags' && !props.noFilter){return (\n\t\t<div className = 'MoreFilters'>\n\t\t\t\n\t\t\t{Object.keys(filterList).map((f, i)=>{\n\t\t\t\t\n\t\t\t\tif (filterList[f].availableTo.includes(props.header.type)){\n\t\t\t\t\t\n\t\t\t\t\treturn <MoreFilterButton \n\t\t\t\t\t\tkey = {'MoreFilterButton' + i}\n\t\t\t\t\t\tfilter = {filterList[f]}\n\t\t\t\t\t\tfilterID = {f}\n\t\t\t\t\t\theader = {props.header}\n\t\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\t\tdata = {props.data}\n\t\t\t\t\t\topenTrigger = {props.openTrigger}\n\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t} else return null\n\t\t\t})}\n\t\t\t\n\t\t</div>\n\t)} else return null\n}","import React from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function SortMenu(props){\n\t\n\tfunction sortData(e){\n\t\tprops.dataHeaders.addSortRule(props.header.headerID, e.target.value, props.header.index)\n\t\tprops.data.sort()\n\t}\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\tconst sortDir = sortRule ? sortRule.direction : ''\n\n\tconst cancelIcon = <span className = 'sortIcon' onClick={(e)=>{\n\t\tprops.dataHeaders.removeSortRule(props.header.headerID)\n\t\tprops.data.sort()\n\t\te.stopPropagation()\n\t}}>\n\t\t<FontAwesomeIcon icon={faTimes} />\n\t</span>\n\t\n\tif(props.header.type !== 'tags' && !props.noSort){return (\n\t\t<div className='SortMenu' >\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'asc'}>\n\t\t\t\tSort Ascending\n\t\t\t\t{sortDir === 'asc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t\t\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'desc'}>\n\t\t\t\tSort Descending\n\t\t\t\t{sortDir === 'desc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t</div>\n\t)} else return null\n}\n","import React from 'react'\nimport './TheadMenu.css'\nimport FilterMenu from './FilterMenu'\nimport MoreFilters from './MoreFilters'\nimport SortMenu from './SortMenu'\n\n\nexport default function TheadMenu(props) {\n\t\n\t\n\treturn (\n\t\t<div className = {'TheadMenu ' + 'tpui' + props.header.type}>\n\t\t\t<FilterMenu\n\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\theader={props.header}\n\t\t\t\tdata={props.data}\n\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t/>\n\t\t\t\n\t\t\t<div className='sideMenu' style={{ width: props.noFilter ? '100%' : null }}>\n\t\t\t\t\n\t\t\t\t<SortMenu \n\t\t\t\t\tdata = {props.data}\n\t\t\t\t\theader = {props.header}\n\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<MoreFilters\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoFilter={props.noFilter}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faCaretDown, faFilter, faSortAlphaDown, faSortAlphaDownAlt} from '@fortawesome/free-solid-svg-icons'\nimport TheadMenu from './TheadMenu'\nimport './TheadMenu'\n\nexport default function TheadButton(props){\n\t\n\t//if there is a menu, add a dropdown icon\n\tlet arrowIcon = <span className='theadIcon'><FontAwesomeIcon icon={faCaretDown}/></span>\t\n\tlet filterIcon\n\tlet sortIcon\n\t\n\tconst hasFilter = props.header.hasFilter()\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\t\t\n\tif(sortRule){\n\t\tarrowIcon = null\n\t\tsortIcon = sortRule.direction === 'asc' ?\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDown} /></span> :\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDownAlt} /></span>\n\t}\n\t\n\t\n\tif (hasFilter) {\n\t\tarrowIcon = null\n\t\tfilterIcon = <span className='smallIcon' style={{\n\t\t\tpaddingLeft: '5px',\n\t\t}}><FontAwesomeIcon icon={faFilter} /></span>\n\t}\n\t\n\t//changes every time the menu opens. Used by useEffect listeners in the menu to respond to the open event\n\tconst [openTrigger, setOpenTrigger] = useState(false) \n\tconst [isOpen, setIsOpen] = useState(false)\n\t\n\tconst openClass = isOpen ? ' open ' : ''\n\t\n\tif(props.noSort && props.noFilter) { \n\t\t\n\t\treturn(props.children)\n\t\t\n\t} else{\n\t\treturn (\n\t\t\t<MenuButton \n\t\t\t\tclassName={'TheadButton '  + openClass} \n\t\t\t\tlocked = {false} \n\t\t\t\tonOpen = {()=>{\n\t\t\t\t\tsetOpenTrigger(!openTrigger)\n\t\t\t\t\tsetIsOpen(true)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tonClose = {()=>{\n\t\t\t\t\tprops.data.generateMetadata({noSort: true, noSearch: true})\n\t\t\t\t\tsetIsOpen(false)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tmenuContent={<TheadMenu\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t\t/>}\n\t\t\t\t\n\t\t\t\tmenuStyle = {{\n\t\t\t\t\tmaxWidth: props.noFilter ? '180px' : '400px', \n\t\t\t\t\tmaxHeight: '310px'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{arrowIcon}\n\t\t\t\t{sortIcon}\t\t\n\t\t\t\t{filterIcon}\t\t\t\t\n\t\t\t</MenuButton>\n\t\t)\n\t}\n}","import React from 'react'\nimport Proptypes from 'prop-types'\nimport {v4 as uuid} from 'uuid'\n\nexport default function CheckButton(props) {\n\t\n\tconst checkID = uuid()\n\t\n\tfunction clickHandler(e, id) {\n\t\tif(!props.disabled){\n\t\t\tconst cb = document.getElementById(id)\n\t\t\tif (e.target !== cb) {cb.checked = !cb.checked}\n\t\t\t\n\t\t\tif(props.onClick){props.onClick(cb.checked, props.value)}\n\t\t}\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\treturn (<button\n\t\tonClick={(e) => clickHandler(e, checkID)}\n\t\tstyle ={{color: 'var(--mainTextColor)'}}\n\t>\n\n\t\t<input\n\t\t\ttype='checkbox'\n\t\t\tdefaultChecked={props.defaultChecked}\n\t\t\tid={checkID}\n\t\t\tvalue={props.value}\n\t\t\tstyle={{cursor: 'pointer', }}\n\t\t\tdisabled = {props.disabled}\n\t\t\tchecked = {props.checked}\n\t\t\treadOnly = {props.checked !== undefined ? true : false}\n\t\t/>\n\t\t<span style={spanStyle}>{props.children}</span>\n\t\t\n\n\t</button>)\n\t\n}\n\n\nCheckButton.propTypes={\n\tdefaultChecked: Proptypes.bool,\n\tvalue: Proptypes.any,\n\tlabel: Proptypes.string,\n\tonClick: Proptypes.func,\n\tdisabled: Proptypes.bool,\n\tchecked: Proptypes.bool,\n}","import React from 'react'\nimport CheckButton from './CheckButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faColumns} from '@fortawesome/free-solid-svg-icons'\nimport MenuButton from '../MenuButton'\n\nexport default function ColumnSettings(props) {\n\n\tfunction clickHandler(checked, idx){\n\t\tprops.headers.setVisible(idx, checked)\n\t}\n\t\n\tfunction applyHandler(){\n\t\tprops.data.sort()\n\t}\n\t\n\treturn (<MenuButton \n\t\t\tlocked={false} \n\t\t\tmenuStyle={{\n\t\t\t\tmaxHeight: '300px',\n\t\t\t\tmaxWidth: '300px'\n\t\t\t}}\n\t\t\tonClose={applyHandler}\n\t\t\tmenuContent={\n\t\t\t\t<div style={{ overflowY: 'auto', overflowX: 'hidden'}}>\n\t\t\t\t\t{props.headers.get().map((h) => {\n\t\t\t\t\t\tif(h.displayName){\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<CheckButton\n\t\t\t\t\t\t\t\t\tkey={'customizeHeader' + h.headerID}\n\t\t\t\t\t\t\t\t\tdisabled={h.required}\n\t\t\t\t\t\t\t\t\tchecked={h.visible}\n\t\t\t\t\t\t\t\t\tvalue={h.index}\n\t\t\t\t\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t\t\t\t\t>{h.displayName}</CheckButton>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}else return null\n\t\t\t\t\t\t\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t}>\n\t\t\t<FontAwesomeIcon icon={faColumns} /> Column Settings\n\t</MenuButton>\n\t\t\n\t)\n}","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faWindowRestore, faCheck, faTimes} from '@fortawesome/free-solid-svg-icons'\nimport './SaveTableLayout.css'\nimport ConfirmButton from '../../Inputs/ConfirmButton'\n\nexport default function SaveTableLayout(props) {\n\t\n\tconst [saveName, setSaveName] = useState('')\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction changeHandler(e){\n\t\tsetSaveName(e.target.value)\n\t\tsetValidClass('')\n\t}\n\t\n\tconst savedLayouts = props.headers.getSavedLayouts()\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst nameExists = Object.values(savedLayouts).some((f)=>{\n\t\t\treturn f.name === saveName\n\t\t})\n\t\t\n\t\tif(saveName.trim() !== '' && !nameExists){\n\t\t\tsetSaveName('')\n\t\t\tprops.headers.saveLayout(saveName)\n\t\t} else{\n\t\t\tsetValidClass('invalid')\n\t\t}\t\n\t}\n\t\n\tfunction keyDownHandler(e) {\n\t\tif (e.key === 'Enter') {\n\t\t\tcommitHandler()\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\t\n\tfunction applyLayout(f){\n\t\tprops.headers.loadLayout(f)\n\t\tprops.data.sort()\n\t}\n\t\n\treturn (\n\t\t<MenuButton\n\t\t\tlocked={false}\n\t\t\tonClose={() => setValidClass('')}\n\t\t\tmenuStyle = {{width: '250px'}}\n\t\t\tmenuContent={\n\t\t\t\t<div className='SaveTableLayout'>\n\n\t\t\t\t\t<div className='inputMenu'>\n\t\t\t\t\t\t<span>Save Current Layout</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input className={'input ' + validClass}\n\t\t\t\t\t\t\tvalue={saveName}\n\t\t\t\t\t\t\tonChange={changeHandler}\n\t\t\t\t\t\t\tonKeyDown={keyDownHandler}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"commitIcon\" onClick={commitHandler}>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCheck} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t{Object.keys(savedLayouts).map((f) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName = {'layoutButton'}\n\t\t\t\t\t\t\t\tkey = {'saveLayoutButton' + f}\n\t\t\t\t\t\t\t\tonClick={()=>{applyLayout(f)}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<ConfirmButton \n\t\t\t\t\t\t\t\t\tclassName='cancelIcon'\n\t\t\t\t\t\t\t\t\tonClick = {(e)=>{\n\t\t\t\t\t\t\t\t\t\tprops.headers.deleteLayout(f)\n\t\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontent = {<FontAwesomeIcon icon={faTimes} />}\n\t\t\t\t\t\t\t\t\texpandedContent = {'Delete'}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: 'var(--cardBG)',\n\t\t\t\t\t\t\t\t\t\tcolor: 'var(--lockedTextColor)',\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tlocked = {false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<span className = 'layoutButtonText'>{savedLayouts[f].name}</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\n\n\t\t\t\t</div>\n\n\t\t\t}>\n\t\t\t\t\n\t\t\t<span className=''>\n\t\t\t\t<FontAwesomeIcon icon={faWindowRestore} />\n\t\t\t</span> Saved Layouts\n\t\t</MenuButton>\n\t)\n}","import React from 'react'\nimport ColumnSettings from './ColumnSettings'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {faTimesCircle, faPlus, faMinus} from '@fortawesome/free-solid-svg-icons'\nimport SaveTableLayout from './SaveTableLayout'\n\n\nexport default function TableControls(props) {\n\tlet clearFilterButton = null\n\tlet layoutButton = null\n\tlet settingsButton = null\n\tlet expandControls\n\t\n\tif (props.hasFilter && !props.noFilter) {\n\t\tclearFilterButton = <button\n\t\t\tonClick={props.clearFilter}\n\t\t><FontAwesomeIcon icon={faTimesCircle} /> Clear Filter</button>\n\t}\n\n\tif (!props.noFilter && !props.noSort && !props.noOptions) {\n\t\tlayoutButton = <SaveTableLayout \n\t\t\theaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t/>\n\t}\n\t\n\tif (!props.noOptions) {\n\t\tsettingsButton = <ColumnSettings\n\t\t\theaders={props.dataHeaders}\n\t\t\tdata={props.data}\n\t\t/>\n\t}\n\t\n\tif(props.showExpandControls){\n\t\texpandControls = <>\n\t\t\t<button onClick={()=>{\n\t\t\t\tconst newExpanded = { ...props.expandedRows }\n\t\t\t\tObject.keys(newExpanded).map(k => {\n\t\t\t\t\tnewExpanded[k] = true\n\t\t\t\t})\n\t\t\t\tprops.setExpandedRows(newExpanded)\n\t\t\t}}><FontAwesomeIcon icon={faPlus} /> Expand All</button>\n\t\t\t\n\t\t\t<button onClick={()=>{\n\t\t\t\tconst newExpanded = {...props.expandedRows}\n\t\t\t\tObject.keys(newExpanded).map(k=>{\n\t\t\t\t\tnewExpanded[k]=false\n\t\t\t\t})\n\t\t\t\tprops.setExpandedRows(newExpanded)\n\t\t\t}}><FontAwesomeIcon icon={faMinus} /> Collapse All</button>\n\t\t</>\n\t}\n\t\n\t\n\n\treturn (\n\t\t<div className='tableControls'>\n\t\t\t{settingsButton}\n\t\t\t{layoutButton}\n\t\t\t{expandControls}\n\t\t\t{clearFilterButton}\n\t\t</div>\n\t)\n}","import {useEffect, useRef} from 'react'\nimport useSystem from './UseSystem'\n\nexport default function useSettings(settingsID, applySettings){\n\tconst {get, save} = useSystem().Settings\n\t\n\tconst debouncer = useRef()\n\t\n\tuseEffect(() => {\n\t\tconst fetchAndApply = async () => {\n\t\t\ttry{\n\t\t\t\tconst token = await get(settingsID)\n\t\t\t\tapplySettings(token)\n\t\t\t} catch(err){\n\t\t\t\t// console.error(err)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(settingsID){fetchAndApply()}\n\t}, [])\n\t\n\t\n\treturn (newToken) => {\n\t\t//Prevent creating many tokens too fast\n\t\tclearTimeout(debouncer.current)\n\t\t\n\t\tdebouncer.current = setTimeout(() => {\n\t\t\tsave(settingsID, newToken)\n\t\t}, 2000)\n\t}\n}","import React, {useEffect} from 'react'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons'\n\nexport default function PageContols(props) {\n\t\n\tconst showPageBack = props.activePage > 0\n\tconst showPageForward = ((props.activePage + 1) * props.pageSize) < props.dataLength\n\t\n\t//If the data gets shorter than the active page then go back to page 1\n\tuseEffect(() => {\n\t\tconst lastRow = (props.activePage + 1) * props.pageSize\n\t\tconst diff = props.dataLength - lastRow\n\t\t\n\t\tif(diff + props.pageSize < 0){\n\t\t\tprops.setActivePage(0)\n\t\t}\n\t})\n\t\n\tif(!props.pageSize){\n\t\treturn null\n\t}\n\t\n\tfunction pageBack() {\n\t\tif (showPageBack) {\n\t\t\tprops.setActivePage(props.activePage - 1)\n\t\t\tprops.tableRef.current.scrollTop = 0\n\t\t}\n\t}\n\t\n\t\n\tfunction pageForward() {\n\t\tif (showPageForward) {\n\t\t\tprops.setActivePage(props.activePage + 1)\n\t\t\tprops.tableRef.current.scrollTop = 0\n\t\t}\n\t}\n\t\n\t\n\tif(!props.pageSize){return null}\n\t\n\treturn (<div className=\"pageControls\" style={{\n\t\tpaddingTop: props.dataLength > props.pageSize ? null : '5px'\n\t}}>\n\t\t\n\t\t{showPageBack ? \n\t\t\t<button onClick={pageBack}><FontAwesomeIcon icon={faCaretLeft} /></button> \n\t\t: null}\n\t\t\n\n\t\t<button className='textButton'>Showing {1 + props.activePage * props.pageSize}-\n\t\t{Math.min((1 + props.activePage) * props.pageSize, props.dataLength) + ' '}\n\t\tof {`  ${props.dataLength}`}</button>\n\t\t\n\n\t\t{showPageForward ?\n\t\t\t<button onClick={pageForward}><FontAwesomeIcon icon={faCaretRight} /></button>\n\t\t:null}\n\t\t\n\t</div>)\n\t\t\n\t\n}\n","import React, {useEffect, useState} from 'react'\nimport DatePicker from \"react-datepicker\"\nimport \"react-datepicker/dist/react-datepicker.css\"\nimport MenuButton from '../MenuButton'\nimport { faCalendar } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nexport default function DateCell(props) {\n\t\n\tconst [selectedDate, setSelectedDate] = useState(()=>{\n\t\treturn props.initalValue ? new Date(props.header.parse(props.initalValue)) : new Date()\n\t})\n\t\n\tfunction dateSelectHandler(d){\n\t\tprops.selectHandler({target:{\n\t\t\tvalue: props.header.format(d)\n\t\t}})\n\t\t\n\t\tsetSelectedDate(d)\n\t}\n\t\n\tfunction openHandler(){\n\t\tsetSelectedDate(\n\t\t\tprops.currentValue ? new Date(props.header.parse(props.currentValue)) : new Date()\n\t\t)\n\t}\n\n\treturn (\n\t\t<span className='dateCellWrapper'>\n\t\t\t<input\n\t\t\t\tclassName={'InputCell input ' + props.validClass}\n\t\t\t\tonKeyDown={props.keyHandler}\n\t\t\t\tonFocus={props.focusHandler}\n\t\t\t\tvalue={props.currentValue}\n\t\t\t\tonChange={props.changeHandler}\n\t\t\t\tonBlur={() => props.commitChanges()}\n\t\t\t/>\n\n\t\t\t<MenuButton  onOpen ={openHandler} style={{ opacity: '50%' }} menuStyle={{ height: 'fit-content', width: 'fit-content' }} menuContent={\n\t\t\t\t<div className='dateCellMenu'>\n\t\t\t\t\t<DatePicker\n\t\t\t\t\t\tselected={selectedDate}\n\t\t\t\t\t\tonChange={dateSelectHandler}\n\t\t\t\t\t\tinline\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t}><FontAwesomeIcon icon={faCalendar} /></MenuButton>\n\n\t\t</span>\n\t)\n}\n","import React, {useState, useEffect, useRef} from 'react'\nimport './InputCell.css'\nimport DateCell from './DateCell'\n\n\nexport default function InputCell(props) {\n\t\n\tconst [initalValue, setInitialValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\t// Update the value if the data is changed by an outside source\n\tuseEffect(() => {\n\t\tconst newVal = props.dataRow[props.header.headerID] ? props.dataRow[props.header.headerID] : ''\n\t\tsetCurrentValue(props.header.format(newVal))\n\t\tsetInitialValue(newVal)\n\t\t\n\t}, [ props.dataRow[props.header.headerID] ])\n\t\n\t//When you focus on an item, the value is saved. if you escape, its restored\n\tfunction focusHandler(e){\n\t\tsetInitialValue(e.target.value)\n\t}\n\t\n\tconst escRef = useRef(false)\n\t\n\t//Handles keypresses, for enter or esc keys\n\tfunction keyHandler(e){\n\t\tif(e.keyCode === 27) { //esc\n\t\t\tsetCurrentValue(initalValue)\n\t\t\tescRef.current = true\n\t\t\te.target.blur()\n\t\t} else if(e.keyCode === 13){ //enter\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction flashRed(){\n\t\tsetValidClass('invalid')\n\t\tsetTimeout(()=>setValidClass(''), 200)\n\t}\n\t\n\tfunction flashGreen() {\n\t\tsetValidClass('valid')\n\t\tsetTimeout(() => setValidClass(''), 0)\n\t}\n\t\n\t//Chaches the value and updates the dataset when you're done editing\n\tfunction selectHandler(e) {\n\t\tsetCurrentValue(e.target.value)\n\t\tcommitChanges(e.target.value)\n\t}\n\t\n\t//Check if the input is valid and commit\n\tasync function commitChanges(val){\n\t\t\n\t\tconst newValue = val ? val : currentValue\n\t\t\n\t\tif(escRef.current){\n\t\t\tescRef.current = false\n\t\t\treturn\n\t\t}\n\t\t\n\t\tconst override = {value: false, newRow: {}}\n\t\t\n\t\tfunction customSetRow(newRow){\n\t\t\tprops.setRow(newRow)\n\t\t\toverride.value = true\n\t\t\toverride.newRow = newRow\n\t\t}\n\t\t\n\t\ttry{\n\t\t\tif (props.header.compare(props.dataRow[props.header.headerID], newValue)) { return }\n\t\t\tconst newCellValue = props.header.parse(newValue)\n\t\t\t\n\t\t\t//Preview of what the row will look like if the update goes through\n\t\t\tconst cloneRow = JSON.parse(JSON.stringify(\n\t\t\t\tprops.dataset.read()[props.rowIndex]\n\t\t\t))\n\t\t\tcloneRow[props.header.headerID] = newCellValue\n\t\t\t\n\t\t\tconst res = await props.header.onEdit({\n\t\t\t\tcellValue: newCellValue, \n\t\t\t\trow: cloneRow, \n\t\t\t\toldCellValue: initalValue, \n\t\t\t\toldRow: props.dataset.read()[props.rowIndex],\n\t\t\t\tsetRow: customSetRow,\n\t\t\t\tparse: props.header.parse\n\t\t\t})\n\t\t\t\n\t\t\tif(res || res === undefined){\n\t\t\t\tif(override.value){//if the onEdit handler is assuming control, don't edit the dataset in here\n\t\t\t\t\tsetCurrentValue(props.header.format(override.newRow[props.header.headerID]))\n\t\t\t\t} else{\n\t\t\t\t\tconst newRow = { ...props.dataset.read()[props.rowIndex]}\n\t\t\t\t\tnewRow[props.header.headerID] = newCellValue\n\t\t\t\t\tprops.setRow(newRow)\n\t\t\t\t\tsetCurrentValue(props.header.format(newCellValue))\n\t\t\t\t}\n\t\t\t\tflashGreen()\n\t\t\t} else{\n\t\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\t\tflashRed()\n\t\t\t}\n\t\t\t\n\t\t} catch (err){\n\t\t\tconsole.error(err)\n\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\tflashRed()\n\t\t}\n\t}\n\t\n\t//Chaches the value and updates the dataset when you're done editing\n\tfunction changeHandler(e) {\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\t//Datebox cells\n\tif(props.header.type === 'date'){\n\t\treturn <DateCell\n\t\t\tcurrentValue={currentValue}\n\t\t\tsetCurrentValue={setCurrentValue}\n\t\t\tcommitChanges={commitChanges}\n\t\t\theader={props.header}\n\t\t\tvalidClass={validClass}\n\t\t\tkeyHandler={keyHandler}\n\t\t\tfocusHandler={focusHandler}\n\t\t\tchangeHandler={changeHandler}\n\t\t\tinitalValue={initalValue}\n\t\t\tselectHandler={selectHandler}\n\t\t/>\n\t}\n\t\n\t\n\t//Combobox cells\n\tif(props.header.options){\n\t\tconst myOptions = props.header.options\n\t\t\n\t\treturn <select\n\t\t\tclassName={'InputCell input ' + validClass}\n\t\t\tonKeyDown={keyHandler}\n\t\t\tonFocus={focusHandler}\n\t\t\tvalue={currentValue}\n\t\t\tonChange={selectHandler}\n\t\t>\n\t\t\t{myOptions.map(v=>{\n\t\t\t\treturn<option key={v} value={v}>{v}</option>\n\t\t\t})}\n\t\t</select>\n\t}\n\t\n\treturn(<input\n\t\ttype = 'text'\n\t\tclassName = {'InputCell input ' + validClass}\n\t\tonKeyDown = {keyHandler}\n\t\tonFocus = {focusHandler}\n\t\tonBlur = {()=>commitChanges()}\n\t\tvalue = {currentValue}\n\t\tonChange = {changeHandler}\n\t/>)\n}","import React, {useEffect, useState} from 'react'\nimport './MainTableRow.css'\nimport InputCell from './InputCell'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons'\n\nexport default function MainTableRow(props) {\n\t\n\tconst activeClass = \n\tprops.dataset.getActiveRecord \n\t&& props.dataset.getActiveRecord()[props.dataset.primaryKey] === props.dataRow[props.dataset.primaryKey]\n\t&& !props.noActive\n\t? ' active '\n\t: ''\n\t\n\tfunction rowClickHandler(){\n\t\tif(!props.noActive){\n\t\t\tprops.dataset.selectRecord( props.dataRow[props.dataset.primaryKey])\n\t\t}\n\t}\n\t\n\tconst [renderTrigger, setRenderTrigger] = useState(false)\n\t//Allow nested components and onClicks to update their dataRow\n\tfunction setRow(newRow) {\n\t\t//Illegally modifying a piece of state.... reasoning:\n\t\t//If multiple rows are modified asynchronously, the second row may override the first one by using an outdated copy of the data. \n\t\t//letting them all modify the same array and then forcing a rerender fixes this issue (temporary fix). \n\t\tsetRenderTrigger(!renderTrigger)\n\t\tconst newData = props.dataset.read()\n\t\tnewData[props.rowIndex] = newRow\n\t\tprops.dataset.set(newData)\n\n\t}\n\t\n\tconst rowContent = props.dataHeaders.map((hdr, i) => {\n\t\tif(hdr.visible || hdr.required){\n\t\t\t\n\t\t\tfunction cellClickHandler(){\n\t\t\t\tif(hdr.onClick && !hdr.locked && !props.locked){\n\t\t\t\t\thdr.onClick({\n\t\t\t\t\t\tcellValue: props.dataRow[hdr.headerID],\n\t\t\t\t\t\trow: props.dataRow,\n\t\t\t\t\t\tsetRow: setRow,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//Decide if the cell is editable or not based on the locked status, and the header onEdit function\n\t\t\tlet cellContent\n\t\t\tlet cellClass = hdr.onClick && !props.locked ? ' clickable plain tableCell ' : ' plain tableCell'\n\t\t\tconst cellText = hdr.format(props.dataRow[hdr.headerID])\n\t\t\t\n\t\t\tif(!props.locked && hdr.onEdit && !hdr.locked){\n\t\t\t\t\n\t\t\t\tcellContent = <InputCell \n\t\t\t\t\theader = {hdr}\n\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\trowIndex = {props.rowIndex}\n\t\t\t\t\tdataset = {props.dataset}\n\t\t\t\t\tsetRow = {setRow}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\tcellClass = cellClass + ' inputWrapper ' \n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tcellContent = cellText\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(hdr.component){ //custom component cells\n\t\t\t\treturn (<span\n\t\t\t\t\tkey={hdr.headerID + props.rowKey}\n\t\t\t\t\tstyle={{ width: hdr.width + 'px' }}\n\t\t\t\t\tclassName={'tableCell componentCell'}\n\t\t\t\t>\n\t\t\t\t\t<hdr.component\n\t\t\t\t\t\trow={props.dataRow}\n\t\t\t\t\t\tsetRow={setRow}\n\t\t\t\t\t\t{...hdr.props}\n\t\t\t\t\t/>\n\t\t\t\t</span>)\n\t\t\t\t\n\t\t\t}else if (!hdr.styling){ //No conditional formatting\n\t\t\t\treturn(<span \n\t\t\t\t\tkey = {hdr.headerID + props.rowKey} \n\t\t\t\t\tstyle = {{width: hdr.width + 'px'}}\n\t\t\t\t\tclassName = {cellClass}\n\t\t\t\t\ttitle={cellText}\n\t\t\t\t\tonClick = {cellClickHandler}\n\t\t\t\t>\n\t\t\t\t\t{cellContent}\n\t\t\t\t</span>)\n\t\t\t\n\t\t\t} else{ //with coniditional formatting\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tconst myStyle = hdr.styling(props.dataRow[hdr.headerID], props.dataRow)\n\t\t\t\t\n\t\t\t\treturn( \n\t\t\t\t\t<span \n\t\t\t\t\t\tclassName = {'badge ' + cellClass}\n\t\t\t\t\t\tkey = {hdr.headerID + props.rowKey + i} \n\t\t\t\t\t\tonClick={cellClickHandler}\n\t\t\t\t\t\tstyle = {{\n\t\t\t\t\t\t\twidth: 'calc(' + hdr.width + 'px - 23px)',\n\t\t\t\t\t\t\t...myStyle,\n\t\t\t\t\t\t\tmarginLeft: '23px'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t</span>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t})\n\t\n\t//Nested rows\n\tconst expanded = props.expandedRows[props.dataRow[props.dataset.primaryKey]]\n\t\n\tfunction setExpanded(value){\n\t\tconst newExpanded = {...props.expandedRows}\n\t\tnewExpanded[props.dataRow[props.dataset.primaryKey]] = value\n\t\tprops.setExpandedRows(newExpanded)\n\t}\n\t\n\tconst expandedClass = expanded ? ' expanded ' : ''\n\t\n\tfunction expandHandler(e){\n\t\t//don't set the active row when collapsing \n\t\tif (expanded) { e.stopPropagation()}\n\t\tsetExpanded(!expanded)\n\t}\n\t\n\tconst expandIcon = props.nestedComponent ? <span className='expandButton' onClick={expandHandler}>\n\t\t{expanded ? <FontAwesomeIcon icon={faMinus} /> : <FontAwesomeIcon icon={faPlus} />}\n\t</span> : null\n\t\n\tuseEffect(()=>{\n\t\t//yes... I know. Trust me its okay here. \n\t\tif(props.nestedComponent){\n\t\t\tconst newExpanded = props.expandedRows\n\t\t\tnewExpanded[props.dataRow[props.dataset.primaryKey]] = props.expandedRows[props.dataRow[props.dataset.primaryKey]] ? true : false\n\t\t\tprops.setExpandedRows(newExpanded)\n\t\t}\n\t}, [])\n\t\n\treturn(\n\t\t<div\n\t\t\tclassName={'MainTableRow ' + expandedClass} \n\t\t\tonClick = {rowClickHandler}\n\t\t>\n\t\t\t<div className={'topRow' + activeClass}>\n\t\t\t\t{expandIcon}\n\t\t\t\t{rowContent}\n\t\t\t</div>\n\t\t\t\n\t\t\t{expanded && props.nestedComponent ? <div \n\t\t\t\tclassName = 'componentWrapper'\n\t\t\t>\n\t\t\t\t<div style={props.nestedProps && props.nestedProps.fitToWidth ? {width: props.tableRef.current ? 'calc(' + props.tableRef.current.clientWidth + 'px - 48px)' : null} : undefined}>\n\t\t\t\t\t<props.nestedComponent\n\t\t\t\t\t\t{...props.nestedProps}\n\t\t\t\t\t\trow = {props.dataRow}\n\t\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\t\tsetRow = {setRow}\n\t\t\t\t\t\trowIndex={props.rowIndex}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div> : null}\n\t\t\t\n\t\t</div>\n\t)\n}","import React from 'react'\nimport MainTableRow from './MainTableRow'\nimport Loading from '../Loading'\n\nexport default function TableBody(props) {\n\t\n\t//Counter for rendered rows\n\tlet rowCount = 1\n\t\n\t//Loading option\n\tif (props.data.status === 'Pending' && !props.noLoading && props.data.isDataset && props.data.read().length === 0){\n\t\treturn <div \n\t\t\tstyle={{ \n\t\t\t\twidth: props.tableRef.current ? props.tableRef.current.clientWidth : '100%',\n\t\t\t}} \n\t\t\tclassName='loadingContainer flexCenter'\n\t\t>\n\t\t\t<Loading style={{ fontSize: '40pt' }} />\n\t\t</div> \n\t}\n\t\n\treturn (\n\t\t<div className={'TableBody tableBody ' + props.data.lastResolved}>\n\t\t\t\n\t\t\t{props.dataArray.map((dr, idx) => {\n\t\t\t\t//render the allowed numebr of rows, on th selected page\n\t\t\t\tif (!props.pageSize || ((rowCount > props.activePage * props.pageSize) && (rowCount <= (1 + props.activePage) * props.pageSize))) {\n\n\t\t\t\t\tlet renderRow = dr !== []\n\t\t\t\t\t\n\t\t\t\t\tif (props.searchable && props.metaData[idx]) {\n\t\t\t\t\t\trenderRow = !props.metaData[idx].searchHidden\n\t\t\t\t\t}\n\n\t\t\t\t\trenderRow = renderRow && (props.noFilter || (props.metaData[idx] && props.metaData[idx].visible))\n\n\t\t\t\t\tconst rowKey = dr[props.data.primaryKey] ? dr[props.data.primaryKey] : idx\n\n\t\t\t\t\tif(renderRow){\n\t\t\t\t\t\trowCount++\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn <MainTableRow\n\t\t\t\t\t\t\tdataRow={dr}\n\t\t\t\t\t\t\tdataset={props.data}\n\t\t\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\tkey={rowKey}\n\t\t\t\t\t\t\tlocked={props.locked}\n\t\t\t\t\t\t\tdynamic={props.dynamic}\n\t\t\t\t\t\t\trowIndex={idx}\n\t\t\t\t\t\t\tnestedComponent={props.nestedComponent}\n\t\t\t\t\t\t\tnestedProps={props.nestedProps}\n\t\t\t\t\t\t\tnoActive={props.noActive}\n\t\t\t\t\t\t\ttableRef={props.tableRef}\n\t\t\t\t\t\t\texpandedRows={props.expandedRows}\n\t\t\t\t\t\t\tsetExpandedRows={props.setExpandedRows}\n\t\t\t\t\t\t/> \n\t\t\t\t\t} else{\n\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t} else if (rowCount <= (1 + props.activePage) * props.pageSize) { rowCount++ }\n\n\t\t\t\treturn null\n\t\t\t})}\n\t\t\t\n\t\t</div>\n\t)\n}\n","import React, {useState, useRef, useEffect} from 'react'\nimport './CoreTable.css'\nimport TheadButton from './TheadButton' \nimport TableControls from './TableControls'\nimport useSettings from '../../../Hooks/UseSettings'\nimport PageControls from './PageContols'\nimport TableBody from './TableBody'\nimport lockedContext from '../../../Contexts/LockedContext'\n\nexport default function CoreTable(props){\n\t\n\t//Sorting and filtering are optional (via props), only supported with if a dataset is provided\n\tconst {noSort, noFilter, noActive, locked} = props\n\tconst noOptions = props.noOptions || !props.settingsID\n\t\n\t//expanded rows (if applicable)\n\tconst hasNestedClass = props.nestedComponent ? ' hasNested ' : null\n\t\n\t//support for dataSets or for just arrays\n\tconst data = props.data.read()\n\tconst metaData = props.metaData\n\t\n\t//Settings token support \n\tconst saveSettings = useSettings(props.settingsID, (token) => {\n\t\tprops.headers.applyToken(token)\n\t\tprops.data.setLastResolved(new Date().toISOString()) //Sort trigger to make it sort on the next render using the below useEffect\n\t})\n\t\n\t//Active page handling\n\tconst [activePage, setActivePage] = useState(0)\n\t\n\t//When you search, return to page 0 in case the search results don't reach the current page\n\tuseEffect(()=>{\n\t\tsetActivePage(0)\n\t}, [props.searchText])\n\t\n\t//get the length of the data with the filter applied\n\tlet dataLength = 0\n\tdata.forEach((r, idx)=>{\n\t\tif(metaData[idx]){\n\t\t\tif (metaData[idx].visible && !metaData[idx].searchHidden){dataLength ++}\n\t\t} else {\n\t\t\tdataLength++\n\t\t}\n\t})\n\t\n\t//For dataSets - runs when dataSet refreshes (sets the filter options to match)\n\tuseEffect(() => {\n\t\tif (!noOptions) { props.headers.setSettingsEngine({ save: saveSettings }) }\n\t\tprops.generateMetadata()\n\t}, [props.data.lastResolved])\n\t\n\t//If clicking sets the active record then its animated\n\t//if there are editable cells the animations will be cancelled\n\tlet dynamic\n\tlet hasActiveClass = ''\n\t\n\tif(!noActive){\n\t\tdynamic = true\n\t\thasActiveClass = ' hasActive '\n\t} \n\t\n\tlet hasFilter = false\n\tlet totalHeaderWidth = 70\n\t\n\tprops.headers.get().forEach(hdr => {\n\t\t//if you have input cells in the table, hover effects will be cancelled\n\t\tif(hdr.onEdit){dynamic = false}\n\t\t\n\t\tif(hdr.visible){totalHeaderWidth = totalHeaderWidth + hdr.width}\n\t\t\n\t\t//check if any headers have active filters (to show a clear filter button)\n\t\tif(hdr.hasFilter()){hasFilter = true}\n\n\t})\n\n\tfunction clearFilter(){\n\t\tconst newHeaders = [...props.headers.get()]\n\t\tnewHeaders.forEach(hdr=>{\n\t\t\thdr.clearFilter()\n\t\t})\n\t\t\n\t\tprops.headers.set(newHeaders)\n\t\tprops.data.filter()\n\t}\n\n\t//Positioning for nested components\n\tconst tableRef = useRef()\n\tconst [expandedRows, setExpandedRows] = useState({})\n\n\t//Render\n\treturn (\n\t\t<lockedContext.Provider value={props.locked}>\n\t\t\t<div \n\t\t\t\tclassName={'MainTable ' + hasActiveClass + hasNestedClass} \n\t\t\t\tref = {tableRef} \n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t<div className=\"topBar\">\n\t\t\t\t\t<div className='topBarContainer'></div>\n\t\t\t\t\t\t<TableControls\n\t\t\t\t\t\t\thasFilter={hasFilter}\n\t\t\t\t\t\t\tnoFilter={noFilter}\n\t\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\t\tclearFilter={clearFilter}\n\t\t\t\t\t\t\tnoOptions={noOptions}\n\t\t\t\t\t\t\tdataHeaders={props.headers}\n\t\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\t\tshowExpandControls = {props.nestedComponent ? true : false}\n\t\t\t\t\t\t\texpandedRows={expandedRows}\n\t\t\t\t\t\t\tsetExpandedRows={setExpandedRows}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<PageControls \n\t\t\t\t\t\t\tactivePage = {activePage}\n\t\t\t\t\t\t\tsetActivePage = {setActivePage}\n\t\t\t\t\t\t\tdataLength = {dataLength}\n\t\t\t\t\t\t\tpageSize = {props.pageSize}\n\t\t\t\t\t\t\ttableRef={tableRef}\n\t\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\n\t\t\t\t<div className=\"theadBar\" style={{\n\t\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)'\n\t\t\t\t}}>\n\t\t\t\t\t{props.headers.get().map((hdr, i) => {\n\t\t\t\t\t\tif (hdr.visible || hdr.required) {\n\t\t\t\t\t\t\t//Custom component type headers have no filters\n\t\t\t\t\t\t\tif (hdr.type === 'component') return <span style={{ width: hdr.width + 'px' }} key={'header' + i} className='theadBarComponentWrapper'>\n\t\t\t\t\t\t\t\t{hdr.displayName + ' '}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet headerClass = hdr.onEdit ? ' theadBarTheadButtonWrapper ' : ' shiftLeft theadBarTheadButtonWrapper '\n\t\t\t\t\t\t\tif(hdr.styling && (!hdr.styling.textAlign)){\n\t\t\t\t\t\t\t\theaderClass = headerClass + ' centeredHeader '\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\tstyle={{ width: hdr.width + 'px' }} \n\t\t\t\t\t\t\t\t\tkey={'header' + i} \n\t\t\t\t\t\t\t\t\tclassName={headerClass}\n\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t<TheadButton\n\t\t\t\t\t\t\t\t\t\theader={hdr}\n\t\t\t\t\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\t\t\t\t\tdataHeaders={props.headers}\n\t\t\t\t\t\t\t\t\t\tnoFilter={noFilter} \n\t\t\t\t\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{hdr.displayName + ' '}\n\t\t\t\t\t\t\t\t\t</TheadButton>\n\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else return null\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<div className={\"mainSection\"} style={{\n\t\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)' \n\t\t\t\t}}>\n\t\t\t\t\t<TableBody\n\t\t\t\t\t\tsearchable={props.searchable}\n\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\tdataHeaders={props.headers.get()}\n\t\t\t\t\t\tlocked={locked}\n\t\t\t\t\t\tdynamic={dynamic}\n\t\t\t\t\t\tnestedComponent={props.nestedComponent}\n\t\t\t\t\t\tnestedProps={props.nestedProps}\n\t\t\t\t\t\tnoActive={noActive}\n\t\t\t\t\t\ttableRef={tableRef}\n\t\t\t\t\t\tpageSize={props.pageSize}\n\t\t\t\t\t\tactivePage={activePage}\n\t\t\t\t\t\tmetaData={metaData}\n\t\t\t\t\t\tdataArray = {data}\n\t\t\t\t\t\tnoLoading = {props.noLoading}\n\t\t\t\t\t\texpandedRows={expandedRows}\n\t\t\t\t\t\tsetExpandedRows={setExpandedRows}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}","import {useState, useEffect} from 'react'\n\n//Initialises a Dataset and caches the value\nexport default function useDataset(fetchFunction, options = {}) {\n\t\n\t//The array contains an empty object by default\n\tconst [data, setData] = useState(options.defaultValue ? options.defaultValue : [])\n\tconst [status, setStatus] = useState('Pending')\n\tconst [lastResolved, setLastResolved] = useState()\n\tconst [lastEdited, setLastEdited] = useState()\n\tconst [activeRecord, setActiveRecord] = useState({})\n\t\n\t//Allowing you to choose the data arary you use, so you can set the active row right after fetching/setting new data\n\tfunction selectRecord(newPrimaryKey, fromData = data){\n\t\tconst newIndex = fromData.findIndex(r => r[options.primaryKey] == newPrimaryKey)\n\t\t\n\t\tif(newIndex > -1){\n\t\t\tsetActiveRecord(fromData[newIndex])\n\t\t\treturn (fromData[newIndex])\n\t\t} else{\n\t\t\tsetActiveRecord({})\n\t\t\treturn({})\n\t\t}\n\t}\n\t\n\tfunction getActiveRecord(){\n\t\treturn activeRecord\n\t}\n\t\n\t//Fetch data and update state once the operation is complete. Keep the old value in the meantime\n\tasync function fetchData(override) {\n\t\t\n\t\tif(override || (status !== 'Pending')){\n\t\t\tsetStatus('Pending')\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst newData = await fetchFunction()\n\t\t\t\tsetData(newData)\n\t\t\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\n\t\t\t\tsetStatus('Resolved')\n\t\t\t\tsetLastResolved(new Date().toISOString())\n\t\t\t\treturn 'Resolved'\n\n\t\t\t} catch (e) {\n\t\t\t\tsetStatus('Rejected')\n\t\t\t\tconsole.error(e)\n\t\t\t\treturn 'Rejected'\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//Lets you edit the active row\n\tfunction editActiveRecord(newRecord) {\n\t\tconst newData = newRecord ? [...data] : []\n\t\t\n\t\tif(!options.primaryKey){console.error('No primary key set for this dataset.')}\n\t\t\n\t\tconst activeIndex = data.findIndex(r => r[options.primaryKey] == activeRecord[options.primaryKey])\n\t\t\n\t\t//if you call this function without passing a new record, the record is deleted\n\t\tif(newRecord && activeIndex > -1){\n\t\t\tnewData[activeIndex] = newRecord\n\t\t\tsetActiveRecord(newRecord)\n\t\t}else{\n\t\t\tdata.forEach((r, idx)=>{\n\t\t\t\tif(idx !== activeIndex){\n\t\t\t\t\tnewData.push(r)\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetActiveRecord({})\n\t\t}\n\t\t\n\t\tsetData(newData)\n\t}\n\t\n\t//Lets you edit a record that isn't the active record by specifying a primary key\n\tfunction editSpecificRecord(recordKey, newRecord){\n\t\tconst newData = newRecord ? [...data] : []\n\t\t\n\t\tif (!options.primaryKey) { console.error('No primary key set for this dataset.') }\n\n\t\tconst activeIndex = data.findIndex(r => r[options.primaryKey] == recordKey)\n\n\t\t//if you call this function without passing a new record, the record is deleted\n\t\tif (newRecord && activeIndex > -1) {\n\t\t\tnewData[activeIndex] = newRecord\n\t\t} else {\n\t\t\tdata.forEach((r, idx) => {\n\t\t\t\tif (idx !== activeIndex) {\n\t\t\t\t\tnewData.push(r)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tsetData(newData)\n\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\t}\n\t\n\t//Automatically run the fetching function the first time, then wait for a refresh\n\tuseEffect(()=>{ \n\t\tfetchData(true)\n\t},[])\n\t\n\t//Return a Dataset object\n\treturn ({\n\t\tread: () => {return data},\n\t\trefresh: fetchData,\n\t\t\n\t\tselectRecord: (newKey) => selectRecord(newKey),\n\t\tgetActiveRecord: getActiveRecord,\n\t\tsetActiveRecord: editActiveRecord,\n\t\tsetRecord: editSpecificRecord,\n\t\t\n\t\tstatus: status,\n\t\tlastResolved: lastResolved,\n\t\tsetLastResolved: setLastResolved,\n\t\tsetLastEdited: setLastEdited,\n\t\tlastEdited: lastEdited,\n\t\t\n\t\tisDataset: true,\n\t\tprimaryKey: options.primaryKey,\n\t\t\n\t\tset: (newData)=>{\n\t\t\tsetData(newData)\n\t\t\tselectRecord(activeRecord[options.primaryKey], newData)\n\t\t}\n\t})\n}","import moment from 'moment'\n\n//format for displaying certain types of data\nconst formatFunctions = {\n\tdate: (cellValue) => cellValue ? moment(new Date(cellValue)).format('DD-MMM-YY') : '',\n\tboolean: (cellValue) => cellValue ? 'True' : 'False',\n\tother: (cellValue) => cellValue,\n}\n\n\n//Takes a user input and changes it to the correct data type (eg. Date string to new Date object)\nconst parseFunctions = {\n\tdate: (input) => {\n\t\t\n\t\tconst testVal = input.toString().toLowerCase()\n\n\t\tif(testVal.trim() === '') { return ''}\n\t\t\n\t\tif (testVal === 'today' || testVal === 'td') { return moment().toISOString() }\n\t\tif (testVal === 'tomorrow' || testVal === 'tm') { return moment().add(1, 'day').toISOString() }\n\t\tif (testVal === 'yesterday' || testVal === 'yd') { return moment().subtract(1, 'day').toISOString() }\n\t\t\n\t\t//Special case for dates with no year - default to current year\n\t\t// const regNodash = /^[0-9]*(?:_?[a-z]+)*$/\n\t\t// const regWithDash = /^[0-9]*[-](?:_?[a-z])*$/\n\t\t\n\t\tif(isNaN(parseFloat(input.slice(-1)))){\n\t\t\tconst newInput = input + new Date().getFullYear()\n\t\t\treturn moment(new Date(newInput)).toISOString()\n\t\t}\n\t\t\n\t\treturn moment( new Date(input) ).toISOString()\n\t},\n\n\tboolean: (input) => {\n\t\tconst testVal = input.toString().toLowerCase()\n\t\tif (testVal === 'true' || testVal === 'yes' || testVal == 1 || testVal === 'y' || testVal === 't') {\n\t\t\treturn true\n\t\t} else return false\n\t},\n\t\n\tnumber: (input) => {\n\t\tconst newValue = Number(input)\n\t\tif (!isNaN(newValue)) {\n\t\t\treturn newValue\n\t\t} else {\n\t\t\tthrow new Error('invalid input - not a number')\n\t\t}\n\t},\n\n\tother: (input) => input,\n}\n\n\n//Compares 2 values that may not be directly equal (eg. date object and date string)\nconst compareFunctions = {\n\tdate: (a, b) => moment( new Date(a) ).isSame(new Date(b), 'day'),\n\tboolean: (a, b) => this.parse(a) === this.parse(b),\n\tother: (a, b) => a == b,\n}\n\n\n//\nexport default class DataType{\n\tconstructor(type){\n\t\tthis.format = formatFunctions[type] ? formatFunctions[type] : formatFunctions.other\n\t\tthis.parse = parseFunctions[type] ? parseFunctions[type] : parseFunctions.other\n\t\tthis.compare = compareFunctions[type] ? compareFunctions[type] : compareFunctions.other\n\t}\n}","//Support functions used by the DataHeader object\n\n\n//A special type of filter that deals with the values you select in the dropdown menu of each header\nexport function valueFilter(cellValue, uniqueValues){\n\treturn (uniqueValues[cellValue] || uniqueValues[cellValue] === undefined)\n}\n\n\n\n//A special type of filter that deals with the values you select in the dropdown menu of each header (for tags)\nexport function tagFilter(cellValue, uniqueValues){\n\treturn cellValue.some(cv => uniqueValues[cv] || uniqueValues[cv] === undefined)\n}\n\n\n\n//Generates the list of unique values for a given column, from a set of data. \n//If typee==='tags', separates the tags into individual values\nexport function uniqueByColumn(data, metaData, columnID, oldValues){\n\tconst res = {}\n\n\tdata.forEach((r, idx) => {\n\t\tif(metaData[idx] && (metaData[idx].visible || metaData[idx].filteredBy === columnID + ';') && !metaData[idx].searchHidden){\n\t\t\t\n\t\t\tconst testVals = Array.isArray(r[columnID]) ? r[columnID] : [ r[columnID] ]\n\t\t\t\n\t\t\t//Regular values\n\t\t\ttestVals.forEach(v=>{\n\t\t\t\tif (oldValues[v] === undefined) {\n\t\t\t\t\tres[v] = true\n\t\t\t\t} else {\n\t\t\t\t\tres[v] = oldValues[v]\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n\n\tconst orderedRes = {}\n\n\tObject.keys(res).sort().forEach((key) => {\n\t\torderedRes[key] = res[key]\n\t})\n\n\treturn orderedRes\n}","import DataFilter from './DataFilter'\nimport DataType from './DataType'\nimport {valueFilter, tagFilter, uniqueByColumn} from './headerSupport'\n\nexport default class DataHeader{\n\t\n\tconstructor(options){\n\t\tthis.headerID = options.headerID\n\t\tthis.displayName = options.displayName\n\t\tthis.width = options.width ? options.width : 100\n\t\tthis.required = options.required ? options.required : false\n\t\tthis.visible = (!options.visible === undefined) ? options.visible : true\n\t\tthis.index = options.index\n\t\tthis.onEdit = options.onEdit ? options.onEdit : null\n\t\tthis.locked = options.locked ? options.locked : false\n\t\tthis.styling = options.styling ? options.styling : null\n\t\tthis.uniqueValues = {}\n\t\tthis.type = options.type ? options.type : 'string'\n\t\tthis.onClick = options.onClick\n\t\tthis.options=options.options\n\t\tthis.component = options.component\n\t\t\n\t\t//Adds type = 'component' unless you explicitly give a type in the options\n\t\t//Used to determine if a filter should appear or not\n\t\tif(options.component){\n\t\t\tthis.type = options.type ? options.type : 'component'\n\t\t\tthis.onEdit = null\n\t\t}\n\t\t\n\t\tthis.props = options.props\n\t\t\n\t\t//Default filter list only has 1 functions (array filter)\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: this.type === 'tags' ? \n\t\t\t\t(cellValue) => tagFilter(cellValue, this.uniqueValues) \n\t\t\t\t: (cellValue) => valueFilter(cellValue, this.uniqueValues)\n\t\t\t},\n\t\t}\n\t\t\n\t\tthis.dataType = new DataType(this.type)\n\t\tthis.format = this.dataType.format\n\t\tthis.parse = this.dataType.parse\n\t\tthis.compare = this.dataType.compare\n\t}\n\n\t\n\tfilter(cellValue, dataRow){\n\t\t//Check if any of the filters fail\n\t\t//If any filters fail, res will be true. Return the opposite\n\t\treturn !Object.keys(this.filterList).some( (f)=>{\n\t\t\treturn !this.filterList[f].func(cellValue, dataRow)\n\t\t})\n\t}\n\t\n\t\n\taddFilter(options){\n\t\tthis.filterList[options.id] = new DataFilter({...options, headerType: this.type})\n\t}\n\t\n\t\n\tremoveFilter(filterID){\n\t\tdelete this.filterList[filterID]\n\t}\n\t\n\t\n\t//Saves a list of unique values in the column - to be used in the filter dropdowns\n\tembedData(data, metaData){\n\t\tthis.uniqueValues = uniqueByColumn(data, metaData, this.headerID, this.uniqueValues)\n\t}\n\t\n\tselectAll(setVal){\n\t\tObject.keys(this.uniqueValues).map((uv)=>{\n\t\t\tthis.uniqueValues[uv] = setVal\n\t\t})\n\t}\n\t\n\t//checks if there are any active filters, including the array filter\n\thasFilter(){\n\t\t//array filter is always there, check if any other filters are there\n\t\tlet testRes = Object.keys(this.filterList).length === 1\n\t\t\n\t\t//if there are no other filters, check if the array filter is active\n\t\tif(testRes){\n\t\t\tObject.keys(this.uniqueValues).forEach((val) => {\n\t\t\t\tif (!this.uniqueValues[val]){testRes = false}\n\t\t\t})\n\t\t}\n\t\treturn !testRes\n\t}\n\t\n\tclearFilter(){\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: (cellValue) => {\n\t\t\t\t\treturn (this.uniqueValues[cellValue] || this.uniqueValues[cellValue] === undefined)\n\t\t\t\t}, displayName: 'Array Filter'\n\t\t\t}\n\t\t}\n\t\tthis.selectAll(true)\n\t}\n}\n\n\n","import {useState, useRef} from 'react'\nimport DataHeader  from '../DataObjects/DataHeader'\nimport {v4 as uuid} from 'uuid'\n\n\n//Crates a set of DataHeaders, for use with a mainTable\nexport default function useHeaders(dataHeaders = []) {\n\t\n\tconst [headers, setHeaders] = useState(dataHeaders.map((hdr, i) => {\n\t\tconst obj = new DataHeader(hdr)\n\t\tobj.index = i\n\t\treturn (obj)\n\t}))\n\t\n\tconst [savedLayouts, setSavedLayouts] = useState({})\n\tconst [settingsEngine, setSettingsEngine] = useState({ save: ()=>{} })\n\tconst [tokenTrigger, setTokenTrigger] = useState(false)\n\t\n\tconst sortRules = useRef([])\n\tconst setSortRules = (value) => {sortRules.current = value}\n\t\n\t//Coverts the current layout to JSON and saves it\n\tfunction saveLayout(layoutName){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tconst saveID = uuid()\n\t\t\n\t\tnewLayouts[saveID] = {\n\t\t\tname: layoutName,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\t\n\t\theaders.forEach((h)=>{\n\t\t\tnewLayouts[saveID].headerOptions[h.headerID] = {\n\t\t\t\tvisible: h.visible,\n\t\t\t\tfilterList: []\n\t\t\t}\n\t\t\t\n\t\t\tObject.values(h.filterList).forEach((f) => {\n\t\t\t\tif (f.options) { newLayouts[saveID].headerOptions[h.headerID].filterList.push( f.options )} //everything but arrayFilters\n\t\t\t})\n\t\t\t\n\t\t\t//save array filter if there are selected values\n\t\t\tif(h.filterList.arrayFilter && Object.keys(h.uniqueValues).length){\n\t\t\t\tconst vals = Object.keys(h.uniqueValues)\n\t\t\t\tconst unselectedValues = vals.filter(v=>!h.uniqueValues[v])\n\t\t\t\tif(unselectedValues.length < 50){\n\t\t\t\t\tnewLayouts[saveID].headerOptions[h.headerID].arrayFilterValues = unselectedValues\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t})\n\t\t\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction loadLayout(id){\n\t\tif(savedLayouts[id]){\n\t\t\t\n\t\t\tconst newHeaders = []\n\t\t\t\n\t\t\theaders.forEach(h=>{\n\t\t\t\ttry{\n\t\t\t\t\th.clearFilter()\n\t\t\t\t\t\n\t\t\t\t\t//If there's no setting for this header it means it was added in an update. Hide it since its not selected. If its requried, it will show anyway. \n\t\t\t\t\th.visible = savedLayouts[id].headerOptions && savedLayouts[id].headerOptions[h.headerID] ?\n\t\t\t\t\tsavedLayouts[id].headerOptions[h.headerID].visible :\n\t\t\t\t\tfalse\n\n\t\t\t\t\tsavedLayouts[id].headerOptions[h.headerID].filterList.forEach((f) => {\n\t\t\t\t\t\th.addFilter(f)\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t//apply array filter\n\t\t\t\t\tif(savedLayouts[id].headerOptions[h.headerID].arrayFilterValues){\n\t\t\t\t\t\tsavedLayouts[id].headerOptions[h.headerID].arrayFilterValues.map(v=>{\n\t\t\t\t\t\t\th.uniqueValues[v]=false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}catch(err){\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnewHeaders.push(h)\n\t\t\t})\n\t\t\t\t\n\t\t\tsetHeaders(newHeaders)\n\t\t\tsetSortRules(savedLayouts[id].sortRules)\n\t\t\tsetTokenTrigger(true)\n\t\t}\n\t}\n\t\n\tfunction deleteLayout(id){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tdelete newLayouts[id]\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t\n\t//Saves a list of unique values in each column (header) - to be used in the filter dropdowns\n\tfunction embedData(data, metaData) {\n\t\t\n\t\tconst newHeaders = [...headers]\n\t\t\n\t\tnewHeaders.forEach((hdr) => {\n\t\t\thdr.embedData(data, metaData)\n\t\t})\n\n\t\tsetHeaders(newHeaders)\n\t}\n\t\n\tfunction applyToken(token){\n\t\ttry{\n\t\t\tconst newSettings = JSON.parse(token)\n\t\t\tsetSavedLayouts(newSettings.savedLayouts)\n\n\t\t\tconst newHeaders = [...headers]\n\n\t\t\tnewHeaders.forEach((h) => {\n\t\t\t\th.visible = newSettings.headerOptions && newSettings.headerOptions && newSettings.headerOptions[h.headerID] ? \n\t\t\t\tnewSettings.headerOptions[h.headerID].visible : true\n\t\t\t})\n\n\t\t\tsetSortRules(newSettings.sortRules ? newSettings.sortRules : [])\n\t\t\tsetHeaders(newHeaders)\n\t\t} catch(err){\n\t\t\tconsole.error(err)\n\t\t}\n\t}\n\t\n\tfunction setVisible(index, bool){\n\t\tconst newHeaders = [...headers]\n\t\tnewHeaders[index].visible = bool\n\t\tsetHeaders(newHeaders)\n\t\tsetSortRules( [...sortRules.current].filter(sr => sr.headerID !== headers[index].headerID) )\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t//If settings have changed since the last render, create and save a new token\n\tif (tokenTrigger) {\n\t\tsetTokenTrigger(false)\n\t\t\n\t\tconst res = {\n\t\t\tsavedLayouts: savedLayouts,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\theaders.forEach((hdr)=>{\n\t\t\tres.headerOptions[hdr.headerID] = {\n\t\t\t\tvisible: hdr.visible,\n\t\t\t}\n\t\t})\n\n\t\tsettingsEngine.save(JSON.stringify(res))\n\t}\n\t\t\n\tfunction removeSortRule(headerID){\n\t\tsetSortRules(\n\t\t\t[...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\t)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction addSortRule(headerID, direction, headerIndex){\n\t\tconst newSortRules = [...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\tnewSortRules.push({headerID: headerID, direction: direction, index: headerIndex})\n\t\tsetSortRules(newSortRules)\n\t\tsetTokenTrigger(true)\n\t}\n\n\treturn ({\n\t\tget: () => {return headers},\n\t\tset: setHeaders,\n\t\t\n\t\tembedData: embedData,\n\t\tapplyToken: applyToken,\n\t\tsaveLayout: saveLayout,\n\t\tloadLayout: loadLayout,\n\t\tdeleteLayout: deleteLayout,\n\t\tgetSavedLayouts: ()=>{return savedLayouts},\n\t\tsetSettingsEngine: setSettingsEngine,\n\t\tsetVisible: setVisible,\n\t\t\n\t\taddSortRule: addSortRule,\n\t\tremoveSortRule: removeSortRule,\n\t\tgetSortRules: ()=>{\n\t\t\treturn sortRules.current\n\t\t}\n\t})\n}","\n//SEARCH\nexport function searchData(values, searchText, metaData){\n\tconst newMetaData = []\n\n\tvalues.forEach((r, idx) => {\n\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\trowMeta.searchHidden = false\n\n\t\tif (searchText) {\n\t\t\tconst testVal = JSON.stringify(r).toLowerCase()\n\t\t\trowMeta.searchHidden = !testVal.includes(searchText.toLowerCase())\n\t\t}\n\n\t\tnewMetaData.push(rowMeta)\n\t})\n\n\treturn newMetaData\n}\n\n\n//FILTER\nexport function filterData(values, headers, metaData) {\n\tconst newMetaData = []\n\n\tvalues.forEach((r, idx) => {\n\n\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\trowMeta.filteredBy = ''\n\n\t\tlet noRender = false\n\n\t\theaders.get().forEach((h) => {\n\t\t\tconst fltr = h.filter(r[h.headerID], r)\n\n\t\t\tif (!fltr && fltr != 'arrayFilter' && h.visible) {\n\t\t\t\tnoRender = true\n\t\t\t\trowMeta.filteredBy = rowMeta.filteredBy + [h.headerID] + ';'\n\t\t\t}\n\t\t})\n\n\t\trowMeta.visible = !noRender\n\t\tnewMetaData.push(rowMeta)\n\t})\n\n\treturn newMetaData\n}\n\n\n//SORT\nexport function sortData(values, headers) {\n\tlet newValues = [...values]\n\n\theaders.getSortRules().forEach((sr) => {\n\n\t\tif (headers.get()[sr.index] && headers.get()[sr.index].visible) {\n\t\t\tnewValues = newValues.sort((aRow, bRow) => {\n\n\t\t\t\tconst aVal = aRow[sr.headerID] ? aRow[sr.headerID].toString().toLowerCase() : ''\n\t\t\t\tconst bVal = bRow[sr.headerID] ? bRow[sr.headerID].toString().toLowerCase() : ''\n\n\t\t\t\tif (sr.direction === 'asc') {\n\t\t\t\t\tif (aVal > bVal) {\n\t\t\t\t\t\treturn 1\n\t\t\t\t\t} else if (aVal < bVal) {\n\t\t\t\t\t\treturn -1\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0\n\n\t\t\t\t} else {\n\t\t\t\t\tif (aVal < bVal) {\n\t\t\t\t\t\treturn 1\n\t\t\t\t\t} else if (aVal > bVal) {\n\t\t\t\t\t\treturn -1\n\t\t\t\t\t}\n\t\t\t\t\treturn 0\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t})\n\n\treturn newValues\n}\n\n","import React, {useState, useEffect, useContext} from 'react'\nimport CoreTable from './DisplaySupport/CoreTable'\nimport useDataset from '../../Hooks/UseDataset'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport PropTypes from 'prop-types'\nimport useHeaders from '../../Hooks/UseHeaders'\nimport lockedContext from '../../Contexts/LockedContext'\nimport {sortData, filterData, searchData} from './DisplaySupport/DataProcessing'\n\nexport default function MainTable(props){\n\t\n\t//Converts static data to a dataset\n\tconst wrapperDataset = useDataset(props.data.isDataset ? () => [] : () => props.data, {primaryKey: props.primaryKey})\n\tconst data = props.data.isDataset ? {...props.data} : wrapperDataset\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined) || !props.data.isDataset \n\t\n\tconst headers = useHeaders(props.headers)\n\t\n\tconst newProps = {...props}\n\tnewProps.data = data\n\tnewProps.nestedComponent = null\n\tnewProps.noActive = true\n\tnewProps.headers = headers\n\t\n\tconst cleanProps = {...props}\n\tcleanProps.data = data\n\tcleanProps.headers = headers\n\t\n\tconst searchText = useModuleData().get('TouchPointSearchText')\n\t\n\t//Escape hatch for wraper dataset. If the array changes update the wrapper dataset to match\n\tuseEffect(()=>{\n\t\tif(!props.data.isDataset){\n\t\t\tdata.refresh()\n\t\t}\n\t},[props.data])\n\t\n\t\n\t\n\t//Sort, search, and filter functionality\n\tconst [metaData, setMetaData] = useState([])\n\t\n\tfunction generateMetadata(metaOptions = {}){\n\t\tlet newMeta = [...metaData]\n\t\tlet newData = data.read()\n\t\t\n\t\t//sort\n\t\tif((!metaOptions.noSort) && (!props.noSort)){\n\t\t\tnewData = sortData(data.read(), headers)\n\t\t\tdata.set(newData)\n\t\t}\n\t\t\n\t\t//filter\n\t\tif ((!metaOptions.noFilter) && (!props.noFilter)){\n\t\t\tnewMeta = filterData(newData, headers, newMeta)\n\t\t}\n\t\t\n\t\t//search\n\t\tif(props.searchable && (!metaOptions.noSearch) ){\n\t\t\tnewMeta = searchData(newData, searchText, newMeta)\n\t\t}\n\t\t\n\t\tsetMetaData(newMeta)\n\t\t\n\t\t//Update each header's value list \n\t\tif (!props.noFilter){\n\t\t\theaders.embedData(newData, newMeta)\n\t\t}\n\t}\n\t\n\t\n\tuseEffect(()=>{\n\t\tgenerateMetadata({noSort: true, noFilter: true})\n\t}, [searchText])\n\t\n\t\n\t//Maintable was created when data had separate, search, sort, and filter functions called at different times. \n\t//Now, its all part of generateMetadata, so any time it tries to search, sort or filter it can just generate metadata\n\tdata.sort = generateMetadata\n\tdata.filter = generateMetadata\n\tdata.search = generateMetadata\n\tdata.generateMetadata = generateMetadata\n\t\n\t//Select and return:\n\t//cleanProps - if a dataset is passed to the table, then no need to create one\n\t//newProps - if a dataset is not passed to the table, then create one and pass it\n\tif(props.data.isDataset){\n\t\treturn (<CoreTable {...cleanProps} metaData = {metaData} locked={locked} searchText={searchText} generateMetadata={generateMetadata}/>)\n\t} else{\n\t\treturn (<CoreTable {...newProps} metaData={metaData} locked={locked} searchText={searchText} generateMetadata={generateMetadata}/>)\n\t}\n}\n\n//Proptypes\nMainTable.propTypes = {\n\tonEdit: PropTypes.func,\n\theaders: PropTypes.arrayOf(PropTypes.object).isRequired,\n\t\n\tdata: PropTypes.oneOfType([\n\t\tPropTypes.object,\n\t\tPropTypes.array\n\t]).isRequired,\n\n\tpageSize: PropTypes.number,\n\tlocked: PropTypes.bool,\n\tsearchable: PropTypes.bool,\n\tnoSort: PropTypes.bool,\n\tnoFilter: PropTypes.bool,\n\tnoOptions: PropTypes.bool,\n\tnoActive: PropTypes.bool,\n\tnestedProps: PropTypes.object,\n\tnestedComponent: PropTypes.func,\n\tsettingsID: PropTypes.string,\n\tstyle: PropTypes.object,\n\tnoLoading: PropTypes.bool,\n}","import React from 'react'\nimport CoreButton from '../Inputs/CoreButton'\nimport Loading from './Loading'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {faSyncAlt} from \"@fortawesome/free-solid-svg-icons\"\nimport propTypes from 'prop-types'\n\nexport default function RefreshButton(props) {\n\t\n\tif(props.data.status === 'Pending'){\n\t\treturn <CoreButton locked = {props.locked} style = {props.style} className={props.className} title={props.title}>\n\t\t\t<Loading style={{\n\t\t\t\tfontSize: 'inherit',\n\t\t\t\topacity: '100%'\n\t\t\t}}>\n\t\t\t\t{props.icon ? props.icon : <FontAwesomeIcon icon={faSyncAlt} />} \n\t\t\t</Loading> \n\t\t\t{props.title ? props.title : ' Refresh'}\n\t\t</CoreButton>\n\t}\n\t\n\tfunction clickHandler(){\n\t\tif(Array.isArray(props.data)){\n\t\t\tprops.data.map(d=>d.refresh())\n\t\t}else{\n\t\t\tprops.data.refresh()\n\t\t}\n\t\t\n\t}\n\t\n\treturn (\n\t\t<CoreButton title={props.title} style={props.style} className={props.className} onClick={clickHandler} locked={props.locked} hidden = {props.hidden}>\n\t\t\t{props.icon ? props.icon : <FontAwesomeIcon icon={faSyncAlt} />} \n\t\t\t{props.title ? props.title : ' Refresh'}\n\t\t</CoreButton>\n\t)\n}\n\nRefreshButton.propTypes={\n\tclassName: propTypes.string,\n\tstyle: propTypes.object,\n\tdata: propTypes.oneOfType([propTypes.object, propTypes.array]).isRequired,\n\ticon: propTypes.object,\n\ttitle: propTypes.string,\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function InfoTab(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tif(!props.hidden){return (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t\n\t\t\t<div className = {'InfoTab ' + props.tabID} style = {props.style}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t\t\n\t\t</lockedContext.Provider>\n\t)} else return null\n}\n\n//Proptypes\nInfoTab.propTypes = {\n\ttabTitle: PropTypes.string,\n\ttabID: PropTypes.string.isRequired,\n\tstyle: PropTypes.object,\n}\n","import React, {useContext} from 'react'\nimport {Tabs, Tab} from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './InfoTabContainer.css'\n\n\nexport default function InfoTabContainer(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"InfoTabContainer\">\n\t\t\t\t<Tabs \n\t\t\t\t\tdefaultActiveKey={props.defaultTab} \n\t\t\t\t\ttransition={false}\n\t\t\t\t\tonSelect = {(tabID)=>{\n\t\t\t\t\t\tif(props.onTabChange){props.onTabChange(tabID, locked)}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t{React.Children.map(props.children,(child) =>{\n\t\t\t\t\t\tconst tabTitle = child.props.tabTitle ? child.props.tabTitle : child.props.title\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!child.props.hidden){\n\t\t\t\t\t\t\treturn(<Tab eventKey={child.props.tabID} title={tabTitle}>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</Tab>)\n\t\t\t\t\t\t} else return null\n\t\t\t\t\t})}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nInfoTabContainer.propTypes = {\n\tdefaultTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n}\n\n\n","import React, {useEffect, useContext} from 'react'\nimport './Module.css'\nimport PropTypes from 'prop-types'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport lockedContext from '../../Contexts/LockedContext'\n\n\nexport default function Module(props) {\n\t\n\tconst moduleData = useModuleData()\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tuseEffect(()=>{\n\t\tmoduleData.clear()\n\t\t\n\t\treturn(()=>{\n\t\t\tmoduleData.clear()\n\t\t})\n\t\t\n\t}, [])\n\t\n\treturn (\n\t\t<div className={'Module ' + props.moduleName} style = {props.style}>\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nModule.propTypes = {\n\tmoduleName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n}\n","import React from 'react'\nimport './SplitScreen.css'\nimport Split from 'react-split'\nimport PropTypes from 'prop-types'\n\nexport default function SplitScreen(props) {\n\t\n\tlet splitSize = 50\n\tif(props.defaultSize){splitSize = props.defaultSize}\n\t\n\treturn (\n\t\t<div className='SplitScreen'>\n\t\t\t<Split \n\t\t\t\tdirection=\"vertical\" \n\t\t\t\tsizes={[100 - splitSize, splitSize]}\n\t\t\t\tminSize={100}\n\t\t\t\tgutterSize={4}\n\t\t\t\tsnapOffset={1}\n\t\t\t\tdragInterval={20}\n\t\t\t>\n\t\t\t\t{props.children}\n\n\t\t\t</Split>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nSplitScreen.propTypes = {\n\tdefaultSize: PropTypes.number,\n}","import React, { useContext } from 'react'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './ControlledTabContainer.css'\n\n\nexport default function ControlledTabContainer(props) {\n\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"ControlledTabContainer\" style={props.style}>\n\t\t\t\t{React.Children.map(props.children, (child) => {\n\t\t\t\t\t\n\t\t\t\t\tif ((props.activeTab !== child.props.tabID) && props.singleMount){\n\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!child.props.hidden) {\n\t\t\t\t\t\treturn (<div \n\t\t\t\t\t\t\tclassName='tabWrapper' \n\t\t\t\t\t\t\tstyle={props.activeTab === child.props.tabID ? {} : {display: 'None'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t</div>)\n\t\t\t\t\t} else return null\n\t\t\t\t})}\n\t\t\t\t\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nControlledTabContainer.propTypes = {\n\tactiveTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tsingleMount: PropTypes.bool,\n}\n\n\n","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport './Dock.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport lockedContext from '../../Contexts/LockedContext'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function Dock(props) {\n\t\n\tusePresence('TouchPointDock', 0, 'var(--dockWidth)')\n\tconst {Layout} = useSystem()\n\t\n\t//locking the item. If a component somewhere above in the tree is locked, the context will \n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\treturn (\n\t\t<div className='Dock' style={{...props.style, height: Layout.get().heightCSS}}>\n\t\t\t<lockedContext.Provider value={locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\nDock.propTypes={\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n","import {useRef, useEffect} from 'react'\n\nexport default function useShortcuts(shortcuts){\n\t\n\tconst keymap = useRef({})\n\t\n\tfunction keyHandler(e){\n\t\tlet code = ''\n\t\t\n\t\tif(e.ctrlKey || e.metaKey){code = code + 'ctrl'}\n\t\tif(e.shiftKey){code = code + 'shift'}\n\t\tif(e.altKey){code = code + 'alt'}\n\t\tcode = code + e.key.toString().toLowerCase()\n\t\t\n\t\tif(keymap.current[code]){\n\t\t\tkeymap.current[code](e)\n\t\t}\n\t}\n\t\n\tuseEffect(()=>{\n\t\t\n\t\tshortcuts.map(e=>{\n\t\t\tlet code = ''\n\t\t\tif(e.ctrl || e.metaKey){ code = code + 'ctrl' }\n\t\t\tif(e.shift){ code = code + 'shift' }\n\t\t\tif(e.alt){ code = code + 'alt' }\n\t\t\tcode = code + e.key.toString().toLowerCase()\n\t\t\t\n\t\t\tkeymap.current[code] = e.callback\n\t\t})\n\t\t\n\t\tif(shortcuts.length){document.addEventListener('keydown', keyHandler)}\n\t\treturn ()=>document.addEventListener('keydown', keyHandler)\n\t},[])\n}"],"names":["SystemPopupHandler","props","num","activePopups","length","clickBackdrop","e","target","classList","contains","system","Popup","closeAll","map","Pop","idx","popupEffect","display","width","height","popupProps","moduleContext","createContext","SystemModuleContainer","styleSettings","Layout","get","heightCSS","widthCSS","right","moduleList","Modules","list","moduleDataState","useState","Object","keys","m","component","getHomeName","systemContext","lockedContext","ThemeEngine","themes","orange","tableActiveColor","mainTextColor","labelColor","lockedTextColor","navColor","navTextColor","navHoverColor","navClickedColor","bodyAltBG","cardBG","borderColor","freeButtonNeutralBG","freeButtonPositiveBG","freeButtonNegativeBG","freeButtonTextColor","inputColor","inputInvalidColor","inputValidColor","blue","dark","themeName","themeData","toLowerCase","entries","forEach","key","value","document","documentElement","style","setProperty","localStorage","setItem","setTheme","getItem","TouchPointApp","setPopups","setPopupProps","portalDestination","useRef","screenBlock","setScreenBlock","setPopupEffect","locked","moduleLock","setModuleLock","setScreenEffect","newScreenEffect","effectDiv","getElementById","className","drawerExists","setDrawerExists","widths","heights","layout","setLayout","saveSettings","settingsID","settingsToken","getSettings","console","error","System","Theme","set","themeEngine","SystemThemeEngine","open","moduleName","modules","window","location","href","onOpenModule","hidden","homeModule","Input","enable","disable","forTime","setTimeout","PopupComponent","newPopups","newPopupProps","push","close","pop","drawerIsOpen","toString","includes","drawerElement","Drawer","drawerHandler","add","drawerBox","remove","Exists","setExists","Settings","save","io","useEffect","applySavedTheme","newTheme","screenBlocker","children","propTypes","PropTypes","bool","object","isRequired","string","any","func","useSystem","useContext","usePresence","componentName","refreshCSS","layoutSettings","values","h","w","newLayout","AppToolbar","label","AppFooter","Loading","animation","faCircleNotch","CoreButton","lockedFromAbove","undefined","lockedClass","clickHandler","loading","onClick","onBlur","type","tabIndex","title","fontSize","opacity","CloseButton","faTimes","AppDrawer","current","ReactDOM","createPortal","innerStyle","FreeButton","purpose","wideClass","wide","ConfirmButton","expanded","setExpanded","onCollapse","stopPropagation","onExpand","blurHandler","expandedStyle","expandedContent","content","Tile","notifications","notificationBadge","innserStyle","TextBox","changeHandler","onChange","keyPressHandler","onEnter","defaultValue","placeholder","onFocus","inputRef","autoFocus","maxLength","number","useModuleContext","dataSource","setDataSource","newSource","clear","SearchBar","moduleData","useModuleData","searchFunction","setSearchFunction","searchRef","searchBarValue","setSearchBarValue","searchContext","focusSearchBar","focus","keyDownHandler","isCtrl","ctrlKey","metaKey","keyCode","preventDefault","addEventListener","removeEventListener","searchHandler","clearHandler","clearTimeout","customizeValue","newValue","fakeEvent","nestedComponent","alwaysShow","nestedProps","faTimesCircle","radioContext","RadioGroup","uuid","groupName","groupID","radioData","RadioButton","id","buttonStyle","labelStyle","labelValue","ControlBar","searchBar","searchBarProps","CommentBox","blur","ComboBox","kids","CheckBox","checked","menuContext","dropMenu","React","forwardRef","ref","menuMaxWidth","menuStyle","submenu","menuClass","maxWidth","onClickBody","MenuContent","menuProps","MenuButton","toggling","setToggling","toggleHandler","isOpen","onOpen","onClose","parentMenuData","icon","faCaretRight","direction","notificationStyle","dropButton","body","click","menuContent","maxHeight","DockIcon","faIcon","iconStyle","openHandler","active","InfoCard","stripe","hasStripe","stripeColor","titleBar","dynamic","closeHandler","color","closeButton","stripeStyle","borderLeftColor","dynamicX","dynamicY","PopupCard","handleCloseButton","forceOpen","handlKeypress","FilterMenu","header","uniqueValues","selectAllRef","val","newHeaders","dataHeaders","index","selectAll","cb","clearFilter","spanStyle","textAlign","paddingLeft","count","lim","noFilter","hasFilter","cursor","v","i","format","headerID","DataFilter","options","displayName","filter","getFilterTypes","args","err","availableTo","doesNotInclude","lessThan","moment","isBefore","greaterThan","isAfter","equals","isSame","doesNotEqual","MoreFilterButtonActive","filterList","filterID","currentValue","setCurrentValue","commitHandler","addFilter","cancelHandler","setActive","removeFilter","data","trim","MoreFilterButton","activate","newActive","paddingRight","MoreFilters","f","openTrigger","SortMenu","sortData","addSortRule","sort","sortRule","getSortRules","find","sr","sortDir","cancelIcon","removeSortRule","noSort","TheadMenu","TheadButton","arrowIcon","faCaretDown","filterIcon","sortIcon","faSortAlphaDown","faSortAlphaDownAlt","faFilter","setOpenTrigger","setIsOpen","openClass","generateMetadata","noSearch","CheckButton","checkID","disabled","defaultChecked","Proptypes","ColumnSettings","headers","setVisible","applyHandler","overflowY","overflowX","required","visible","faColumns","SaveTableLayout","saveName","setSaveName","validClass","setValidClass","savedLayouts","getSavedLayouts","nameExists","some","name","saveLayout","applyLayout","loadLayout","faCheck","deleteLayout","backgroundColor","padding","faWindowRestore","TableControls","clearFilterButton","layoutButton","settingsButton","expandControls","noOptions","showExpandControls","newExpanded","expandedRows","k","setExpandedRows","faPlus","faMinus","useSettings","applySettings","debouncer","fetchAndApply","token","newToken","PageContols","showPageBack","activePage","showPageForward","pageSize","dataLength","lastRow","diff","setActivePage","pageBack","tableRef","scrollTop","pageForward","paddingTop","faCaretLeft","Math","min","DateCell","initalValue","Date","parse","selectedDate","setSelectedDate","dateSelectHandler","d","selectHandler","keyHandler","focusHandler","commitChanges","faCalendar","InputCell","dataRow","setInitialValue","newVal","escRef","flashRed","flashGreen","customSetRow","newRow","setRow","override","compare","newCellValue","cloneRow","JSON","stringify","dataset","read","rowIndex","onEdit","cellValue","row","oldCellValue","oldRow","res","myOptions","MainTableRow","activeClass","getActiveRecord","primaryKey","noActive","rowClickHandler","selectRecord","renderTrigger","setRenderTrigger","newData","rowContent","hdr","cellClickHandler","cellContent","cellClass","cellText","rowKey","styling","myStyle","marginLeft","expandedClass","expandHandler","expandIcon","fitToWidth","clientWidth","TableBody","rowCount","status","noLoading","isDataset","lastResolved","dataArray","dr","renderRow","searchable","metaData","searchHidden","CoreTable","hasNestedClass","applyToken","setLastResolved","toISOString","searchText","r","setSettingsEngine","hasActiveClass","totalHeaderWidth","PageControls","headerClass","useDataset","fetchFunction","setData","setStatus","lastEdited","setLastEdited","activeRecord","setActiveRecord","newPrimaryKey","fromData","newIndex","findIndex","fetchData","editActiveRecord","newRecord","activeIndex","editSpecificRecord","recordKey","refresh","newKey","setRecord","formatFunctions","date","boolean","other","parseFunctions","input","testVal","subtract","isNaN","parseFloat","slice","newInput","getFullYear","Number","Error","compareFunctions","a","b","DataType","valueFilter","tagFilter","cv","uniqueByColumn","columnID","oldValues","filteredBy","testVals","Array","isArray","orderedRes","DataHeader","arrayFilter","dataType","headerType","setVal","uv","testRes","useHeaders","obj","setHeaders","setSavedLayouts","settingsEngine","tokenTrigger","setTokenTrigger","sortRules","setSortRules","layoutName","newLayouts","saveID","headerOptions","vals","unselectedValues","arrayFilterValues","embedData","newSettings","headerIndex","newSortRules","searchData","newMetaData","rowMeta","filterData","noRender","fltr","newValues","aRow","bRow","aVal","bVal","MainTable","wrapperDataset","newProps","cleanProps","setMetaData","metaOptions","newMeta","search","arrayOf","oneOfType","array","RefreshButton","faSyncAlt","InfoTab","tabID","tabTitle","InfoTabContainer","defaultTab","onTabChange","Children","child","Module","SplitScreen","splitSize","defaultSize","ControlledTabContainer","activeTab","singleMount","Dock","useShortcuts","shortcuts","keymap","code","shiftKey","altKey","ctrl","shift","alt","callback"],"mappings":"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"}