{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/touchpoint-ui/SystemComponents/SystemPopupHandler.js","../src/touchpoint-ui/Contexts/ModuleContext.js","../src/touchpoint-ui/SystemComponents/SystemModuleContainer.js","../src/touchpoint-ui/Contexts/SystemContext.js","../src/touchpoint-ui/Contexts/LockedContext.js","../src/touchpoint-ui/SystemComponents/ThemeEngine.js","../src/touchpoint-ui/Components/Inputs/CoreButton.js","../src/touchpoint-ui/Components/Inputs/CloseButton.js","../src/touchpoint-ui/SystemComponents/SystemDrawerHandler.js","../src/touchpoint-ui/Hooks/UseSystem.js","../src/touchpoint-ui/Hooks/UseSettings.js","../src/touchpoint-ui/Components/Core/TouchPointApp.js","../src/touchpoint-ui/Hooks/UsePresence.js","../src/touchpoint-ui/Components/Core/AppToolbar.js","../src/touchpoint-ui/Components/Core/AppFooter.js","../src/touchpoint-ui/Components/Core/AppDrawer.js","../src/touchpoint-ui/Components/Inputs/FreeButton.js","../src/touchpoint-ui/Components/Inputs/Tile.js","../src/touchpoint-ui/Components/Inputs/TextBox.js","../src/touchpoint-ui/Hooks/UseModuleData.js","../src/touchpoint-ui/Components/Inputs/SearchBar.js","../src/touchpoint-ui/Contexts/RadioContext.js","../src/touchpoint-ui/Components/Inputs/RadioGroup.js","../src/touchpoint-ui/Components/Inputs/RadioButton.js","../src/touchpoint-ui/Components/Inputs/ControlButton.js","../src/touchpoint-ui/Components/Inputs/ControlBar.js","../src/touchpoint-ui/Components/Inputs/CommentBox.js","../src/touchpoint-ui/Components/Inputs/ComboBox.js","../src/touchpoint-ui/Components/Inputs/CheckBox.js","../src/touchpoint-ui/Components/Inputs/DockIcon.js","../src/touchpoint-ui/Components/Containers/InfoCard.js","../src/touchpoint-ui/Components/Display/PopupCard.js","../src/touchpoint-ui/Contexts/MenuContext.js","../src/touchpoint-ui/Components/Display/MenuButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/InputCell.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MainTableRow.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SortMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/FilterMenu.js","../src/touchpoint-ui/DataObjects/DataFilter.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButtonActive.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilterButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/MoreFilters.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadMenu.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TheadButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/CheckButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/ColumnSettings.js","../src/touchpoint-ui/Components/Inputs/ConfirmButton.js","../src/touchpoint-ui/Components/Display/DisplaySupport/SaveTableLayout.js","../src/touchpoint-ui/Components/Display/DisplaySupport/TableControls.js","../src/touchpoint-ui/Components/Display/DisplaySupport/PageContols.js","../src/touchpoint-ui/DataObjects/DataHeader.js","../src/touchpoint-ui/Hooks/UseHeaders.js","../src/touchpoint-ui/Components/Display/MainTable.js","../src/touchpoint-ui/Components/Containers/InfoTab.js","../src/touchpoint-ui/Components/Containers/InfoTabContainer.js","../src/touchpoint-ui/Components/Containers/Module.js","../src/touchpoint-ui/Components/Containers/SplitScreen.js","../src/touchpoint-ui/Components/Containers/ControlledTabContainer.js","../src/touchpoint-ui/Components/Containers/Dock.js","../src/touchpoint-ui/Hooks/UseDataset.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react'\nimport './SystemPopupHandler.css'\n\nexport default function SystemPopupHandler(props) {\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e){\n\t\tif(e.target.classList.contains('systemPopupBackdrop') && (!props.activePopup.props.forceOpen)){\n\t\t\tprops.system.Popup.close()\n\t\t}\n\t}\n\t\n\tlet forceClass = ''\n\tif(props.activePopup!==null && props.activePopup.props.forceOpen){forceClass = 'forceOpen'}\n\t\n\t//If the active popup isn't null, render it\n\tif(props.activePopup != null){\n\t\t\n\treturn (\n\t\t<div \n\t\t\tclassName = {\"systemPopupBackdrop \" + props.popupEffect + ' ' + forceClass} \n\t\t\tonClick = {clickBackdrop}\n\t\t>\n\t\t\t{props.activePopup}\n\t\t</div>)\n\t\t\t\n\t} else return null\n}\n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by a module to talk to it's children (eg. tying a searchbar to a maintable)\nconst moduleContext = createContext({})\nexport default moduleContext ","import React, {useState} from 'react'\nimport {Route, Switch} from 'react-router'\nimport moduleContext from '../Contexts/ModuleContext'\n\t\nexport default function SystemModuleContainer(props){\n\t\n\t//Adjusts the module container to fit between the system toolbars\n\tconst styleSettings = {\n\t\theight: props.system.layout.get().heightCSS,\n\t\twidth: props.system.layout.get().widthCSS,\n\t\tright: '0'\n\t}\n\n\tconst moduleList = props.system.Modules.list();\n\tconst moduleDataState = useState({})\n\n\t//Render the chosen module\n\treturn(\n\t\t\t<moduleContext.Provider value={moduleDataState}>\n\t\t\t\t\n\t\t\t\t<div className={\"moduleContainer\"} style={styleSettings}>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{/*<ActiveModule.component /> */}\n\n\t\t\t\t\t\t{Object.keys(moduleList).map(m => {\n\t\t\t\t\t\t\treturn <Route path={'/' + m} key={'routeFor' + m} component={moduleList[m].component} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<Route path='/' component={moduleList[props.system.Modules.getHomeName()].component} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</moduleContext.Provider>\n\t)\n\t\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//System wide variables (eg. activeUser, theming functions etc.) to be defined in the App component. \nconst systemContext = createContext({})\nexport default systemContext \n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Locking context. If a compnent is locked, then all child components will be locked as well \n//Only certain components support locking (see docs for more information)\nconst lockedContext = createContext(false)\nexport default lockedContext ","export default class ThemeEngine{\n\t\n\tconstructor(){\n\t\t//The list of available themes.\n\t\tthis.themes = {\n\t\t\torange: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(221, 70, 0)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(211, 67, 0)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'rgb(0, 138, 230)',\n\t\t\t\tfreeButtonNegativeBG: 'rgb(211, 67, 0)',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(238, 238, 238)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tblue: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: 'rgb(2, 187, 219)',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(26, 26, 26)',\n\t\t\t\tlabelColor: 'var(--navColor)',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: 'rgb(0, 138, 230)',\n\t\t\t\tnavTextColor: 'white',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: 'rgb(224, 230, 245)',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: 'white',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.705)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: 'rgb(238, 238, 238)',\n\t\t\t\tinputInvalidColor: 'rgb(236, 171, 171)',\n\t\t\t\tinputValidColor: 'rgb(153, 238, 153)',\n\t\t\t},\n\t\t\t\n\t\t\tdark: {\n\t\t\t\t/* Main Table */\n\t\t\t\ttableActiveColor: '#63A1FF',\n\t\t\t\t\n\t\t\t\t/* Text */\n\t\t\t\tmainTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tlabelColor: '#63A1FF',\n\t\t\t\tlockedTextColor: 'rgb(122, 122, 122)',\n\t\t\t\t\n\t\t\t\t/* Nav */\n\t\t\t\tnavColor: '#35363A',\n\t\t\t\tnavTextColor: 'rgb(211, 211, 211)',\n\t\t\t\tnavHoverColor: 'rgb(196, 196, 196)',\n\t\t\t\tnavClickedColor: 'rgb(177, 177, 177)',\n\t\t\t\t\n\t\t\t\t/* Body Background */\n\t\t\t\tbodyAltBG: '#222229',\n\t\t\t\t\n\t\t\t\t/* Cards */\n\t\t\t\tcardBG: '#313440',\n\t\t\t\tborderColor: 'rgba(211, 211, 211, 0.158)',\n\t\t\t\t\n\t\t\t\t/* FreeButtons */\n\t\t\t\tfreeButtonNeutralBG: 'var(--labelColor)',\n\t\t\t\tfreeButtonPositiveBG: 'green',\n\t\t\t\tfreeButtonNegativeBG: 'red',\n\t\t\t\tfreeButtonTextColor: 'white',\n\t\t\t\t\n\t\t\t\t/* Inputs */\n\t\t\t\tinputColor: '#202124',\n\t\t\t\tinputInvalidColor: 'rgb(134, 67, 67)',\n\t\t\t\tinputValidColor: 'rgb(45, 104, 45)',\n\t\t\t},\n\t\t}\n\t}\n\t\n\t//Set the CSS cariables that control theme colors\n\tsetTheme(themeName){\n\t\t//check if a theme exists with that name \n\t\tif(this.themes[themeName]){\n\t\t\t\n\t\t\tconst themeData = this.themes[themeName.toLowerCase()]\n\t\t\t\n\t\t\tObject.entries(themeData).forEach(([key, value]) => {\n\t\t\t\tdocument.documentElement.style.setProperty('--' + key, value)\n\t\t\t})\n\t\t\t\n\t\t\tlocalStorage.setItem('themeName',themeName)\n\t\t}\n\t}\n\t\n\t//fethches the user's preferred theme and applies it\n\tgetUserTheme(){\n\t\tthis.setTheme(localStorage.getItem('themeName'))\n\t}\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './CoreButton.css'\n\n\nexport default function CoreButton(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction clickHandler(e){\n\t\tif(!locked && props.onClick !== undefined){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tif(!props.hidden){return (\n\t\t\n\t\t<button className={'CoreButton ' + lockedClass + ' ' + props.className}\n\t\t\tonClick ={clickHandler}\n\t\t\tstyle = {props.style}\n\t\t\tonBlur = {props.onBlur}\n\t\t>\n\t\t\t{props.children}\n\t\t</button>\n\t\t\n\t)} else{return null}\n}\n\n//Proptypes\nCoreButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonBlur: PropTypes.func,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from './CoreButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faTimes} from \"@fortawesome/free-solid-svg-icons\";\nimport './CloseButton.css'\n\n\nexport default function CloseButton(props) {\n\t\n\treturn (\n\t\t<CoreButton \n\t\t\tclassName = 'CloseButton'\n\t\t\tonClick = {props.onClick}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tstyle = {props.style}\n\t\t>\n\t\t\t<FontAwesomeIcon icon={faTimes}/>\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nCloseButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n\n\n","import React, {useEffect, useState} from 'react'\nimport lockedContext from '../Contexts/LockedContext'\nimport './SystemDrawerHandler.css'\nimport CloseButton from '../Components/Inputs/CloseButton'\n\nexport default function AppDrawer(props) {\n\t\n\tconst trueLeft = props.style && props.style.width ? props.style.width : 'var(--drawerWidth)'\n\tconst [drawerLeft, setDrawerLeft] = useState(!props.drawer.isOpen ? 'calc( ' + trueLeft + ' * -1 )' : null)\n\t\n\tuseEffect(()=>{\n\t\tsetDrawerLeft(!props.drawer.isOpen ? 'calc( ' + trueLeft + ' * -1 )' : null)\n\t},[props.drawer.isOpen])\n\t\n\t//Clicking the background closes the popup\n\tfunction clickBackdrop(e) {\n\t\tif (e.target.classList.contains('SystemDrawerHandler')) {\n\t\t\tprops.drawer.close()\n\t\t}\n\t}\n\t\n\tconst handlerClass = props.drawer.isOpen ? 'SystemDrawerHandler' : ''\n\t\n\tif(props.exists){\n\t\t\n\t\treturn (\n\t\t\t<div className={handlerClass} onClick = {clickBackdrop}>\n\t\t\t\t<lockedContext.Provider value={props.locked}>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={'AppDrawer ' + props.className} \n\t\t\t\t\t\tstyle={{...props.style, left: drawerLeft, opacity: '93%'}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"drawerContainer\" style={props.innerStyle}>\n\t\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\tdisplay: props.drawer.isOpen ? null : 'none'\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<h1>{props.title}</h1>\n\t\t\t\t\t\t\t\t<CloseButton\n\t\t\t\t\t\t\t\t\tlocked={false}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tprops.drawer.close()\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t\t</div>\n\t\t)\n\t\t\n\t} else return null\n}","import systemContext from '../Contexts/SystemContext'\nimport {useContext} from 'react'\n\n//Returns a refference to the System object - allowing modules to interact with the parent app\nexport default function useSystem() {\n\treturn useContext(systemContext)\n}","import {useEffect} from 'react'\nimport useSystem from './UseSystem'\n\nexport default function useSettings(settingsID, applySettings){\n\tconst {get, save} = useSystem().Settings\n\t\n\tuseEffect(() => {\n\t\tconst fetchAndApply = async () => {\n\t\t\ttry{\n\t\t\t\tconst token = await get(settingsID)\n\t\t\t\tapplySettings(token)\n\t\t\t} catch(err){\n\t\t\t\tconsole.error(err)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(settingsID){fetchAndApply()}\n\t}, [])\n\t\n\t\n\treturn (newToken) => {\n\t\tsave(settingsID, newToken)\n\t}\n}","import './TouchPointApp.css'\nimport React, {useState, useEffect} from 'react'\nimport SystemPopupHandler from '../../SystemComponents/SystemPopupHandler'\nimport SystemModuleContainer from '../../SystemComponents/SystemModuleContainer'\nimport systemContext from '../../Contexts/SystemContext'\nimport lockedContext from '../../Contexts/LockedContext'\nimport SystemThemeEngine from '../../SystemComponents/ThemeEngine'\nimport PropTypes from 'prop-types'\nimport {HashRouter} from 'react-router-dom'\nimport SystemDrawerHandler from '../../SystemComponents/SystemDrawerHandler'\nimport useSettings from '../../Hooks/UseSettings'\n\n\nexport default function TouchPointApp(props){\n\t\n\t//System-wide state\n\tconst [activePopup, setPopup] = useState(null);\n\t\n\t//Set moduleTransition to 'transition' while the modules are being switched out\n\tconst [screenBlock, setScreenBlock] = useState(false) //if true, no clicks will register\n\tconst [popupEffect, setPopupEffect] = useState('')\n\tconst [moduleLock, setModuleLock] = useState(props.locked)\n\t\n\tconst [drawerIsOpen, setDrawerIsOpen] = useState(false)\n\tconst [drawerData, setDrawerData] = useState()\n\tconst [screenEffect, setScreenEffect] = useState('')\n\t\n\tconst [layout, setLayout] = useState({\n\t\theightCSS: '100%',\n\t\twidthCSS: '100%',\n\t\t\n\t\twidths: {},\n\t\theights: {},\n\t})\n\t\n\tfunction saveSettings(settingsID, settingsToken){\n\t\tif (props.saveSettings && settingsID) {\n\t\t\tprops.saveSettings(settingsID, settingsToken)\n\t\t}\n\t}\n\t\n\t//Functions that are available to all modules and can be used system-wode \n\t//Used for things like switching modules, sending out emails, etc. for consistency across the system\n\tconst System = {\n\t\t\n\t\t//Setting system wide variables\n\t\tTheme: {\n\t\t\tset:(themeName) => {\n\t\t\t\tconst themeEngine = new SystemThemeEngine()\n\t\t\t\tthemeEngine.setTheme(themeName)\n\t\t\t\tsaveSettings('TouchPointAppTheme', themeName)\n\t\t\t}\n\t\t},\n\t\t\n\t\tModules: {\n\t\t\topen: (moduleName) => {\n\n\t\t\t\tif (props.modules[moduleName]) {\n\t\t\t\t\t//setActiveModule(moduleName)\n\t\t\t\t\twindow.location.href = '#/' + moduleName\n\t\t\t\t\tsetModuleLock(props.modules[moduleName].locked)\n\n\t\t\t\t\tif (props.onOpenModule) { props.onOpenModule(moduleName) }\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tlist: () => {\n\t\t\t\tconst modules = {}\n\t\t\t\tObject.keys(props.modules).forEach((m) => {\n\t\t\t\t\tif (!props.modules[m].hidden) {\n\t\t\t\t\t\tmodules[m] = props.modules[m]\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn modules\n\t\t\t},\n\t\t\t\n\t\t\tgetHomeName: () => { return props.homeModule },\n\t\t},\n\t\t\n\t\tInput: {\n\t\t\tenable:() => {setScreenBlock(false)},\n\t\t\t\n\t\t\tdisable: (forTime) => {\n\t\t\t\tsetScreenBlock(true)\n\n\t\t\t\tif (forTime) {\n\t\t\t\t\tsetTimeout(() => setScreenBlock(false), forTime)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t\n\t\tPopup: {\n\t\t\topen: (PopupComponent) => {\n\t\t\t\tsetScreenBlock(true)\n\t\t\t\tsetTimeout(() => setScreenBlock(false), 400)\n\n\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\tsetPopup(PopupComponent)\n\t\t\t\tsetTimeout(() => setPopupEffect(''), 0)\n\t\t\t},\n\n\t\t\tclose: () => {\n\t\t\t\t// if(activePopup.props.onClose){activePopup.props.onClose()}\n\t\t\t\tsetPopupEffect('transparent')\n\t\t\t\tsetTimeout(() => setPopup(null), 100)\n\t\t\t\tif(!drawerIsOpen){setScreenEffect('')}\n\t\t\t},\n\t\t},\n\t\t\n\t\tDrawer:{\n\t\t\topen: ()=>{ if(!drawerIsOpen){\n\t\t\t\tsetScreenEffect('blurScreenEffect')\n\t\t\t\tsetDrawerIsOpen(true)\n\t\t\t}},\n\t\t\t\n\t\t\tclose: () => { if(drawerIsOpen){\n\t\t\t\tsetDrawerIsOpen(false)\n\t\t\t\tif(!activePopup){setScreenEffect('')}\n\t\t\t}},\n\t\t\t\n\t\t\tdata: drawerData,\n\t\t\tsetData: setDrawerData,\n\t\t\t\n\t\t\tisOpen: drawerIsOpen\n\t\t},\n\t\t\n\t\t//Internal variables for structuring the app\n\t\tlayout: {get: ()=>layout, set: setLayout},\n\t\t\n\t\tSettings: {\n\t\t\tsave: saveSettings,\n\t\t\t\n\t\t\tget: async (settingsID) => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await props.getSettings(settingsID)\n\t\t\t\t} catch(err){\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\tio: props.io\n\t}\n\t\n\t//initial setup - theme and settings\n\tuseEffect(()=>{\n\t\tasync function applySavedTheme(){\n\t\t\tconst newTheme = await System.Settings.get('TouchPointAppTheme')\n\t\t\tif(newTheme){System.Theme.set(newTheme)}\n\t\t}\n\t\t\n\t\tapplySavedTheme()\n\t})\n\t\n\t//Input blocker for clicks\n\tlet screenBlocker = null\n\tif(screenBlock){\n\t\tscreenBlocker = <div className=\"screenBlocker\" />\n\t\t\n\t} else screenBlocker = null\n\t\n\t//The App JSX itself\n\treturn (\n\t\t<div className={\"TouchPointApp \"}>\n\t\t\t<lockedContext.Provider value = {props.locked}>\n\t\t\t\t<systemContext.Provider value ={System}>\n\t\t\t\t\t\t<HashRouter>\n\t\t\t\t\t\t{screenBlocker}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<SystemDrawerHandler\n\t\t\t\t\t\t\tclassName={ activePopup ? screenEffect : ''}\n\t\t\t\t\t\t\t{...System.Drawer.data}\n\t\t\t\t\t\t\tdrawer={System.Drawer}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className={'screenEffect ' + screenEffect}>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<SystemModuleContainer \n\t\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\t\tlocked = {props.locked || moduleLock}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<SystemPopupHandler \n\t\t\t\t\t\t\tsystem = {System} \n\t\t\t\t\t\t\tactivePopup = {activePopup}\n\t\t\t\t\t\t\tpopupEffect = {popupEffect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</HashRouter>\n\t\t\t\t</systemContext.Provider>\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nTouchPointApp.propTypes = {\n\tlocked: PropTypes.bool,\n\tmodules: PropTypes.object.isRequired,\n\thomeModule: PropTypes.string,\n\tio: PropTypes.any,\n\tonOpenModule: PropTypes.func,\n\tsaveSettings: PropTypes.func,\n\tgetSettings: PropTypes.func,\n}\n","import {useEffect} from 'react'\nimport useSystem from './UseSystem'\n\n//Allows a system component (like the app-wide toolbar) to declare its presence, so the module container \n//can resize to fit around them\nexport default function usePresence(componentName, height, width) {\n\t\n\tconst {layout} = useSystem()\n\t\n\tfunction refreshCSS(layoutSettings){\n\t\t\n\t\tlet heightCSS = 'calc(100%'\n\t\tlet widthCSS = 'calc(100%'\n\t\t\n\t\tObject.values(layoutSettings.heights).forEach((h)=>{\n\t\t\t\n\t\t\tif(h){\n\t\t\t\theightCSS = heightCSS + ' - ' + h\n\t\t\t}\n\t\t})\n\t\t\n\t\tObject.values(layoutSettings.widths).forEach((w)=>{\n\t\t\tif(w){\n\t\t\t\twidthCSS = widthCSS + ' - ' + w\n\t\t\t}\n\t\t})\n\t\t\n\t\tlayoutSettings.heightCSS = heightCSS + ')'\n\t\tlayoutSettings.widthCSS = widthCSS + ')'\n\t\t\n\t}\n\t\n\t\n\t\n\tuseEffect(() => {\n\t\t\n\t\tconst newLayout = {...layout.get()}\n\t\tnewLayout.widths[componentName] = width\n\t\tnewLayout.heights[componentName] = height\n\n\t\trefreshCSS(newLayout)\n\t\tlayout.set(newLayout)\n\t\t\n\t\treturn ()=>{\n\t\t\tconst newLayout = { ...layout.get() }\n\t\t\tnewLayout.widths[componentName] = 0\n\t\t\tnewLayout.heights[componentName] = 0\n\n\t\t\trefreshCSS(newLayout)\n\t\t\tlayout.set(newLayout)\n\t\t}\n\t\t\n\t},[])\n\t\t\n}","import React from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './AppToolbar.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport propTypes from 'prop-types'\n\nexport default function AppToolbar(props){\n\t\n\t//Declare itself to the app so the modules can be fit around it \n\tusePresence('TouchPointAppToolbar', 'var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppToolbar flexY\" style = {props.style}>\n\t\t\t<div className=\"buttonContainer flexY\">\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className=\"brandingContainer\">\n\t\t\t\t{props.label}\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t)\n}\n\n//\nAppToolbar.propTypes={\n\tlabel: propTypes.any\n}\n","import React from 'react'\nimport './AppFooter.css'\nimport useSystem from '../../Hooks/UseSystem'\nimport usePresence from '../../Hooks/UsePresence'\n\nexport default function AppFooter(props) {\n\t\n\t//Declare itself to the app so the modules can be fit around it\n\tusePresence('TouchPointAppFooter','var(--appToolbarHeight)')\n\t\n\treturn (\n\t\t<div className=\"AppFooter\" style = {props.style}>\n\t\t\t{props.children}\n\t\t</div>\n\t)\n}\n","import {useContext, useEffect} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function AppDrawer(props){\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst {Drawer} = useSystem()\n\t\n\tuseEffect(() => {\n\t\t\n\t\tconst newProps = { ...props }\n\t\tnewProps.locked = locked\n\t\tnewProps.exists = true\n\t\tDrawer.setData(newProps)\n\t\t\n\t\t\n\t\tif(props.defaultOpen){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tDrawer.open()\n\t\t\t}, 100)\n\t\t}\n\t\t\n\t\t\n\t\treturn () => {\n\t\t\tDrawer.setData({})\n\t\t\tnewProps.exists = false\n\t\t}\n\t},[props.children, props.style, props.locked])\n\t\t\n\t\n\treturn(null)\n\t//Doesn't render aything here, \n\t//sends the props to System, which passes them to the SystemDrawerHandler to render outside the effect area\n}\n\nAppDrawer.propTypes = {\n\tstyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n\tdefaultOpen: PropTypes.bool,\n}","import React from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\n\nimport './FreeButton.css'\n\nexport default function FreeButton(props) {\n\t\n\tlet purpose = 'neutral '\n\tlet wideClass = ''\n\tlet circleClass = ''\n\tif (props.purpose){purpose = props.purpose.toLowerCase()}\n\tif (props.wide){wideClass = 'wide '}\n\t\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tlocked={props.locked}\n\t\t\tonClick ={props.onClick}\n\t\t\thidden={props.hidden}\n\t\t\tclassName = {\"FreeButton \" + purpose + ' ' + wideClass + ' ' + props.className}\n\t\t\tstyle = {props.style}\n\t\t>\n\t\t\t{props.children}\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nFreeButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tpurpose: PropTypes.string,\n\twide: PropTypes.bool,\n\tstyle: PropTypes.object,\n}","import React, {useContext} from 'react'\nimport './Tile.css'\nimport {useState} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\n\nexport default function Tile(props) {\n\t\n\t//When a module is clicked, a splash screen is dispalyed for a second\n\tconst [splash, setSplash] = useState()\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tfunction clickHandler(){\n\t\tif(!locked && props.splashScreen && props.onClick){\n\t\t\tsetSplash('splashScreen')\n\t\t\tsetTimeout( () => {props.onClick()}, 550)\n\t\t\t\n\t\t} else if(!locked && props.onClick){\n\t\t\tprops.onClick()\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<div style = {props.style} className={\"Tile \" + splash} onClick = {clickHandler}> \n\t\t\n\t\t\t<div className=\"logo flexCenter\">\n\t\t\t\t<img src={props.icon}/> \n\t\t\t</div> \n\t\t\t\n\t\t\t{props.title}\n\t\t\t\n\t\t</div>\n\t)\n\t\n}\n\n//Proptypes\nTile.propTypes = {\n\tlocked: PropTypes.bool,\n\ticon: PropTypes.any,\n\ttitle: PropTypes.string,\n\tsplashScreen: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './InputStyles.css'\nimport PropTypes from 'prop-types'\n\nexport default function TextBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\tfunction blurHandler(e){\n\t\tif(!locked && props.onBlur){\n\t\t\tprops.onBlur(e)\n\t\t} \n\t}\n\t\n\t//For the onEnter event\n\tfunction keyPressHandler(e){\n\t\tif(!locked && e.key === 'Enter' && props.onEnter !==undefined){\n\t\t\tprops.onEnter(e)\n\t\t} \n\t}\n\t\n\treturn (\n\t\t<input \n\t\t\ttype=\"text\" \n\t\t\tclassName={\"input TextBox \" + lockedClass}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tonKeyPress={keyPressHandler}\n\t\t\tplaceholder = {props.placeholder}\n\t\t\tonBlur = {blurHandler}\n\t\t\tref = {props.inputRef}\n\t\t\tautoFocus = {props.autoFocus}\n\t\t\tstyle = {props.style}\n\t\t\tvalue = {props.value}\n\t\t/>\n\t)\n}\n\n//Proptypes\nTextBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\tvalue: PropTypes.string,\n\tinputRef: PropTypes.object,\n\tautoFocus: PropTypes.bool,\n\tvalue: PropTypes.string,\n\tonEscape: PropTypes.func,\n}\n\n","import { useContext } from 'react'\nimport moduleContext from '../Contexts/ModuleContext'\n\nexport default function useModuleContext(){\n\tconst [dataSource, setDataSource] = useContext(moduleContext)\n\t\n\treturn({\n\t\tget: (key) => {return dataSource[key]},\n\t\t\n\t\tset: (key, value) => {\n\t\t\tconst newSource = {...dataSource}\n\t\t\tnewSource[key] = value\n\t\t\tsetDataSource(newSource)\n\t\t},\n\t\t\n\t\tclear: () => {setDataSource( {} )}\n\t})\n}","import React, {useState, useRef, useEffect} from 'react'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport TextBox from './TextBox'\nimport PropTypes from 'prop-types'\nimport './SearchBar.css'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faSearch} from \"@fortawesome/free-solid-svg-icons\"\n\nexport default function SearchBar(props) {\n\t\n\t\n\tconst moduleData = useModuleData()\n\tconst [searchFunction, setSearchFunction] = useState()\n\tconst searchRef = useRef()\n\tconst [searchBarValue, setSearchBarValue] = useState('')\n\t\n\t\n\tfunction focusSearchBar(){\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//ctrl f handler\n\tfunction keyDownHandler(e) {\n\t\tconst isCtrl = e.ctrlKey || e.metaKey\n\n\t\tif (isCtrl && e.keyCode === 70) {\n\t\t\te.preventDefault()\n\t\t\tfocusSearchBar()\n\t\t}\n\t}\n\t\n\t\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', keyDownHandler)\n\n\t\treturn (() => {\n\t\t\tmoduleData.clear()\n\t\t\twindow.removeEventListener('keydown', keyDownHandler)\n\t\t})\n\n\t}, [])\n\t\n\t\n\t//search\n\tfunction searchHandler(){\n\t\tmoduleData.set('TouchPointSearchText', searchRef.current.value)\n\t\tsearchRef.current.focus()\n\t}\n\t\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e) {\n\t\tclearTimeout(searchFunction)\n\t\t\n\t\tsetSearchBarValue(e.target.value)\n\n\t\tsetSearchFunction(setTimeout(() => {\n\t\t\tsearchHandler()\n\t\t}, 250))\n\t}\n\t\n\t\n\treturn(\n\t\t<span className=\"SearchBar\"> \n\t\t\t<TextBox \n\t\t\t\tlocked = {false}\n\t\t\t\tonChange= {changeHandler}\n\t\t\t\tonEnter = {searchHandler}\n\t\t\t\tplaceholder = \"Search\"\n\t\t\t\tvalue = {searchBarValue}\n\t\t\t\tinputRef = {searchRef}\n\t\t\t\tstyle = {props.style}\n\t\t\t/>\n\t\t\t\n\t\t\t<button className=\"searchButton\"\n\t\t\t\tonClick = {searchHandler}\n\t\t\t>\n\t\t\t\t<FontAwesomeIcon icon={faSearch} />\n\t\t\t</button>\n\t\t</span>\n\t)\n}\n\n\n//Proptypes\nSearchBar.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tstyle: PropTypes.object,\n}\n","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//Used by RadioGroup to connect all the radio buttons below\nconst radioContext = createContext('')\nexport default radioContext ","import React, { useContext, useState } from 'react'\nimport PropTypes from 'prop-types';\nimport lockedContext from '../../Contexts/LockedContext'\nimport radioContext from '../../Contexts/RadioContext'\nimport {v4 as uuid} from 'uuid'\n\n\nexport default function RadioGroup(props) {\n\t\n\t//decides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\tconst [groupName] = useState(uuid())\n\t\n\tfunction onChange(value){\n\t\tif(props.onChange){\n\t\t\tprops.onChange(value, props.groupID)\n\t\t}\n\t}\n\t\n\tconst radioData = {\n\t\tonChange: onChange,\n\t\tgroupName: groupName,\n\t\tlocked: locked,\n\t\tdefaultValue: props.defaultValue,\n\t\tvalue: props.value,\n\t}\n\t\n\treturn (\n\t\t<radioContext.Provider value={radioData}>\n\t\t\t{props.children}\n\t\t</radioContext.Provider>\n\t)\n}\n\n//Proptypes\nRadioGroup.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tgroupID: PropTypes.any,\n\tvalue: PropTypes.any,\n}\n\n","import React, {useContext, useState} from 'react'\nimport radioContext from '../../Contexts/RadioContext'\nimport './InputStyles.css'\nimport PropTypes from 'prop-types'\nimport './RadioButton.css'\nimport {v4 as uuid} from 'uuid'\n\nexport default function RadioButton(props) {\n\t\n\tconst radioData = useContext(radioContext)\n\tconst [id] = useState(uuid())\n\t\n\tlet lockedClass = ''\n\tif (radioData.locked) { lockedClass = 'locked ' }\n\n\t//handles the clicking of the radio button - for locked radio buttons\n\tfunction clickHandler(e) {\n\t\tif (radioData.locked) {\n\t\t\te.preventDefault()\n\t\t\t\n\t\t} else{\n\t\t\tradioData.onChange(props.value)\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<span className={\"RadioButton flexY \" + lockedClass} style={props.style}>\n\t\t\t\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={radioData.value !== undefined ? undefined : radioData.defaultValue === props.value}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tname = {radioData.groupName}\n\t\t\t\tvalue = {props.value}\n\t\t\t\tstyle={props.buttonStyle}\n\t\t\t\tid = {id}\n\t\t\t\tchecked = {radioData.value !== undefined ? (radioData.value === props.value) : undefined}\n\t\t\t\treadOnly={radioData.value !== undefined}\n\t\t\t/>\n\t\t\t<label \n\t\t\t\tclassName = {lockedClass}\n\t\t\t\thtmlFor = {id}\n\t\t\t\tstyle={props.labelStyle}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{props.labelValue}\n\t\t\t</label>\n\t\t\t\n\t\t</span>\n\t)\n}\n\nRadioButton.propTypes = {\n\tvalue: PropTypes.any,\n\tstyle: PropTypes.object,\n\tlabelStyle: PropTypes.object,\n\tbuttonStyle: PropTypes.object,\n}","import React from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\n\nimport './ControlButton.css'\n\nexport default function ControlButton(props) {\n\treturn (\n\t\t<CoreButton\n\t\t\tlocked={props.locked}\n\t\t\tonClick ={props.onClick}\n\t\t\thidden={props.hidden}\n\t\t\tclassName = {\"ControlButton\"}\n\t\t\tstyle = {props.style}\n\t\t\t\n\t\t>\n\t\t\t{props.children}\n\t\t</CoreButton>\n\t)\n}\n\n//Proptypes\nControlButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\thidden: PropTypes.bool,\n\tstyle: PropTypes.object,\n}","import React, {useContext, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport './ControlBar.css'\nimport SearchBar from './SearchBar'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function ControlBar(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t\n\tif(props.searchBar){\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\" style = {props.style}>\n\t\t\t\t\t<div className=\"buttonContainer\">{props.children}</div>\n\t\t\t\t\t<div className=\"searchContainer\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\t\n\t\t)\n\t\t\n\t} else{\n\t\t\n\t\treturn (\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t<div className=\"ControlBar flexY\">\n\t\t\t\t\t<div className=\"buttonContainer\">{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</lockedContext.Provider>\n\t\t\t\n\t\t)\n\t}\n}\n\n//Proptypes\nControlBar.propTypes = {\n\tsearchBar: PropTypes.bool,\n\tsearchBarProps: PropTypes.object,\n\tlocked: PropTypes.bool, \n\tstyle: PropTypes.object,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './InputStyles.css'\nimport PropTypes from 'prop-types'\nimport './CommentBox.css'\n\nexport default function CommentBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\tfunction blurHandler(e){\n\t\tif(!locked && props.onBlur){\n\t\t\tprops.onBlur(e)\n\t\t} \n\t}\n\t\n\treturn (\n\t\t<textarea\n\t\t\tclassName={\"input CommentBox \" + lockedClass}\n\t\t\tdefaultValue={props.defaultValue}\n\t\t\tonChange={changeHandler}\n\t\t\treadOnly={locked}\n\t\t\tplaceholder={props.placeholder}\n\t\t\tonBlur = {blurHandler}\n\t\t\tstyle = {props.style}\n\t\t\tvalue={props.value}\n\t\t></textarea>\n\t)\n}\n\n//Proptypes\nCommentBox.propTypes = {\n\tlocked: PropTypes.bool,\n\tdefaultValue: PropTypes.string,\n\tonChange: PropTypes.func,\n\thidden: PropTypes.bool,\n\tonEnter: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tclassName: PropTypes.string,\n\theight: PropTypes.string,\n\twidth: PropTypes.string,\n\tvalue: PropTypes.string,\n}\n\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './ComboBox.css'\nimport './InputStyles.css'\nimport PropTypes from 'prop-types'\n\nexport default function ComboBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//if its locked, only allow the default option\n\tlet kids = props.children\n\tif(locked){\n\t\tkids = <option>{props.defaultValue}</option>\n\t}\n\t\n\t//If it's hidden, don't render anything\n\tif (props.hidden){return null} else{return(\n\t\t\t<select \n\t\t\t\tclassName={\"ComboBox input \" + lockedClass} \n\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tdisabled = {locked}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tvalue = {props.value}\n\t\t\t>\n\t\t\t\t{kids}\n\t\t\t</select>\n\t)}\n}\n\n//\nComboBox.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tvalue: PropTypes.string,\n\tdefaultValue: PropTypes.string,\n}\n","import React, {useContext} from 'react'\nimport lockedContext from '../../Contexts/LockedContext'\nimport './InputStyles.css'\nimport PropTypes from 'prop-types'\n\n\nexport default function CheckBox(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\t\n\tlet lockedClass = ''\n\tif (locked){lockedClass = 'locked '}\n\t\n\t//handles the onChange event. Only fires if component is not locked\n\tfunction changeHandler(e){\n\t\tif(!locked && props.onChange !== undefined){\n\t\t\tprops.onChange(e)\n\t\t} \n\t}\n\t\n\t//handles the clicking of the checkbox - for locked checkboxes\n\tfunction clickHandler(e){\n\t\tif(locked){\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\t\n\treturn (\n\t\t<label className=\"CheckBox flexY\">\n\t\t\t<input \n\t\t\t\ttype=\"checkbox\" \n\t\t\t\tclassName={'input ' + lockedClass}\n\t\t\t\tdefaultChecked={props.defaultValue}\n\t\t\t\tonChange={changeHandler}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tstyle = {props.style}\n\t\t\t\tchecked = {props.checked}\n\t\t\t\treadOnly={props.checked !== undefined ? true : false}\n\t\t\t/>\n\t\t\t<span className=\"checkmark\"></span>\n\t\t\t{props.label}\n\t\t</label>\n\t)\n}\n\nCheckBox.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tdefaultValue: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tchecked: PropTypes.bool,\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport CoreButton from '../Inputs/CoreButton'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport './DockIcon.css'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function DockIcon(props) {\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tconst icon = props.faIcon ? <FontAwesomeIcon icon = {props.faIcon} /> : null\n\t\n\tconst iconStyle = {\n\t\tfontSize: props.title ? '17pt' : '20pt'\n\t}\n\t\n\tconst notifications = props.notifications < 90 ? props.notifications : '99+'\n\t\n\tconst notificationBadge = props.notifications && !locked ? \n\t<span className='notifications'>{notifications}</span> \n\t: null\n\t\n\tif(!props.hidden){return (\n\t\t<CoreButton \n\t\t\tclassName = 'DockIcon' \n\t\t\tstyle = {props.style} \n\t\t\tlocked = {props.locked}\n\t\t\tonClick = {props.onClick}\n\t\t>\n\t\t\t{notificationBadge}\n\t\t\t<div className='pic' style = {iconStyle}>{icon}</div>\n\t\t\t<div className='title'>{props.title}</div>\n\t\t</CoreButton>\n\t)} else return null\n}\n\n//proptypes\nDockIcon.propTypes = {\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\ttitle: PropTypes.string,\n\tfaIcon: PropTypes.object,\n\tstyle: PropTypes.object,\n\tnotifications: PropTypes.number,\n\tonClick: PropTypes.func,\n}\n\n","import React, {useContext} from 'react'\nimport './InfoCard.css'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport CloseButton from '../Inputs/CloseButton'\n\nexport default function InfoCard(props) {\n\t\n\t//locking the item. If a component somewhere above in the tree is locked, the context will \n\t//cause this card to be locked as well\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\t//Assign classes based on props \n\tlet stripe = '' //Adds a stripe down the left side\n\tconst hasStripe = props.stripe || props.stripeColor\n\tif(hasStripe && !props.titleBar){stripe = 'stripe'}\n\t\n\t//Adds hover and click effects in the x, y or xy directions\n\tlet dynamic = '' //dynamic effects are ignored if locked\n\tif(!locked){\n\t\tif (props.dynamicX){dynamic = 'dynamicX '}\n\t\tif (props.dynamicY){dynamic = dynamic + ' dynamicY '}\n\t} \n\t\n\t//handles the onClick event. Only fires if the component is not locked\n\tfunction clickHandler(e){\n\t\tif(!locked && props.onClick !== undefined){\n\t\t\tprops.onClick(e)\n\t\t} \n\t}\n\t\n\tfunction closeHandler(e){\n\t\te.stopPropagation()\n\t\tprops.onClose()\n\t}\n\t\n\t//If a title prop is provided, create an H1\n\tlet titleBar\n\tif(props.title){\n\t\ttitleBar = <h1\n\t\t\tstyle={{color: props.stripeColor}}\n\t\t>{props.title}</h1>\n\t}\n\t\n\tlet closeButton\n\tif(props.onClose){\n\t\tcloseButton = <CloseButton onClick = {closeHandler}></CloseButton>\n\t}\n\t\n\tconst stripeStyle = props.stripeColor ? {\n\t\tborderLeftColor: props.stripeColor \n\t} : undefined\n\t\t\n\t//if 'hidden' prop is true then dont show the component\n\tif(props.hidden){return null} else{\n\t\t\n\t\treturn (\n\t\t\t<div \n\t\t\t\tclassName={\"InfoCard \" + dynamic + ' ' + props.className} \n\t\t\t\tonClick = {clickHandler} \n\t\t\t\tstyle = {props.style}\n\t\t\t>\n\t\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"cardContainer\" style = {props.innerStyle}>\t\n\t\t\t\t\t\t<div className={\"textBox \" + stripe} style = {stripeStyle}>\n\t\t\t\t\t\t\t{closeButton}\n\t\t\t\t\t\t\t{titleBar}\n\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</lockedContext.Provider>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n//Proptypes\nInfoCard.propTypes = {\n\ttitle: PropTypes.string,\n\tstripe: PropTypes.bool,\n\tdynamicX: PropTypes.bool,\n\tdynamicY: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\thidden: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tclassName: PropTypes.string,\n\tonClose: PropTypes.func,\n\tstyle: PropTypes.object,\n\tinnerStyle: PropTypes.object,\n\tstripeColor: PropTypes.string,\n}","import React, {useContext, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\nimport InfoCard from '../Containers/InfoCard'\nimport './Popup.css'\nimport useSystem from '../../Hooks/UseSystem'\n\nexport default function PopupCard(props) {\n\tconst system = useSystem()\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\t//Clicking the background closes the popup\n\tlet handleCloseButton\n\tif(!props.forceOpen){\n\t\thandleCloseButton = () => {\n\t\t\tif(!props.forceOpen){\n\t\t\t\tsystem.Popup.close()\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tuseEffect(()=>{\n\t\tif(props.onOpen){ props.onOpen() }\n\t\t\n\t\treturn(()=>{\n\t\t\tif(props.onClose){ props.onClose() }\n\t\t})\n\t\t\n\t},[])\n\t\n\treturn(\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t\n\t\t\t<InfoCard \n\t\t\t\tclassName = {'Popup '}\n\t\t\t\tstripe\n\t\t\t\ttitle = {props.title}\n\t\t\t\tonClose ={handleCloseButton}\n\t\t\t\tstyle = {{...props.style}}\n\t\t\t\tinnerStyle = {{borderColor: props.stripeColor}}\n\t\t\t\tstripeColor = {props.stripeColor}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</InfoCard>\n\t\t\t\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nPopupCard.propTypes = {\n\ttitle: PropTypes.string,\n\tonClose: PropTypes.func,\n\tonOpen: PropTypes.func,\n\tforceOpen: PropTypes.bool,\n\twidth: PropTypes.string,\n\theight: PropTypes.string,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}","//Context hooks for variable and functions that are system wide\nimport { createContext } from 'react'\n\n//used by dropdown menus to talk to items inside of themselves \nconst menuContext = createContext({})\nexport default menuContext \n","import React, {useContext, useState} from 'react'\nimport ReactDOM from 'react-dom'\nimport lockedContext from '../../Contexts/LockedContext'\nimport menuContext from '../../Contexts/MenuContext'\nimport PropTypes from 'prop-types'\nimport './MenuButton.css'\nimport {Dropdown} from 'react-bootstrap'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faCaretRight} from '@fortawesome/free-solid-svg-icons'\n\nconst dropMenu = React.forwardRef(\n\t(props, ref) => {\n\t\treturn (\n\t\t\t<menuContext.Provider value={{submenu: true}}>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={props.className + ' Menu ' + props.menuClass}\n\t\t\t\t\tstyle={{...props.style, ...props.menuStyle}}\n\t\t\t\t\tonClick={props.onClickBody}\n\t\t\t\t>\n\t\t\t\t\t{typeof (props.MenuContent) == 'function' ? <props.MenuContent /> : props.MenuContent}\n\t\t\t\t</div>\n\t\t\t</menuContext.Provider>\n\t\t)\n\t}\n)\n\nexport default function MenuButton(props){\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tlet lockedClass\n\tif(locked){lockedClass = 'locked'}\n\t\n\tconst [toggling, setToggling] = useState(false)\n\t\n\t//handles both onOpen and onClose\n\tfunction toggleHandler(isOpen){\n\t\t\n\t\tif(!toggling && isOpen && props.onOpen){\n\t\t\tprops.onOpen()\n\t\t\t\n\t\t} else if(!toggling && props.onClose && !isOpen){\n\t\t\tprops.onClose()\n\t\t\tsetToggling(true)\n\t\t}\n\t\t\n\t\t//Prevent spamming\n\t\tsetTimeout(()=>setToggling(false), 300)\n\t}\n\t\n\t//check if it's inside of another menu, if so render as a submenu\n\tconst parentMenuData = useContext(menuContext)\n\tconst icon = parentMenuData.submenu ? <span className='subMenuIcon'>\n\t\t\t<FontAwesomeIcon icon={faCaretRight} />\n\t</span> : null\n\n\t\n\tlet direction = props.direction\n\tif(parentMenuData.submenu){\n\t\tdirection = 'right'\n\t}\n\n\t\n\t//button\n\tconst dropButton = React.forwardRef(({onClick}, ref)=> { \n\t\t\n\t\tfunction clickHandler(e){\n\t\t\te.preventDefault() \n\t\t\tonClick(e)\n\t\t}\n\t\t\n\t\treturn( \n\t\t\t<button \n\t\t\t\tclassName={'MenuButton '+ props.className + ' ' + lockedClass}\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tref={ref}\n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{icon}\n\t\t\t\t\n\t\t\t</button>\n\t\t)\n\t})\n\t\n\t//Prevent submenus from sticking around after their parent has closed\n\tfunction onClickBody(){\n\t\tif(parentMenuData.submenu){\n\t\t\tdocument.body.click()\n\t\t}\n\t}\n\t\n\t\n\t//If locked return a button that does nothing, otherwise create a real dropdown button\n\tif(locked){\n\t\t\n\t\treturn (<button\n\t\t\t\tclassName={'MenuButton ' + props.className + ' ' + lockedClass}\n\t\t\t\tstyle={props.style}\n\t\t\t>\n\t\t\t\t\n\t\t\t{props.children}\n\t\t\t{icon}\n\n\t\t</button>)\n\t\t\n\t} else return(\n\t\t\n\t\t<span className = 'menuButtonContainer'>\n\t\t\t<Dropdown drop={direction} onToggle = {toggleHandler}>\n\t\t\t\t\n\t\t\t\t<Dropdown.Toggle as={dropButton}/>\n\t\t\t\t\n\t\t\t\t{\n\t\t\t\t\tReactDOM.createPortal(<Dropdown.Menu \n\t\t\t\t\t\tas={dropMenu}\n\t\t\t\t\t\tMenuContent = {props.menuContent}\n\t\t\t\t\t\tmenuStyle = {props.menuStyle}\n\t\t\t\t\t\tonClickBody = {onClickBody}\n\t\t\t\t\t/>, document.body)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t</Dropdown>\n\t\t</span>\n\t\t\n\t)\n}\n\n//Proptypes\nMenuButton.propTypes = {\n\tlocked: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tmenuContent: PropTypes.any.isRequired,\n\tmaxHeight: PropTypes.string,\n\tdirection: PropTypes.string,\n\tonOpen: PropTypes.func,\n\tonClose: PropTypes.func,\n\tmenuStyle: PropTypes.object,\n\tstyle: PropTypes.object,\n}","import React, {useState, useEffect} from 'react'\n\nexport default function InputCell(props) {\n\t\n\tconst [initalValue, setInitialValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.dataRow[props.header.headerID] ? props.header.format(props.dataRow[props.header.headerID]) : ''\n\t)\n\t\n\t// Update the value if the data is changed by an outside source\n\tuseEffect(() => {\n\t\tconst newVal = props.dataRow[props.header.headerID] ? props.dataRow[props.header.headerID] : ''\n\t\tsetCurrentValue(props.header.format(newVal))\n\t\tsetInitialValue(newVal)\n\t\t\n\t}, [ props.dataRow[props.header.headerID] ])\n\t\n\t//When you focus on an item, the value is saved. if you escape, its restored\n\tfunction focusHandler(e){\n\t\tsetInitialValue(e.target.value)\n\t}\n\t\n\t//Chaches the value and updates the dataset when you're done editing\n\tfunction changeHandler(e){\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\t//Handles keypresses, for enter or esc keys\n\tfunction keyHandler(e){\n\t\tif(e.keyCode === 27) { //esc\n\t\t\tsetCurrentValue(initalValue)\n\t\t\te.target.blur()\n\t\t} else if(e.keyCode === 13){ //enter\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction flashRed(){\n\t\tsetValidClass('invalid')\n\t\tsetTimeout(()=>setValidClass(''), 200)\n\t}\n\t\n\tfunction flashGreen() {\n\t\tsetValidClass('valid')\n\t\tsetTimeout(() => setValidClass(''), 0)\n\t}\n\t\n\t//Check if the input is valid and commit\n\tasync function commitChanges(){\n\t\ttry{\n\t\t\tif (props.header.compare(props.dataRow[props.header.headerID], currentValue)) { return }\n\t\t\tconst newData = JSON.parse(JSON.stringify([...props.dataset.read()]))\n\t\t\tconst newCellValue = props.header.parse(currentValue)\n\t\t\t\n\t\t\tnewData[props.rowIndex][props.header.headerID] = newCellValue\n\t\t\t\n\t\t\tconst res = await props.header.onEdit(currentValue, newData[props.rowIndex], initalValue, props.dataset.read()[props.rowIndex])\n\t\t\t\n\t\t\tif(res || res === undefined){\n\t\t\t\tprops.dataset.set(newData)\n\t\t\t\tsetCurrentValue(props.header.format(currentValue))\n\t\t\t\tflashGreen()\n\t\t\t} else{\n\t\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\t\tflashRed()\n\t\t\t}\n\t\t\t\n\t\t} catch (err){\n\t\t\tsetCurrentValue(props.header.format(initalValue))\n\t\t\tflashRed()\n\t\t}\n\t\t\n\t}\n\t\n\tfunction blurHandler(){\n\t\tcommitChanges()//Force it to wait untill React finishes all updates before executing\n\t}\n\t\n\treturn(<input\n\t\ttype = 'text'\n\t\tclassName = {'InputCell input ' + validClass}\n\t\tonKeyDown = {keyHandler}\n\t\tonFocus = {focusHandler}\n\t\tonBlur = {blurHandler}\n\t\tvalue = {currentValue}\n\t\tonChange = {changeHandler}\n\t/>)\n}","import React, {useEffect, useState} from 'react'\nimport './MainTableRow.css'\nimport InputCell from './InputCell'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons'\n\nexport default function MainTableRow(props) {\n\t\n\tconst activeClass = props.dataset.getActiveRecord && props.dataset.getActiveRecord()[props.dataset.primaryKey] === props.dataRow[props.dataset.primaryKey]\n\t? ' active '\n\t: ''\n\t\n\tfunction rowClickHandler(){\n\t\tif(!props.noActive){\n\t\t\tprops.dataset.selectRecord( props.dataRow[props.dataset.primaryKey])\n\t\t}\n\t}\n\t\n\tconst rowContent = props.dataHeaders.map((hdr, i) => {\n\t\tif(hdr.visible){\n\t\t\t\n\t\t\t//Decide if the cell is editable or not based on the locked status, and the header onEdit function\n\t\t\tlet cellContent\n\t\t\tlet cellClass = ''\n\t\t\t\n\t\t\tif(!props.locked && hdr.onEdit && !hdr.locked){\n\t\t\t\t\n\t\t\t\tcellContent = <InputCell \n\t\t\t\t\theader = {hdr}\n\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\trowIndex = {props.rowIndex}\n\t\t\t\t\tdataset = {props.dataset}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\tcellClass = 'inputWrapper'\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tcellContent = hdr.format(props.dataRow[hdr.headerID])\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif (!hdr.styling){ //No conditional formatting\n\t\t\t\treturn(<span \n\t\t\t\t\tkey = {hdr.headerID + props.rowKey} \n\t\t\t\t\tstyle = {{width: hdr.width + 'px'}}\n\t\t\t\t\tclassName = {cellClass}\n\t\t\t\t>\n\t\t\t\t\t{cellContent}\n\t\t\t\t</span>)\n\t\t\t\n\t\t\t} else{ //with coniditional formatting\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tconst myStyle = hdr.styling(props.dataRow[hdr.headerID], props.dataRow)\n\t\t\t\t\n\t\t\t\treturn( \n\t\t\t\t\t<span className = {'badge ' + cellClass}\n\t\t\t\t\tkey = {hdr.headerID + props.rowKey + i} \n\t\t\t\t\tstyle = {{\n\t\t\t\t\t\twidth: 'calc(' + hdr.width + 'px - 23px)',\n\t\t\t\t\t\t...myStyle,\n\t\t\t\t\t\tmarginLeft: '23px'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t</span>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t})\n\t\n\tconst [expanded, setExpanded] = useState(false)\n\tconst expandedClass = expanded ? ' expanded ' : ''\n\t\n\tfunction expandHandler(e){\n\t\t//don't set the active row when collapsing \n\t\tif (expanded) { e.stopPropagation()}\n\t\tsetExpanded(!expanded)\n\t}\n\t\n\t//Listeners to expand all and collapse all events from the parent maintable\n\tuseEffect(()=>{\n\t\tsetExpanded(true)\n\t},[props.expandTrigger])\n\t\n\tuseEffect(() => {\n\t\tsetExpanded(false)\n\t}, [props.collapseTrigger])\n\t\n\t//Allow nested components to update their dataRow\n\tfunction setDataRow(newRow){\n\t\tconst newData = [...props.dataset.read()]\n\t\tnewData[props.rowIndex] = newRow\n\t\tprops.dataset.set(newData)\n\t}\n\t\n\tconst expandIcon = props.nestedComponent ? <span className='expandButton' onClick={expandHandler}>\n\t\t{expanded ? <FontAwesomeIcon icon={faMinus} /> : <FontAwesomeIcon icon={faPlus} />}\n\t</span> : null\n\t\n\treturn(\n\t\t<div\n\t\t\tclassName={'MainTableRow ' + activeClass + expandedClass} \n\t\t\tonClick = {rowClickHandler}\n\t\t>\n\t\t\t<div className={'topRow'}>\n\t\t\t\t{expandIcon}\n\t\t\t\t{rowContent}\n\t\t\t</div>\n\t\t\t\n\t\t\t{expanded && props.nestedComponent ? <div \n\t\t\t\tclassName = 'componentWrapper'\n\t\t\t>\n\t\t\t\t<div className=\"keepInView\" style={{\n\t\t\t\t\twidth: props.tableRef.current ? 'calc(' + props.tableRef.current.clientWidth + 'px - 35px)' : null,\n\t\t\t\t\tleft: props.scrollPos\n\t\t\t\t}}>\n\t\t\t\t\t<props.nestedComponent\n\t\t\t\t\t\t{...props.nestedProps}\n\t\t\t\t\t\tdataRow = {props.dataRow}\n\t\t\t\t\t\tsetDataRow = {setDataRow}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div> : null}\n\t\t\t\n\t\t</div>\n\t)\n}","import React from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function SortMenu(props){\n\t\n\tfunction sortData(e){\n\t\tprops.dataHeaders.addSortRule(props.header.headerID, e.target.value, props.header.index)\n\t\tprops.data.sort()\n\t}\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\tconst sortDir = sortRule ? sortRule.direction : ''\n\n\tconst cancelIcon = <span className = 'sortIcon' onClick={(e)=>{\n\t\tprops.dataHeaders.removeSortRule(props.header.headerID)\n\t\tprops.data.sort()\n\t\te.stopPropagation()\n\t}}>\n\t\t<FontAwesomeIcon icon={faTimes} />\n\t</span>\n\t\n\tif(!props.noSort){return (\n\t\t<div className='SortMenu' >\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'asc'}>\n\t\t\t\tSort Ascending\n\t\t\t\t{sortDir === 'asc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t\t\n\t\t\t<button onClick={sortData} className='fullButton sortButton' value={'desc'}>\n\t\t\t\tSort Descending\n\t\t\t\t{sortDir === 'desc' ? cancelIcon : null}\n\t\t\t</button>\n\t\t</div>\n\t)} else return null\n}\n","import React from 'react'\nimport './SortMenu'\n\n\nexport default function FilterMenu(props){\n\n\tconst values = props.header.uniqueValues\n\t\n\tfunction clickHandler(e, id){\n\t\tconst cb = document.getElementById(id)\n\t\tif(e.target !== cb){cb.checked = !cb.checked}\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\tnewHeaders[props.header.index].uniqueValues[cb.value] = cb.checked\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction selectAll(e){\n\t\tconst cb = document.getElementById(props.header.headerID + 'selectAll')\n\t\tif (e.target !== cb) { cb.checked = !cb.checked }\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\n\t\tif(cb.checked){\n\t\t\tnewHeaders[props.header.index].clearFilter()\n\t\t} else{\n\t\t\tnewHeaders[props.header.index].selectAll(cb.checked)\n\t\t}\n\t\t\t\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\tlet count = -1\n\tconst lim = 200\n\t\n\tif(!props.noFilter){ return (\n\t\t<div className = 'FilterMenu'>\n\t\t\t\n\t\t\t<div className='stickyMenu'>\n\t\t\t\t\n\t\t\t\t<button onClick={selectAll} className = 'selectAll fullButton'>\n\t\t\t\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={!props.header.hasFilter()}\n\t\t\t\t\t\tid={props.header.headerID + 'selectAll'}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span style={spanStyle}>{'Select All'}</span>\n\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t{Object.keys(values).map((v, i) => {\n\t\t\t\t\n\t\t\t\tcount++\n\t\t\t\t\n\t\t\t\t//Limit the number of checkboxes that are rendered to 200\n\t\t\t\tif(count < lim){return (<button\n\t\t\t\t\tclassName = {'fullButton'}\n\t\t\t\t\tkey={props.header.id + 'fv' + count}\n\t\t\t\t\tonClick={(e) => clickHandler(e, props.header.headerID + 'fcb' + i)}\n\t\t\t\t\ttitle = {v}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype = 'checkbox'\n\t\t\t\t\t\tchecked = {values[v]}\n\t\t\t\t\t\tid={props.header.headerID + 'fcb' + i}\n\t\t\t\t\t\tvalue = {v}\n\t\t\t\t\t\tstyle= {{cursor:'pointer'}}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t\t<span style={spanStyle}>{v !== 0 && !v ? 'Blank' : props.header.format(v)}</span>\n\t\t\t\t\t\n\t\t\t\t</button>)} else return null\n\t\t\t\t\n\t\t\t})}\n\t\t\t\n\t\t\t{count >= lim ? <button>... {count - lim} More</button> : null}\n\t\t\t\t\n\n\t\t</div>\n\t)} else return null\n}","import moment from 'moment'\n\nexport default class DataFilter{\n\t\n\tconstructor(options){\n\t\tthis.options = options\n\t\tthis.displayName = options.type\n\t\tthis.filter = DataFilter.getFilterTypes()[options.id] ? DataFilter.getFilterTypes()[options.id].func : ()=>{return true}\n\t\tthis.displayName = DataFilter.getFilterTypes()[options.id].displayName\n\t\tthis.args = DataFilter.getFilterTypes()[options.id].args\n\t\tthis.options.value = options.value.toString().toLowerCase()\n\t}\n\t\n\t\n\tfunc(val){\n\t\ttry{\n\t\t\treturn(this.filter(val, this.options))\n\t\t} catch(err){\n\t\t\treturn false\n\t\t}\n\t}\n\t\n\t\n\tstatic getFilterTypes(){\n\t\t\n\t\treturn {\n\t\t\t\n\t\t\tincludes: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Includes',\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tdoesNotInclude: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn !val.toString().toLowerCase().includes(options.value)\n\t\t\t\t},\n\t\t\t\tdisplayName: \"Doesn't Include\",\n\t\t\t\tavailableTo: ['string'],\n\t\t\t},\n\n\t\t\tlessThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val < options.value || moment(val).isBefore(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Less than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\n\t\t\tgreaterThan: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val > options.value || moment(val).isAfter(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Greater than',\n\t\t\t\tavailableTo: ['number', 'date'],\n\t\t\t},\n\t\t\t\n\t\t\tequals: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() == options.value || moment(val).isSame(options.value, 'day')\n\t\t\t\t},\n\t\t\t\tdisplayName: 'Equals',\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\n\t\t\tdoesNotEqual: {\n\t\t\t\tfunc: (val, options) => {\n\t\t\t\t\treturn val.toString().toLowerCase() != options.value && !moment(val).isSame(options.value, 'day')\n\t\t\t\t}, \n\t\t\t\tdisplayName: \"Doesn't Equal\",\n\t\t\t\tavailableTo: ['string', 'number', 'boolean', 'date'],\n\t\t\t},\n\t\t\t\n\t\t}\n\t\t\n\t}\n}","import React, { useState, useEffect } from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faTimes} from '@fortawesome/free-solid-svg-icons'\n\nexport default function MoreFilterButtonActive(props) {\n\t\n\t\n\tconst [currentValue, setCurrentValue] = useState(\n\t\tprops.header.filterList[props.filterID] && props.header.filterList[props.filterID].options.value ? \n\t\tprops.header.format(props.header.filterList[props.filterID].options.value) : ''\n\t)\n\t\n\tfunction changeHandler(e) {\n\t\tsetCurrentValue(e.target.value)\n\t}\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst newHeaders = [...props.dataHeaders.get()]\n\n\t\tnewHeaders[props.header.index].addFilter({\n\t\t\tid: props.filterID,\n\t\t\tvalue: currentValue\n\t\t})\n\n\t\tprops.dataHeaders.set(newHeaders)\n\t}\n\t\n\tfunction cancelHandler(){\n\t\t\n\t\tprops.setActive(false)\n\t\t\n\t\t//if filter exists, remove it\n\t\tif (props.header.filterList[props.filterID]){\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].removeFilter(props.filterID)\n\t\t\tprops.dataHeaders.set(newHeaders)\n\n\t\t}\n\n\t\tprops.data.filter()\n\t}\n\t\n\tfunction keyDownHandler(e){\n\t\tif(e.key === 'Enter'){\n\t\t\te.target.blur()\n\t\t} \n\t}\n\t\n\t\n\tfunction blurHandler(e){\n\t\tif (currentValue.trim() === ''){\n\t\t\tcancelHandler()\n\t\t} else{\n\t\t\tcommitHandler()\n\t\t}\n\t}\n\t\n\treturn(\n\t\t<button \n\t\t\tclassName='MoreFilterButtonActive disabled' \n\t\t>\n\t\t\t\n\t\t\t<span className = 'tag'>{props.filter.displayName}</span>\n\t\t\t<br/>\n\t\t\t\n\t\t\t<input \n\t\t\t\tclassName = {'input wrap'}\n\t\t\t\tautoFocus\n\t\t\t\tonChange = {changeHandler}\n\t\t\t\tvalue={currentValue}\n\t\t\t\tonKeyDown = {keyDownHandler}\n\t\t\t\tonBlur={blurHandler}\n\t\t\t/>\n\t\t\t\n\t\t\t<span className='cancelIcon' onClick={cancelHandler} >\n\t\t\t\t<FontAwesomeIcon icon={faTimes} />\n\t\t\t</span>\n\t\t\t\n\t\t</button>\n\t)\n}","import React, {useState, useEffect} from 'react'\nimport MoreFilterButtonActive from './MoreFilterButtonActive'\n\nexport default function MoreFilterButton(props) {\n\t\n\tconst [active, setActive] = useState(props.header.filterList[props.filterID] ? true : false)\n\t\n\tfunction activate(){\n\t\tif(!active){\n\t\t\tsetActive(true)\n\t\t\t\n\t\t\tconst newHeaders = [...props.dataHeaders.get()]\n\t\t\tnewHeaders[props.header.index].addFilter({\n\t\t\t\tid: props.filterID,\n\t\t\t\tvalue: ''\n\t\t\t})\n\t\t\t\n\t\t\tprops.dataHeaders.set(newHeaders)\n\t\t}\n\t}\n\t\n\tuseEffect(() => {\n\t\tconst newActive = props.header.filterList[props.filterID] ? true : false\n\t\tif (active !== newActive) { setActive(newActive) }\n\t})\n\t\n\tif(!active){return(\n\t\t<button onClick = {activate} className = 'MoreFilterButton'>\n\t\t\t<span style = {{paddingRight: '10px'}}>{props.filter.displayName}</span>\n\t\t</button>\n\t\t\n\t)} else{ return(\n\t\t\n\t\t<MoreFilterButtonActive\n\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t\tfilter = {props.filter}\n\t\t\tfilterID = {props.filterID}\n\t\t\theader = {props.header}\n\t\t\tsetActive = {setActive}\n\t\t\tactive = {active}\n\t\t/>\n\t\t\n\t)}\n}","import React from 'react'\nimport DataFilter from '../../../DataObjects/DataFilter'\nimport './MoreFilterButton'\nimport MoreFilterButton from './MoreFilterButton'\n\nexport default function MoreFilters(props) {\n\t\n\tconst filterList = DataFilter.getFilterTypes()\n\t\n\tif(!props.noFilter){return (\n\t\t<div className = 'MoreFilters'>\n\t\t\t\n\t\t\t{Object.keys(filterList).map((f, i)=>{\n\t\t\t\t\n\t\t\t\tif (filterList[f].availableTo.includes(props.header.type)){\n\t\t\t\t\t\n\t\t\t\t\treturn <MoreFilterButton \n\t\t\t\t\t\tkey = {'MoreFilterButton' + i}\n\t\t\t\t\t\tfilter = {filterList[f]}\n\t\t\t\t\t\tfilterID = {f}\n\t\t\t\t\t\theader = {props.header}\n\t\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\t\tdata = {props.data}\n\t\t\t\t\t\topenTrigger = {props.openTrigger}\n\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t} else return null\n\t\t\t})}\n\t\t\t\n\t\t</div>\n\t)} else return null\n}","import React from 'react'\nimport './TheadMenu.css'\nimport FilterMenu from './FilterMenu'\nimport MoreFilters from './MoreFilters'\nimport SortMenu from './SortMenu'\n\n\nexport default function TheadMenu(props) {\n\t\n\t\n\treturn (\n\t\t<div className = 'TheadMenu'>\n\t\t\t<FilterMenu\n\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\theader={props.header}\n\t\t\t\tdata={props.data}\n\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t/>\n\t\t\t\n\t\t\t<div className='sideMenu' style={{ width: props.noFilter ? '100%' : null }}>\n\t\t\t\t\n\t\t\t\t<SortMenu \n\t\t\t\t\tdata = {props.data}\n\t\t\t\t\theader = {props.header}\n\t\t\t\t\tdataHeaders = {props.dataHeaders}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<MoreFilters\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoFilter={props.noFilter}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faCaretDown, faFilter, faSortAlphaDown, faSortAlphaDownAlt} from '@fortawesome/free-solid-svg-icons'\nimport TheadMenu from './TheadMenu'\nimport './TheadMenu'\n\n\nexport default function TheadButton(props){\n\t\n\t//if there is a menu, add a dropdown icon\n\tlet arrowIcon = <span><FontAwesomeIcon icon={faCaretDown}/></span>\t\n\tlet filterIcon = null\n\tlet sortIcon = null\n\t\n\tconst hasFilter = props.header.hasFilter()\n\t\n\tconst sortRule = props.dataHeaders.getSortRules().find(sr => sr.headerID === props.header.headerID)\n\t\t\n\tif(sortRule){\n\t\tarrowIcon = null\n\t\tsortIcon = sortRule.direction === 'asc' ?\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDown} /></span> :\n\t\t<span><FontAwesomeIcon icon={faSortAlphaDownAlt} /></span>\n\t}\n\t\n\t\n\tif (hasFilter) {\n\t\tarrowIcon = null\n\t\tfilterIcon = <span className='smallIcon' style={{\n\t\t\tpaddingLeft: '5px',\n\t\t}}><FontAwesomeIcon icon={faFilter} /></span>\n\t}\n\t\n\t//changes every time the menu opens. Used by useEffect listeners in teh menu to respond to the open event\n\tconst [openTrigger, setOpenTrigger] = useState(false) \n\tconst [isOpen, setIsOpen] = useState(false)\n\t\n\tconst openClass = isOpen ? ' open ' : ''\n\t\n\tif(props.noSort && props.noFilter) { \n\t\t\n\t\treturn(props.children)\n\t\t\n\t} else{\n\t\treturn (\n\t\t\t<MenuButton \n\t\t\t\tclassName={'TheadButton '  + openClass} \n\t\t\t\tlocked = {false} \n\t\t\t\tonOpen = {()=>{\n\t\t\t\t\tsetOpenTrigger(!openTrigger)\n\t\t\t\t\tsetIsOpen(true)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tonClose = {()=>{\n\t\t\t\t\tprops.data.filter()\n\t\t\t\t\tsetIsOpen(false)\n\t\t\t\t}}\n\t\t\t\t\n\t\t\t\tmenuContent={<TheadMenu\n\t\t\t\t\tdataHeaders={props.dataHeaders}\n\t\t\t\t\theader={props.header}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\topenTrigger={props.openTrigger}\n\t\t\t\t\tnoSort = {props.noSort}\n\t\t\t\t\tnoFilter = {props.noFilter}\n\t\t\t\t/>}\n\t\t\t\t\n\t\t\t\tmenuStyle = {{\n\t\t\t\t\tmaxWidth: props.noFilter ? '180px' : '350px', \n\t\t\t\t\tmaxHeight: '310px'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t\t{arrowIcon}\n\t\t\t\t{sortIcon}\t\t\n\t\t\t\t{filterIcon}\t\t\t\t\n\t\t\t</MenuButton>\n\t\t)\n\t}\n}\n\n","import React from 'react'\nimport Proptypes from 'prop-types'\nimport {v4 as uuid} from 'uuid'\n\nexport default function CheckButton(props) {\n\t\n\tconst checkID = uuid()\n\t\n\tfunction clickHandler(e, id) {\n\t\tif(!props.disabled){\n\t\t\tconst cb = document.getElementById(id)\n\t\t\tif (e.target !== cb) {cb.checked = !cb.checked}\n\t\t\t\n\t\t\tif(props.onClick){props.onClick(cb.checked, props.value)}\n\t\t}\n\t}\n\t\n\tconst spanStyle = {\n\t\ttextAlign: 'left',\n\t\tpaddingLeft: '7px',\n\t}\n\t\n\treturn (<button\n\t\tonClick={(e) => clickHandler(e, checkID)}\n\t\tstyle ={{color: 'var(--mainTextColor'}}\n\t>\n\n\t\t<input\n\t\t\ttype='checkbox'\n\t\t\tdefaultChecked={props.defaultChecked}\n\t\t\tid={checkID}\n\t\t\tvalue={props.value}\n\t\t\tstyle={{cursor: 'pointer'}}\n\t\t\tdisabled = {props.disabled}\n\t\t\tchecked = {props.checked}\n\t\t\treadOnly = {props.checked !== undefined ? true : false}\n\t\t/>\n\t\t<span style={spanStyle}>{props.children}</span>\n\t\t\n\n\t</button>)\n\t\n}\n\n\nCheckButton.propTypes={\n\tdefaultChecked: Proptypes.bool,\n\tvalue: Proptypes.any,\n\tlabel: Proptypes.string,\n\tonClick: Proptypes.func,\n\tdisabled: Proptypes.bool,\n\tchecked: Proptypes.bool,\n}","import React from 'react'\nimport CheckButton from './CheckButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faColumns} from '@fortawesome/free-solid-svg-icons'\nimport MenuButton from '../MenuButton'\n\nexport default function ColumnSettings(props) {\n\n\tfunction clickHandler(checked, idx){\n\t\t\n\t\tprops.setTransitionClass('noTransition')\n\t\tprops.headers.setVisible(idx, checked)\n\t\t\n\t\tsetTimeout(()=>{\n\t\t\tprops.data.sort()\n\t\t\tprops.setTransitionClass('')\n\t\t},0)\n\t}\n\t\n\treturn (<MenuButton \n\t\t\tlocked={false} \n\t\t\tmenuStyle={{\n\t\t\t\tmaxHeight: '300px'\n\t\t\t}}\n\t\t\tmenuContent={\n\t\t\t\t<div style = {{overflowY: 'auto'}}>\n\t\t\t\t\t{props.headers.get().map((h) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CheckButton\n\t\t\t\t\t\t\t\tkey={'customizeHeader' + h.headerID}\n\t\t\t\t\t\t\t\tdisabled={h.required}\n\t\t\t\t\t\t\t\tchecked={h.visible}\n\t\t\t\t\t\t\t\tvalue={h.index}\n\t\t\t\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t\t\t\t>{h.displayName}</CheckButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t}>\n\t\t\t<FontAwesomeIcon icon={faColumns} /> Column Settings\n\t</MenuButton>\n\t\t\n\t)\n}","import React, {useState} from 'react'\nimport CoreButton from './CoreButton'\nimport PropTypes from 'prop-types'\nimport './ConfirmButton.css'\n\nexport default function ConfirmButton(props) {\n\t\n\tconst [expanded, setExpanded] = useState(false)\n\t\n\tfunction clickHandler(e){\n\t\tif(expanded){\n\t\t\tif(props.onClick){props.onClick(e)}\n\t\t\tsetExpanded(false)\n\t\t} else{\n\t\t\te.stopPropagation()\n\t\t\tsetExpanded(true)\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\tfunction blurHandler(){\n\t\tsetExpanded(false)\n\t}\n\t\n\treturn (\n\t\t<CoreButton\n\t\t\tclassName = {props.className + ' ConfirmButton ' + \n\t\t\t\t(expanded ? ' expanded ' : '') + props.purpose\n\t\t\t}\n\t\t\tlocked = {props.locked}\n\t\t\thidden = {props.hidden}\n\t\t\tonClick = {clickHandler}\n\t\t\tstyle = {props.style}\n\t\t\tonBlur = {blurHandler}\n\t\t>\n\t\t\t{expanded ? props.expandedContent : props.content}\n\t\t</CoreButton>\n\t)\n}\n\n\n\n//\nConfirmButton.propTypes = {\n\thidden: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\tonClick: PropTypes.func,\n\tstyle: PropTypes.object,\n\texpandedStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tcontent: PropTypes.any,\n\texpandedContent: PropTypes.any,\n\tpurpose: PropTypes.string,\n}","import React, {useState} from 'react'\nimport MenuButton from '../MenuButton'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faWindowRestore, faCheck, faTimes} from '@fortawesome/free-solid-svg-icons'\nimport './SaveTableLayout.css'\nimport ConfirmButton from '../../Inputs/ConfirmButton'\n\nexport default function SaveTableLayout(props) {\n\t\n\tconst [saveName, setSaveName] = useState('')\n\tconst [validClass, setValidClass] = useState('')\n\t\n\tfunction changeHandler(e){\n\t\tsetSaveName(e.target.value)\n\t\tsetValidClass('')\n\t}\n\t\n\tconst savedLayouts = props.headers.getSavedLayouts()\n\t\n\tfunction commitHandler(){\n\t\t\n\t\tconst nameExists = Object.values(savedLayouts).some((f)=>{\n\t\t\treturn f.name === saveName\n\t\t})\n\t\t\n\t\tif(saveName.trim() !== '' && !nameExists){\n\t\t\tsetSaveName('')\n\t\t\tprops.headers.saveLayout(saveName)\n\t\t} else{\n\t\t\tsetValidClass('invalid')\n\t\t}\t\n\t}\n\t\n\tfunction keyDownHandler(e) {\n\t\tif (e.key === 'Enter') {\n\t\t\tcommitHandler()\n\t\t\te.target.blur()\n\t\t}\n\t}\n\t\n\t\n\tfunction applyLayout(f){\n\t\tprops.headers.loadLayout(f)\n\t\tprops.data.sort()\n\t}\n\t\n\treturn (\n\t\t<MenuButton\n\t\t\tlocked={false}\n\t\t\tonClose={() => setValidClass('')}\n\t\t\tmenuStyle = {{width: '250px'}}\n\t\t\tmenuContent={\n\t\t\t\t<div className='SaveTableLayout'>\n\n\t\t\t\t\t<div className='inputMenu'>\n\t\t\t\t\t\t<span>Save Current Layout</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input className={'input ' + validClass}\n\t\t\t\t\t\t\tvalue={saveName}\n\t\t\t\t\t\t\tonChange={changeHandler}\n\t\t\t\t\t\t\tonKeyDown={keyDownHandler}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"commitIcon\" onClick={commitHandler}>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCheck} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t{Object.keys(savedLayouts).map((f) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName = {'layoutButton'}\n\t\t\t\t\t\t\t\tkey = {'saveLayoutButton' + f}\n\t\t\t\t\t\t\t\tonClick={()=>{applyLayout(f)}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<ConfirmButton \n\t\t\t\t\t\t\t\t\tclassName='cancelIcon'\n\t\t\t\t\t\t\t\t\tonClick = {(e)=>{\n\t\t\t\t\t\t\t\t\t\tprops.headers.deleteLayout(f)\n\t\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontent = {<FontAwesomeIcon icon={faTimes} />}\n\t\t\t\t\t\t\t\t\texpandedContent = {'Delete'}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: 'var(--cardBG)',\n\t\t\t\t\t\t\t\t\t\tcolor: 'var(--lockedTextColor)',\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tlocked = {false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<span className = 'layoutButtonText'>{savedLayouts[f].name}</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\n\n\t\t\t\t</div>\n\n\t\t\t}>\n\t\t\t\t\n\t\t\t<span className=''>\n\t\t\t\t<FontAwesomeIcon icon={faWindowRestore} />\n\t\t\t</span> Saved Layouts\n\t\t</MenuButton>\n\t)\n}","import React from 'react'\nimport ColumnSettings from './ColumnSettings'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {faTimesCircle, faPlus, faMinus} from '@fortawesome/free-solid-svg-icons'\nimport SaveTableLayout from './SaveTableLayout'\n\n\nexport default function TableControls(props) {\n\tlet clearFilterButton = null\n\tlet layoutButton = null\n\tlet settingsButton = null\n\tlet expandControls\n\t\n\tif (props.hasFilter && !props.noFilter) {\n\t\tclearFilterButton = <button\n\t\t\tonClick={props.clearFilter}\n\t\t><FontAwesomeIcon icon={faTimesCircle} /> Clear Filter</button>\n\t}\n\n\tif (!props.noFilter && !props.noSort) {\n\t\tlayoutButton = <SaveTableLayout \n\t\t\theaders = {props.dataHeaders}\n\t\t\tdata = {props.data}\n\t\t/>\n\t}\n\t\n\tif (!props.noOptions) {\n\t\tsettingsButton = <ColumnSettings\n\t\t\theaders={props.dataHeaders}\n\t\t\tdata={props.data}\n\t\t\tsetTransitionClass = {props.setTransitionClass}\n\t\t/>\n\t}\n\t\n\tif(props.showExpandControls){\n\t\texpandControls = <>\n\t\t\t<button onClick={()=>{\n\t\t\t\tprops.setExpandTrigger(!props.expandTrigger)\n\t\t\t}}><FontAwesomeIcon icon={faPlus} /> Expand All</button>\n\t\t\t\n\t\t\t<button onClick={()=>{\n\t\t\t\tprops.setCollapseTrigger(!props.collapseTrigger)\n\t\t\t}}><FontAwesomeIcon icon={faMinus} /> Collapse All</button>\n\t\t</>\n\t}\n\t\n\t\n\n\treturn (\n\t\t<div className='tableControls'>\n\t\t\t{settingsButton}\n\t\t\t{layoutButton}\n\t\t\t{expandControls}\n\t\t\t{clearFilterButton}\n\t\t</div>\n\t)\n}","import React from 'react'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons'\n\nexport default function PageContols(props) {\n\t\n\tconst showPageBack = props.activePage > 0\n\tconst showPageForward = ((props.activePage + 1) * props.pageSize) < props.dataLength\n\t\n\t\n\tfunction pageBack() {\n\t\tif (showPageBack) {\n\t\t\tprops.setActivePage(props.activePage - 1)\n\t\t}\n\t}\n\t\n\t\n\tfunction pageForward() {\n\t\tif (showPageForward) {\n\t\t\tprops.setActivePage(props.activePage + 1)\n\t\t}\n\t}\n\t\n\n\tif (props.dataLength > props.pageSize) {\n\t\treturn (<div className=\"pageControls\">\n\t\t\t\n\t\t\t{showPageBack ? \n\t\t\t\t<button onClick={pageBack}><FontAwesomeIcon icon={faCaretLeft} /></button> \n\t\t\t: null}\n\t\t\t\n\n\t\t\t<button className='textButton'>Showing {1 + props.activePage * props.pageSize}-\n\t\t\t{Math.min((1 + props.activePage) * props.pageSize, props.dataLength) + ' '}\n\t\t\tof {`  ${props.dataLength}`}</button>\n\t\t\t\n\n\t\t\t{showPageForward ?\n\t\t\t\t<button onClick={pageForward}><FontAwesomeIcon icon={faCaretRight} /></button>\n\t\t\t:null}\n\t\t\t\n\t\t</div>\n\t\t\n\t)} else return null\n\t\n}\n","import DataFilter from './DataFilter'\nimport moment from 'moment'\n\n\nexport default class DataHeader{\n\t\n\tconstructor(options){\n\t\tthis.headerID = options.headerID\n\t\tthis.displayName = options.displayName\n\t\tthis.width = options.width ? options.width : 100\n\t\tthis.required = options.required ? options.required : false\n\t\tthis.visible = (!options.visible === undefined) ? options.visible : true\n\t\tthis.index = options.index\n\t\tthis.onEdit = options.onEdit ? options.onEdit : null\n\t\tthis.locked = options.locked ? options.locked : false\n\t\tthis.styling = options.styling ? options.styling : null\n\t\tthis.uniqueValues = {}\n\t\tthis.type = options.type ? options.type : 'string'\n\t\t\n\t\t//Default filter list only has 1 functions (array filter)\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: (cellValue) => {\n\t\t\t\t\treturn (this.uniqueValues[cellValue] || this.uniqueValues[cellValue] === undefined)\n\t\t\t\t}, \n\t\t\t},\n\t\t}\n\t\t\n\t\t//format for displaying certain types of data\n\t\tconst formatFunctions = {\n\t\t\tdate: (cellValue) => cellValue ? moment(cellValue).format('DD-MMM-YY') : '',\n\t\t\tboolean: (cellValue) => cellValue ? 'True' : 'False',\n\t\t\tother: (cellValue) => cellValue,\n\t\t}\n\t\t\n\t\t//Takes a user input and changes it to the correct data type (eg. Date string to new Date object)\n\t\tconst parseFunctions = {\n\t\t\tdate: (input) => {\n\t\t\t\t\n\t\t\t\tif(input.toString().toLowerCase() === 'today'){\n\t\t\t\t\tconst fullDate = new Date()\n\t\t\t\t\treturn new Date()\n\t\t\t\t}\n\t\t\t\treturn new Date(input)\n\t\t\t},\n\t\t\t\n\t\t\tboolean: (input) => {\n\t\t\t\tconst testVal = input.toString().toLowerCase()\n\t\t\t\tif(testVal === 'true' || testVal === 'yes' || testVal == 1 || testVal === 'y'){\n\t\t\t\t\treturn true\n\t\t\t\t} else return false\n\t\t\t},\n\t\t\n\t\t\tnumber: (input) => {\n\t\t\t\tconst newValue = Number(input)\n\t\t\t\tif(!isNaN(newValue)){\n\t\t\t\t\treturn newValue\n\t\t\t\t} else{\n\t\t\t\t\tthrow new Error('invalid input - not a number')\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tother: (input) => input,\n\t\t}\n\t\t\n\t\t//Compares 2 values that may not be directly equal (eg. date object and date string)\n\t\tconst compareFunctions = {\n\t\t\tdate: (a,b) => moment(a).isSame(b,'day'),\n\t\t\tboolean: (a,b) => this.parse(a) === this.parse(b),\n\t\t\tother: (a,b) => a==b,\n\t\t}\n\t\t\n\t\tthis.format = formatFunctions[this.type] ? formatFunctions[this.type] : formatFunctions.other\n\t\tthis.parse = parseFunctions[this.type] ? parseFunctions[this.type] : parseFunctions.other\n\t\tthis.compare = compareFunctions[this.type] ? compareFunctions[this.type] : compareFunctions.other\n\t\t\n\t}\n\n\t\n\tfilter(cellValue, dataRow){\n\t\t//Check if any of the filters fail\n\t\t//If any filters fail, res will be true. Return the opposite\n\t\treturn !Object.keys(this.filterList).some( (f)=>{\n\t\t\treturn !this.filterList[f].func(cellValue, dataRow)\n\t\t})\n\t}\n\t\n\t\n\taddFilter(options){\n\t\tthis.filterList[options.id] = new DataFilter({...options, headerType: this.type})\n\t}\n\t\n\t\n\tremoveFilter(filterID){\n\t\tdelete this.filterList[filterID]\n\t}\n\t\n\t\n\t//Saves a list of unique values in the column - to be used in the filter dropdowns\n\tembedData(data, metaData){\n\t\tthis.uniqueValues = uniqueByColumn(data, metaData, this.headerID, this.uniqueValues, this.type)\n\t}\n\t\n\t\n\tselectAll(setVal){\n\t\tObject.keys(this.uniqueValues).map((uv)=>{\n\t\t\tthis.uniqueValues[uv] = setVal\n\t\t})\n\t}\n\t\n\t\n\t//checks if there are any active filters, including the array filter\n\thasFilter(){\n\t\t//array filter is always there, check if any other filters are there\n\t\tlet testRes = Object.keys(this.filterList).length === 1\n\t\t\n\t\t//if there are no other filters, check if the array filter is active\n\t\tif(testRes){\n\t\t\tObject.keys(this.uniqueValues).forEach((val) => {\n\t\t\t\tif (!this.uniqueValues[val]){testRes = false}\n\t\t\t})\n\t\t}\n\t\treturn !testRes\n\t}\n\t\n\tclearFilter(){\n\t\tthis.filterList = {\n\t\t\tarrayFilter: {\n\t\t\t\tfunc: (cellValue) => {\n\t\t\t\t\treturn (this.uniqueValues[cellValue] || this.uniqueValues[cellValue] === undefined)\n\t\t\t\t}, displayName: 'Array Filter'\n\t\t\t}\n\t\t}\n\t\tthis.selectAll(true)\n\t}\n}\n\n\n//Returns an array of unique values from a column of DataRow objects\nfunction uniqueByColumn(data, metaData, columnID, oldValues, type) {\n\tconst res = {}\n\t\n\tdata.forEach((r, idx) => {\n\t\t\n\t\tif (metaData[idx].visible || metaData[idx].filteredBy === columnID + ';'){\n\t\t\t//New vales added as true, old values keep their value\n\t\t\tif (oldValues[r[columnID]] === undefined){\n\t\t\t\tres[r[columnID]] = true\n\t\t\t} else{\n\t\t\t\tres[r[columnID]] = oldValues[r[columnID]]\n\t\t\t}\n\t\t}\n\t})\n\t\n\tconst orderedRes = {}\n\tconst sortFunction = type === 'date' ? (a, b) => {\n\t\treturn a - b\n\t} : undefined\n\t\n\tObject.keys(res).sort(sortFunction).forEach((key)=>{\n\t\torderedRes[key] = res[key]\n\t})\n\t\n\treturn orderedRes\n}","import {useState, useRef} from 'react'\nimport DataHeader  from '../DataObjects/DataHeader'\nimport {v4 as uuid} from 'uuid'\n\n\n//Crates a set of DataHeaders, for use with a mainTable\nexport default function useHeaders(dataHeaders = []) {\n\t\n\tconst [headers, setHeaders] = useState(dataHeaders.map((hdr, i) => {\n\t\tconst obj = new DataHeader(hdr)\n\t\tobj.index = i\n\t\treturn (obj)\n\t}))\n\t\n\tconst [savedLayouts, setSavedLayouts] = useState({})\n\tconst [settingsEngine, setSettingsEngine] = useState({ save: ()=>{} })\n\tconst [tokenTrigger, setTokenTrigger] = useState(false)\n\t\n\tconst sortRules = useRef([])\n\tconst setSortRules = (value) => {sortRules.current = value}\n\t\n\t//Coverts the current layout to JSON and saves it\n\tfunction saveLayout(layoutName){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tconst saveID = uuid()\n\t\t\n\t\tnewLayouts[saveID] = {\n\t\t\tname: layoutName,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\t\n\t\theaders.forEach((h)=>{\n\t\t\tnewLayouts[saveID].headerOptions[h.headerID] = {\n\t\t\t\tvisible: h.visible,\n\t\t\t\tfilterList: []\n\t\t\t}\n\t\t\t\n\t\t\tObject.values(h.filterList).forEach((f) => {\n\t\t\t\tif (f.options) { newLayouts[saveID].headerOptions[h.headerID].filterList.push( f.options )}\n\t\t\t})\n\t\t})\n\t\t\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction loadLayout(id){\n\t\tif(savedLayouts[id]){\n\t\t\t\n\t\t\tconst newHeaders = []\n\t\t\t\n\t\t\theaders.forEach(h=>{\n\t\t\t\th.clearFilter()\n\t\t\t\th.visible = savedLayouts[id].headerOptions[h.headerID].visible \n\t\t\t\t\n\t\t\t\tsavedLayouts[id].headerOptions[h.headerID].filterList.forEach((f)=>{\n\t\t\t\t\th.addFilter(f)\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tnewHeaders.push(h)\n\t\t\t})\n\t\t\t\t\n\t\t\tsetHeaders(newHeaders)\n\t\t\tsetSortRules(savedLayouts[id].sortRules)\n\t\t\tsetTokenTrigger(true)\n\t\t}\n\t}\n\t\n\tfunction deleteLayout(id){\n\t\tconst newLayouts = {...savedLayouts}\n\t\tdelete newLayouts[id]\n\t\tsetSavedLayouts(newLayouts)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t\n\t//Saves a list of unique values in each column (header) - to be used in the filter dropdowns\n\tfunction embedData(data, metaData) {\n\t\t\n\t\tconst newHeaders = [...headers]\n\t\t\n\t\tnewHeaders.forEach((hdr) => {\n\t\t\thdr.embedData(data, metaData)\n\t\t})\n\n\t\tsetHeaders(newHeaders)\n\t}\n\t\n\tfunction applyToken(token){\n\t\tconst newSettings = JSON.parse(token)\n\t\tsetSavedLayouts(newSettings.savedLayouts)\n\t\t\n\t\tconst newHeaders = [...headers]\n\t\t\n\t\tnewHeaders.forEach((h)=>{\n\t\t\th.visible = newSettings.headerOptions[h.headerID].visible\n\t\t})\n\t\t\n\t\tsetSortRules(newSettings.sortRules ? newSettings.sortRules : [])\n\t\tsetHeaders(newHeaders)\n\t}\n\t\n\tfunction setVisible(index, bool){\n\t\tconst newHeaders = [...headers]\n\t\tnewHeaders[index].visible = bool\n\t\tsetHeaders(newHeaders)\n\t\tsetSortRules( [...sortRules.current].filter(sr => sr.headerID !== headers[index].headerID) )\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\t//If settings have changed since the last render, create and save a new token\n\tif (tokenTrigger) {\n\t\tsetTokenTrigger(false)\n\t\t\n\t\tconst res = {\n\t\t\tsavedLayouts: savedLayouts,\n\t\t\theaderOptions: {},\n\t\t\tsortRules: sortRules.current\n\t\t}\n\t\t\n\t\theaders.forEach((hdr)=>{\n\t\t\tres.headerOptions[hdr.headerID] = {\n\t\t\t\tvisible: hdr.visible,\n\t\t\t}\n\t\t})\n\n\t\tsettingsEngine.save(JSON.stringify(res))\n\t}\n\t\t\n\tfunction removeSortRule(headerID){\n\t\tsetSortRules(\n\t\t\t[...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\t)\n\t\tsetTokenTrigger(true)\n\t}\n\t\n\tfunction addSortRule(headerID, direction, headerIndex){\n\t\tconst newSortRules = [...sortRules.current].filter(sr => sr.headerID !== headerID)\n\t\tnewSortRules.push({headerID: headerID, direction: direction, index: headerIndex})\n\t\tsetSortRules(newSortRules)\n\t\tsetTokenTrigger(true)\n\t}\n\n\treturn ({\n\t\tget: () => {return headers},\n\t\tset: setHeaders,\n\t\t\n\t\tembedData: embedData,\n\t\tapplyToken: applyToken,\n\t\tsaveLayout: saveLayout,\n\t\tloadLayout: loadLayout,\n\t\tdeleteLayout: deleteLayout,\n\t\tgetSavedLayouts: ()=>{return savedLayouts},\n\t\tsetSettingsEngine: setSettingsEngine,\n\t\tsetVisible: setVisible,\n\t\t\n\t\taddSortRule: addSortRule,\n\t\tremoveSortRule: removeSortRule,\n\t\tgetSortRules: ()=>{\n\t\t\treturn sortRules.current\n\t\t}\n\t})\n}","import React, {useState, useContext, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport './MainTable.css'\nimport MainTableRow from './DisplaySupport/MainTableRow'\nimport lockedContext from '../../Contexts/LockedContext'\nimport TheadButton from './DisplaySupport/TheadButton' \nimport TableControls from './DisplaySupport/TableControls'\nimport useSettings from '../../Hooks/UseSettings'\nimport PageControls from './DisplaySupport/PageContols'\nimport useHeaders from '../../Hooks/UseHeaders'\nimport { useRef } from 'react'\n\nexport default function MainTable(props){\n\t\n\tconst headers = useHeaders(props.headers)\n\t\n\t//Sorting and filtering are optional (via props), only supported with if a dataset is provided\n\tlet noSort = props.noSort || !props.data.sort  \n\tlet noFilter = props.noFilter\n\tlet noOptions = props.noOptions || !props.settingsID\n\tlet searchable = props.searchable\n\tlet noActive = props.noActive\n\t\n\t//expanded rows (if applicable)\n\tconst hasNestedClass = props.nestedComponent ? ' hasNested ' : null\n\t\n\t//support for dataSets or for just arrays\n\tlet data = props.data\n\tlet metaData = [{}]\n\t\n\t//deccides if the component is locked based on props and parents in the tree\n\tconst lockedFromAbove = useContext(lockedContext)\n\tlet locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tif(props.data.isDataset){\n\t\tdata = props.data.read()\n\t\tmetaData = props.data.getMetaData()\n\t} else{\n\t\tnoSort = true\n\t\tnoFilter = true\n\t\tnoActive = true\n\t\tsearchable =  false\n\t\tlocked = true\n\t}\n\t\n\t//Settings token support \n\tconst [sortTrigger, setSortTrigger] = useState(false)\n\tconst saveSettings = useSettings(props.settingsID, (token) => {\n\t\theaders.applyToken(token)\n\t\tif(!noSort){setSortTrigger(true)}\n\t})\n\t\n\tif (sortTrigger) { \n\t\tsetSortTrigger(false)\n\t\tsetTimeout(props.data.sort, 0)\n\t}\n\t\n\t//Active page handling\n\tconst [activePage, setActivePage] = useState(0)\n\t\n\t//get the length of the data with the filter applied\n\tlet dataLength = 0\n\tdata.forEach((r, idx)=>{\n\t\tif(metaData[idx]){\n\t\t\tif (metaData[idx].visible && !metaData[idx].searchHidden){dataLength ++}\n\t\t} else {\n\t\t\tdataLength++\n\t\t}\n\t})\n\t\n\t//For dataSets - runs when dataSet refreshes (sets the filter options to match)\n\tuseEffect(() => {\n\n\t\tif (!noFilter) {\n\t\t\theaders.embedData(data, metaData)\n\t\t\tprops.data.setHeaders(headers)\n\t\t}\n\n\t\tif (!noOptions) {\n\t\t\theaders.setSettingsEngine({ save: saveSettings })\n\t\t}\n\n\t}, [props.data.lastResolved, props.data.lastEdited])\n\t\n\t//If clicking sets the active record then its animated\n\t//if there are editable cells the animations will be cancelled\n\tlet dynamic\n\tlet hasActiveClass = ''\n\t\n\tif(!noActive){\n\t\tdynamic = true\n\t\thasActiveClass = ' hasActive '\n\t} \n\t\n\tlet hasFilter = false\n\tlet totalHeaderWidth = 70\n\t\n\theaders.get().forEach(hdr => {\n\t\t//if you have input cells in the table, hover effects will be cancelled\n\t\tif(hdr.onEdit){dynamic = false}\n\t\t\n\t\tif(hdr.visible){totalHeaderWidth = totalHeaderWidth + hdr.width}\n\t\t\n\t\t//check if any headers have active filters (to show a clear filter button)\n\t\tif(hdr.hasFilter()){hasFilter = true}\n\n\t})\n\n\tfunction clearFilter(){\n\t\tconst newHeaders = [...headers.get()]\n\t\tnewHeaders.forEach(hdr=>{\n\t\t\thdr.clearFilter()\n\t\t})\n\t\t\n\t\theaders.set(newHeaders)\n\t\tprops.data.filter()\n\t}\n\t\n\tconst [transitionClass, setTransitionClass] = useState('')\n\t\n\t//Counter for rendered rows\n\tlet rowCount = 1\n\n\t//Positioning for nested components\n\tconst [expandTrigger, setExpandTrigger] = useState(false)\n\tconst [collapseTrigger, setCollapseTrigger] = useState(false)\n\tconst tableRef = useRef()\n\tconst [scrollPos, setScrollPos] = useState(0)\n\n\n\tfunction scrollHandler(e){\n\t\tif(e.target.scrollLeft !== scrollPos){\n\t\t\tsetScrollPos(e.target.scrollLeft)\n\t\t}\n\t}\n\n\t//Render\n\treturn (\n\t\t<div \n\t\t\tclassName={'MainTable ' + hasActiveClass + hasNestedClass} \n\t\t\tref = {tableRef} \n\t\t\tonScroll={hasNestedClass ? scrollHandler : undefined}\n\t\t>\n\n\t\t\t<div className=\"topBar\">\n\t\t\t\t<div className='topBarContainer'></div>\n\t\t\t\t\t<TableControls\n\t\t\t\t\t\thasFilter={hasFilter}\n\t\t\t\t\t\tnoFilter={noFilter}\n\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\tclearFilter={clearFilter}\n\t\t\t\t\t\tnoOptions={noOptions}\n\t\t\t\t\t\tdataHeaders={headers}\n\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\tsetTransitionClass={setTransitionClass}\n\t\t\t\t\t\tsetExpandTrigger = {setExpandTrigger}\n\t\t\t\t\t\tsetCollapseTrigger = {setCollapseTrigger}\n\t\t\t\t\t\texpandTrigger = {expandTrigger}\n\t\t\t\t\t\tcollapseTrigger = {collapseTrigger}\n\t\t\t\t\t\tshowExpandControls = {props.nestedComponent ? true : false}\n\t\t\t\t\t/>\n\t\t\t\t\t<PageControls \n\t\t\t\t\t\tactivePage = {activePage}\n\t\t\t\t\t\tsetActivePage = {setActivePage}\n\t\t\t\t\t\tdataLength = {dataLength}\n\t\t\t\t\t\tpageSize = {props.pageSize}\n\t\t\t\t\t/>\n\t\t\t</div>\n\n\n\t\t\t<div className=\"theadBar\" style={{\n\t\t\t\ttop: 'var(--topBarHeight)',\n\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)'\n\t\t\t}}>\n\t\t\t\t{headers.get().map((hdr, i) => {\n\t\t\t\t\tif (hdr.visible) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span style={{ width: hdr.width + 'px' }} key={'header' + i}>\n\n\t\t\t\t\t\t\t\t<TheadButton\n\t\t\t\t\t\t\t\t\theader={hdr}\n\t\t\t\t\t\t\t\t\tdata={props.data}\n\t\t\t\t\t\t\t\t\tdataHeaders={headers}\n\t\t\t\t\t\t\t\t\tnoFilter={noFilter} \n\t\t\t\t\t\t\t\t\tnoSort={noSort}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{hdr.displayName + ' '}\n\t\t\t\t\t\t\t\t</TheadButton>\n\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)\n\t\t\t\t\t} else return null\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<div className={\"mainSection\" + transitionClass} style={{\n\t\t\t\twidth: 'max(calc(' + totalHeaderWidth + 'px + 70px), 100%)' \n\t\t\t}}>\n\t\t\t\t\n\t\t\t\t{/* Table body data */}\n\t\t\t\t<div className = {'tableBody ' + props.data.lastResolved}>\n\t\t\t\t\t{data.map((dr, idx) => {\n\t\t\t\t\t\t//render the allowed numebr of rows, on th selected page\n\t\t\t\t\t\tif((rowCount > activePage * props.pageSize) && (rowCount <= (1 + activePage)*props.pageSize)){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet renderRow = dr !== []\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(searchable){\n\t\t\t\t\t\t\t\trenderRow = !metaData[idx].searchHidden\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\trenderRow = renderRow && (noFilter || metaData[idx].visible)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst rowKey = dr[props.data.primaryKey] ? dr[props.data.primaryKey] : idx\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst r = renderRow ? \n\t\t\t\t\t\t\t\t<MainTableRow\n\t\t\t\t\t\t\t\t\tdataRow = {dr}\n\t\t\t\t\t\t\t\t\tdataset = {props.data}\n\t\t\t\t\t\t\t\t\tdataHeaders={headers.get()}\n\t\t\t\t\t\t\t\t\trowKey = {rowKey}\n\t\t\t\t\t\t\t\t\tkey = {rowKey}\n\t\t\t\t\t\t\t\t\tlocked = {locked}\n\t\t\t\t\t\t\t\t\tdynamic = {dynamic}\n\t\t\t\t\t\t\t\t\trowIndex = {idx}\n\t\t\t\t\t\t\t\t\tnestedComponent = {props.nestedComponent}\n\t\t\t\t\t\t\t\t\tnestedProps = {props.nestedProps}\n\t\t\t\t\t\t\t\t\texpandTrigger = {expandTrigger}\n\t\t\t\t\t\t\t\t\tcollapseTrigger = {collapseTrigger}\n\t\t\t\t\t\t\t\t\tnoActive = {noActive}\n\t\t\t\t\t\t\t\t\ttableRef = {tableRef}\n\t\t\t\t\t\t\t\t\tscrollPos = {scrollPos}\n\t\t\t\t\t\t\t\t/> : null\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(r){rowCount++}//Count the number of rows actually renedered (not filtered out)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn r\n\t\t\t\t\t\t} else if(rowCount <= (1 + activePage)*props.pageSize){rowCount++}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn null\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\n\n//Proptypes\nMainTable.propTypes = {\n\tonEdit: PropTypes.func,\n\theaders: PropTypes.arrayOf(PropTypes.object).isRequired,\n\t\n\tdata: PropTypes.oneOfType([\n\t\tPropTypes.object,\n\t\tPropTypes.array\n\t]).isRequired,\n\t\n\tpageSize: PropTypes.number,\n\tlocked: PropTypes.bool,\n\tsearchable: PropTypes.bool,\n\tnoSort: PropTypes.bool,\n\tnoFilter: PropTypes.bool,\n\tnoOptions: PropTypes.bool,\n\tnoActive: PropTypes.bool,\n\tnestedProps: PropTypes.object,\n\tnestedComponent: PropTypes.func,\n\tsettingsID: PropTypes.string,\n}\n\nMainTable.defaultProps = {\n\tpageSize: 100,\n\t\n}","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function InfoTab(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tif(!props.hidden){return (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t\n\t\t\t<div className = {'InfoTab ' + props.tabID} style = {props.style}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t\t\n\t\t</lockedContext.Provider>\n\t)} else return null\n}\n\n//Proptypes\nInfoTab.propTypes = {\n\ttabTitle: PropTypes.string,\n\ttabID: PropTypes.string.isRequired,\n\tstyle: PropTypes.object,\n}\n","import React, {useContext} from 'react'\nimport {Tabs, Tab} from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './InfoTabContainer.css'\n\n\nexport default function InfoTabContainer(props) {\n\t\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked ===undefined)\n\t\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"InfoTabContainer\">\n\t\t\t\t<Tabs \n\t\t\t\t\tdefaultActiveKey={props.defaultTab} \n\t\t\t\t\ttransition={false}\n\t\t\t\t\tonSelect = {(tabID)=>{\n\t\t\t\t\t\tif(props.onTabChange){props.onTabChange(tabID, locked)}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t{React.Children.map(props.children,(child) =>{\n\t\t\t\t\t\tif(!child.props.hidden){\n\t\t\t\t\t\t\treturn(<Tab eventKey={child.props.tabID} title={child.props.tabTitle}>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</Tab>)\n\t\t\t\t\t\t} else return null\n\t\t\t\t\t})}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nInfoTabContainer.propTypes = {\n\tdefaultTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n}\n\n\n","import React, {useEffect, useContext} from 'react'\nimport './Module.css'\nimport PropTypes from 'prop-types'\nimport useModuleData from '../../Hooks/UseModuleData'\nimport lockedContext from '../../Contexts/LockedContext'\n\n\nexport default function Module(props) {\n\t\n\tconst moduleData = useModuleData()\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\tuseEffect(()=>{\n\t\tmoduleData.clear()\n\t\t\n\t\treturn(()=>{\n\t\t\tmoduleData.clear()\n\t\t})\n\t\t\n\t}, [])\n\t\n\treturn (\n\t\t<div className={'Module ' + props.moduleName} style = {props.style}>\n\t\t\t<lockedContext.Provider value = {locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nModule.propTypes = {\n\tmoduleName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tlocked: PropTypes.bool,\n}\n","import React from 'react'\nimport './SplitScreen.css'\nimport Split from 'react-split'\nimport PropTypes from 'prop-types'\n\nexport default function SplitScreen(props) {\n\t\n\tlet splitSize = 50\n\tif(props.defaultSize){splitSize = props.defaultSize}\n\t\n\treturn (\n\t\t<div className='SplitScreen'>\n\t\t\t<Split \n\t\t\t\tdirection=\"vertical\" \n\t\t\t\tsizes={[100 - splitSize, splitSize]}\n\t\t\t\tminSize={100}\n\t\t\t\tgutterSize={8}\n\t\t\t\tsnapOffset={1}\n\t\t\t\tdragInterval={20}\n\t\t\t>\n\t\t\t\t{props.children}\n\n\t\t\t</Split>\n\t\t</div>\n\t)\n}\n\n//Proptypes\nSplitScreen.propTypes = {\n\tdefaultSize: PropTypes.number,\n}","import React, { useContext } from 'react'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport lockedContext from '../../Contexts/LockedContext'\nimport PropTypes from 'prop-types'\nimport './ControlledTabContainer.css'\n\n\nexport default function ControlledTabContainer(props) {\n\n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\n\treturn (\n\t\t<lockedContext.Provider value={locked}>\n\t\t\t<div className=\"ControlledTabContainer\" style={props.style}>\n\t\t\t\t\n\t\t\t\t<Tabs\n\t\t\t\t\tactiveKey={props.activeTab}\n\t\t\t\t\ttransition={false}\n\t\t\t\t\tonSelect={(tabID) => {\n\t\t\t\t\t\tif (props.onTabChange) { props.onTabChange(tabID, locked) }\n\t\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t{React.Children.map(props.children, (child) => {\n\t\t\t\t\t\tif (!child.props.hidden) {\n\t\t\t\t\t\t\treturn (<Tab eventKey={child.props.tabID} title={child.props.tabTitle}>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</Tab>)\n\t\t\t\t\t\t} else return null\n\t\t\t\t\t})}\n\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t</lockedContext.Provider>\n\t)\n}\n\n//Proptypes\nControlledTabContainer.propTypes = {\n\tactiveTab: PropTypes.string,\n\tonTabChange: PropTypes.func,\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n\n\n","import React, {useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport './Dock.css'\nimport usePresence from '../../Hooks/UsePresence'\nimport lockedContext from '../../Contexts/LockedContext'\n\nexport default function Dock(props) {\n\t\n\tusePresence('TouchPointDock', 0, 'var(--dockWidth)')\n\t\n\t//locking the item. If a component somewhere above in the tree is locked, the context will \n\tconst lockedFromAbove = useContext(lockedContext)\n\tconst locked = props.locked || (lockedFromAbove && props.locked === undefined)\n\t\n\treturn (\n\t\t<div className = 'Dock' style = {props.style}>\n\t\t\t<lockedContext.Provider value={locked}>\n\t\t\t\t{props.children}\n\t\t\t</lockedContext.Provider>\n\t\t</div>\n\t)\n}\n\nDock.propTypes={\n\tlocked: PropTypes.bool,\n\tstyle: PropTypes.object,\n}\n","import {useState, useEffect} from 'react'\nimport useModuleData from '../Hooks/UseModuleData'\n\n\n//Initialises a Dataset and caches the value\nexport default function useDataset(fetchFunction, primaryKey, defaultValue = [{}]) {\n\t\n\t//The array contains an empty object by default\n\tconst [data, setData] = useState(defaultValue)\n\tconst [metaData, setMetaData] = useState([{visible: true, filteredBy: ''}])\n\tconst [status, setStatus] = useState('Pending')\n\tconst [lastResolved, setLastResolved] = useState()\n\tconst [lastEdited, setLastEdited] = useState()\n\tconst [headers, setHeaders] = useState({ get: () => [] , getSortRules: ()=>[] })\n\tconst [activeRecord, setActiveRecord] = useState({})\n\t\n\t//Allowing you to choose the data arary you use, so you can set the active row right after fetching/setting new data\n\tfunction selectRecord(newPrimaryKey, fromData = data){\n\n\t\tconst newIndex = fromData.findIndex(r => r[primaryKey] == newPrimaryKey)\n\t\t\n\t\tif(newIndex > -1){\n\t\t\tsetActiveRecord(fromData[newIndex])\n\t\t\treturn (fromData[newIndex])\n\t\t} else{\n\t\t\tsetActiveRecord({})\n\t\t\treturn({})\n\t\t} \t\n\t}\n\t\n\t\n\tfunction getActiveRecord(){\n\t\t//Ensure the row is valid and has the correct primary key\n\t\treturn activeRecord\n\t}\n\t\n\t\n\t//Search data on change\n\tconst searchText = useModuleData().get('TouchPointSearchText')\n\t\n\tfunction searchData(values) {\n\n\t\tconst newMetaData = []\n\t\t\n\t\tvalues.forEach((r, idx) => {\n\n\t\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\t\trowMeta.searchHidden = false\n\n\t\t\tif (searchText) {\n\n\t\t\t\trowMeta.searchHidden = !headers.get().some((hdr) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst newValue = r[hdr.headerID].toString().toLowerCase()\n\t\t\t\t\t\treturn newValue.includes(searchText.toLowerCase())\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tnewMetaData.push(rowMeta)\n\t\t})\n\t\t\n\t\treturn newMetaData\n\t}\n\t\n\t\n\tuseEffect(() => {\n\t\tsetMetaData(searchData(data))\n\t}, [searchText])\n\t\n\t//Filters the data based on given headers\n\tfunction filterData(values){\n\t\t\n\t\tconst newMetaData = []\n\t\t\n\t\tvalues.forEach((r, idx) => {\n\t\t\t\n\t\t\tconst rowMeta = metaData[idx] ? metaData[idx] : {}\n\t\t\trowMeta.filteredBy = ''\n\t\t\t\n\t\t\tlet noRender = false\n\t\t\t\n\t\t\theaders.get().forEach((h) => {\n\t\t\t\tconst fltr = h.filter(r[h.headerID], r)\n\t\t\t\t\n\t\t\t\tif (!fltr && fltr !='arrayFilter' && h.visible){\n\t\t\t\t\tnoRender = true\n\t\t\t\t\trowMeta.filteredBy = rowMeta.filteredBy + [h.headerID] + ';'\n\t\t\t\t}\n\t\t\t})\n\n\t\t\trowMeta.visible = !noRender \n\t\t\tnewMetaData.push(rowMeta)\n\t\t})\n\t\t\n\t\treturn newMetaData\n\t}\n\t\n\t\n\tfunction sortData(values){\n\t\tlet newValues = [...values]\n\t\t\n\t\theaders.getSortRules().forEach((sr)=>{\n\t\t\t\n\t\t\tif (headers.get()[sr.index] && headers.get()[sr.index].visible){\n\t\t\t\tnewValues = newValues.sort((aRow, bRow) => {\n\t\t\t\t\t\n\t\t\t\t\tif (sr.direction === 'asc') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(aRow[sr.headerID] > bRow[sr.headerID]){ \n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t\t}else if (aRow[sr.headerID] < bRow[sr.headerID]){\n\t\t\t\t\t\t\treturn -1\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn 0\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (aRow[sr.headerID] < bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t\t} else if (aRow[sr.headerID] > bRow[sr.headerID]) {\n\t\t\t\t\t\t\treturn -1\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn 0\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t})\n\t\t\n\t\treturn newValues\n\t}\n\t\n\t\n\t//Fetch data and update state once the operation is complete. Keep the old value in the meantime\n\tasync function fetchData() {\n\t\tsetStatus('Pending')\n\n\t\ttry {\n\t\t\t\n\t\t\tlet newData = await fetchFunction()\n\t\t\tnewData = sortData(newData)\n\t\t\t\n\t\t\tsetMetaData(searchData(newData))\n\t\t\tsetMetaData(filterData(newData))\n\t\t\tsetData(newData)\n\t\t\t\n\t\t\tselectRecord(activeRecord[primaryKey], newData)\n\t\t\t\n\t\t\tsetStatus('Resolved')\n\t\t\tsetLastResolved(Date())\n\t\t\treturn status\n\t\t\t\n\t\t} catch (e) {\n\t\t\tsetStatus('Rejected')\n\t\t\tconsole.error(e)\n\t\t\treturn status\n\t\t}\n\t}\n\t\n\t//If it's a subdataset, forward the refresh request to the parent\n\tasync function refreshData(){\n\t\tif (status !== 'Pending') {\n\t\t\tfetchData()\n\t\t}\n\t}\n\t\n\t//Automatically run the fetching function the first time, then wait for a refresh\n\t//If the dataset was spawned by a parent dataset, send its refresh function to the parent, so it can refresh when the parent refreshes\n\tuseEffect(()=>{ \n\t\tif(!primaryKey){console.error('Missing primary key for dataset!')}\n\t\tfetchData()\n\t},[])\n\t\n\t//Return a Dataset object\n\treturn ({\n\t\tread: () => { return data },\n\t\trefresh: refreshData,\n\t\t\n\t\tselectRecord: (primaryKey) => selectRecord(primaryKey),\n\t\tgetActiveRecord: getActiveRecord,\n\t\t\n\t\tstatus: status,\n\t\tlastResolved: lastResolved,\n\t\tlastEdited: lastEdited,\n\t\t\n\t\t//TouchPoint Controls\n\t\tsetHeaders: setHeaders,\n\t\tisDataset: true,\n\t\tprimaryKey: primaryKey,\n\t\tgetMetaData: () => { return metaData },\n\t\t\n\t\tfilter: () => {\n\t\t\tconst newMeta = filterData(data)\n\t\t\tsetMetaData(newMeta)\n\t\t\theaders.embedData(data, newMeta)\n\t\t},\n\t\t\n\t\tsort: () => {\n\t\t\t\n\t\t\tconst newData = sortData(data)\n\t\t\tconst newMeta = filterData(newData)\n\t\t\t\n\t\t\tsetMetaData(newMeta)\n\t\t\tsetData(newData)\n\t\t},\n\t\t\n\t\tset: (newData)=>{\n\t\t\tsetData(newData)\n\t\t\tsetLastEdited(Date())\n\t\t\tselectRecord(activeRecord[primaryKey], newData)\n\t\t}\n\t})\n}"],"names":["SystemPopupHandler","props","clickBackdrop","e","target","classList","contains","activePopup","forceOpen","system","Popup","close","forceClass","popupEffect","moduleContext","createContext","SystemModuleContainer","styleSettings","height","layout","get","heightCSS","width","widthCSS","right","moduleList","Modules","list","moduleDataState","useState","Object","keys","map","m","component","getHomeName","systemContext","lockedContext","ThemeEngine","themes","orange","tableActiveColor","mainTextColor","labelColor","lockedTextColor","navColor","navTextColor","navHoverColor","navClickedColor","bodyAltBG","cardBG","borderColor","freeButtonNeutralBG","freeButtonPositiveBG","freeButtonNegativeBG","freeButtonTextColor","inputColor","inputInvalidColor","inputValidColor","blue","dark","themeName","themeData","toLowerCase","entries","forEach","key","value","document","documentElement","style","setProperty","localStorage","setItem","setTheme","getItem","CoreButton","lockedFromAbove","useContext","locked","undefined","lockedClass","clickHandler","onClick","hidden","className","onBlur","children","propTypes","PropTypes","bool","func","string","object","CloseButton","faTimes","AppDrawer","trueLeft","drawer","isOpen","drawerLeft","setDrawerLeft","useEffect","handlerClass","exists","left","opacity","innerStyle","display","title","useSystem","useSettings","settingsID","applySettings","Settings","save","fetchAndApply","token","console","error","newToken","TouchPointApp","setPopup","screenBlock","setScreenBlock","setPopupEffect","moduleLock","setModuleLock","drawerIsOpen","setDrawerIsOpen","drawerData","setDrawerData","screenEffect","setScreenEffect","widths","heights","setLayout","saveSettings","settingsToken","System","Theme","set","themeEngine","SystemThemeEngine","open","moduleName","modules","window","location","href","onOpenModule","homeModule","Input","enable","disable","forTime","setTimeout","PopupComponent","Drawer","data","setData","getSettings","io","applySavedTheme","newTheme","screenBlocker","SystemDrawerHandler","isRequired","any","usePresence","componentName","refreshCSS","layoutSettings","values","h","w","newLayout","AppToolbar","label","AppFooter","newProps","defaultOpen","FreeButton","purpose","wideClass","wide","Tile","splash","setSplash","splashScreen","icon","TextBox","changeHandler","onChange","blurHandler","keyPressHandler","onEnter","defaultValue","placeholder","inputRef","autoFocus","useModuleContext","dataSource","setDataSource","newSource","clear","SearchBar","moduleData","useModuleData","searchFunction","setSearchFunction","searchRef","useRef","searchBarValue","setSearchBarValue","focusSearchBar","current","focus","keyDownHandler","isCtrl","ctrlKey","metaKey","keyCode","preventDefault","addEventListener","removeEventListener","searchHandler","clearTimeout","faSearch","radioContext","RadioGroup","uuid","groupName","groupID","radioData","RadioButton","id","buttonStyle","labelStyle","labelValue","ControlButton","ControlBar","searchBar","searchBarProps","CommentBox","ComboBox","kids","CheckBox","checked","DockIcon","faIcon","iconStyle","fontSize","notifications","notificationBadge","number","InfoCard","stripe","hasStripe","stripeColor","titleBar","dynamic","dynamicX","dynamicY","closeHandler","stopPropagation","onClose","color","closeButton","stripeStyle","borderLeftColor","PopupCard","handleCloseButton","onOpen","menuContext","dropMenu","React","forwardRef","ref","submenu","menuClass","menuStyle","onClickBody","MenuContent","MenuButton","toggling","setToggling","toggleHandler","parentMenuData","faCaretRight","direction","dropButton","body","click","ReactDOM","createPortal","menuContent","maxHeight","InputCell","dataRow","header","headerID","format","initalValue","setInitialValue","currentValue","setCurrentValue","newVal","focusHandler","keyHandler","blur","validClass","setValidClass","flashRed","flashGreen","commitChanges","compare","newData","JSON","parse","stringify","dataset","read","newCellValue","rowIndex","onEdit","res","MainTableRow","activeClass","getActiveRecord","primaryKey","rowClickHandler","noActive","selectRecord","rowContent","dataHeaders","hdr","i","visible","cellContent","cellClass","styling","rowKey","myStyle","marginLeft","expanded","setExpanded","expandedClass","expandHandler","expandTrigger","collapseTrigger","setDataRow","newRow","expandIcon","nestedComponent","faMinus","faPlus","tableRef","clientWidth","scrollPos","nestedProps","SortMenu","sortData","addSortRule","index","sort","sortRule","getSortRules","find","sr","sortDir","cancelIcon","removeSortRule","noSort","FilterMenu","uniqueValues","cb","getElementById","newHeaders","selectAll","clearFilter","spanStyle","textAlign","paddingLeft","count","lim","noFilter","hasFilter","cursor","v","DataFilter","options","displayName","type","filter","getFilterTypes","args","toString","val","err","includes","availableTo","doesNotInclude","lessThan","moment","isBefore","greaterThan","isAfter","equals","isSame","doesNotEqual","MoreFilterButtonActive","filterList","filterID","commitHandler","addFilter","cancelHandler","setActive","removeFilter","trim","MoreFilterButton","active","activate","newActive","paddingRight","MoreFilters","f","openTrigger","TheadMenu","TheadButton","arrowIcon","faCaretDown","filterIcon","sortIcon","faSortAlphaDown","faSortAlphaDownAlt","faFilter","setOpenTrigger","setIsOpen","openClass","maxWidth","CheckButton","checkID","disabled","defaultChecked","Proptypes","ColumnSettings","idx","setTransitionClass","headers","setVisible","overflowY","required","faColumns","ConfirmButton","expandedContent","content","expandedStyle","SaveTableLayout","saveName","setSaveName","savedLayouts","getSavedLayouts","nameExists","some","name","saveLayout","applyLayout","loadLayout","faCheck","deleteLayout","backgroundColor","padding","faWindowRestore","TableControls","clearFilterButton","layoutButton","settingsButton","expandControls","faTimesCircle","noOptions","showExpandControls","setExpandTrigger","setCollapseTrigger","PageContols","showPageBack","activePage","showPageForward","pageSize","dataLength","pageBack","setActivePage","pageForward","faCaretLeft","Math","min","DataHeader","arrayFilter","cellValue","formatFunctions","date","boolean","other","parseFunctions","input","Date","testVal","newValue","Number","isNaN","Error","compareFunctions","a","b","headerType","metaData","uniqueByColumn","setVal","uv","testRes","length","columnID","oldValues","r","filteredBy","orderedRes","sortFunction","useHeaders","obj","setHeaders","setSavedLayouts","settingsEngine","setSettingsEngine","tokenTrigger","setTokenTrigger","sortRules","setSortRules","layoutName","newLayouts","saveID","headerOptions","push","embedData","applyToken","newSettings","headerIndex","newSortRules","MainTable","searchable","hasNestedClass","isDataset","getMetaData","sortTrigger","setSortTrigger","searchHidden","lastResolved","lastEdited","hasActiveClass","totalHeaderWidth","transitionClass","rowCount","setScrollPos","scrollHandler","scrollLeft","PageControls","top","dr","renderRow","arrayOf","oneOfType","array","defaultProps","InfoTab","tabID","tabTitle","InfoTabContainer","defaultTab","onTabChange","Children","child","Module","SplitScreen","splitSize","defaultSize","ControlledTabContainer","activeTab","Dock","useDataset","fetchFunction","setMetaData","status","setStatus","setLastResolved","setLastEdited","activeRecord","setActiveRecord","newPrimaryKey","fromData","newIndex","findIndex","searchText","searchData","newMetaData","rowMeta","filterData","noRender","fltr","newValues","aRow","bRow","fetchData","refreshData","refresh","newMeta"],"mappings":"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"}